parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Ex3v":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.Dev=1]="Dev",e[e.Prod=2]="Prod"}(e=exports.BuildLevel||(exports.BuildLevel={})),exports.Config={GameVersion:"web1.2.0",BuildLevel:e.Prod};
},{}],"HmIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ASSETSPATH={ENDSCREEN:"./assets/endTexts/",AUDIO:"./assets/audio/",BUTTONS:"./assets/buttons/",FONTS:"./assets/fonts/",ANIMATIONS:"./assets/animations/",PHYSICS:"./assets/physics/",LOAD:"./assets/load/",MENU:"./assets/0menu/",FLY:"./assets/1fly/",PROTECT:"./assets/2protect/",ALAN:"./assets/3alan/",JUMPSCARE:"./assets/4jumpscare/",COMEDIAN:"./assets/5comedian/",PARTY:"./assets/6party/",DRESSUP:"./assets/8dressup/",COLLECT:"./assets/9candycollect/",SORT:"./assets/10sortcandy/",GHOSTBUSTERS:"./assets/11ghostbusters/",HEAVENHELL:"./assets/12heavenorhell/"},exports.CONST={REGISTRY:{ADBLOCKENABLED:"adblockEnabled",SKIPUSED:"skipUsed",JUMPSCARE_ATTEMPTS:"jumpscareAttempts",GHOSTBUSTERS_ATTEMPTED:"ghostbustersAttempted",HELL_COMPLETED:"hellCompleted",GAME_COMPLETED:"gameCompleted"},GAMESTATE:{START:"START",PLAYING:"PLAYING",WIN:"WIN",LOSE:"LOSE",LOADNEXTLEVEL:"LOAD"},SCENES:{LOAD:"LOAD",PROGRESSIVE_LOAD:"PROGRESSIVE_LOAD",SOUNDTRACK:"SOUNDTRACK",MENU:"MENU",FLY:"FLY",ALAN:"ALAN",PROTECT:"PROTECT",JUMPSCARE:"JUMPSCARE",COMEDIAN:"COMEDIAN",PARTY:"PARTY",DRESSUP:"DRESSUP",COLLECT:"COLLECT",SORT:"SORT",GHOSTBUSTERS:"GHOSTBUSTERS",HEAVENHELL:"HEAVENHELL",CREDITS:"CREDITS"},STORAGE_KEYS:{PROGRESS:"game_progress",DRESSUP_COSTUME:"dressup_costume"},AUDIO:{SOUNDTRACK:exports.ASSETSPATH.AUDIO+"soundtrack.mp3",SOUNDTRACK_SHORT:exports.ASSETSPATH.AUDIO+"soundtrackShort.mp3",EERIE:exports.ASSETSPATH.AUDIO+"eerie.mp3",GRAB:exports.ASSETSPATH.AUDIO+"paperGrab.mp3",BOUNCE:exports.ASSETSPATH.AUDIO+"bounce.mp3",SCARE1:exports.ASSETSPATH.AUDIO+"scare1.mp3",SCARE2:exports.ASSETSPATH.AUDIO+"scare2.mp3",PARTY_MUSIC:exports.ASSETSPATH.AUDIO+"partyMusic.mp3",WINK:exports.ASSETSPATH.AUDIO+"wink.mp3",CLICK:exports.ASSETSPATH.AUDIO+"btnClick.mp3",WIN:exports.ASSETSPATH.AUDIO+"win.mp3",LOSE:exports.ASSETSPATH.AUDIO+"lose.mp3"},BUTTONS:{TRYAGAIN:exports.ASSETSPATH.BUTTONS+"button.png",SKIP:exports.ASSETSPATH.BUTTONS+"ad-button.png",SPINNER:exports.ASSETSPATH.BUTTONS+"spinner.png",PURPLE:exports.ASSETSPATH.BUTTONS+"purple.png",RED:exports.ASSETSPATH.BUTTONS+"red.png",SOUND_ON:exports.ASSETSPATH.BUTTONS+"sound-on.png",SOUND_OFF:exports.ASSETSPATH.BUTTONS+"sound-off.png"},FONT:{ATLAS:exports.ASSETSPATH.FONTS+"LTGFont.png",XML:exports.ASSETSPATH.FONTS+"LTGFont.xml"},ANIMATIONS:{CANDY_IDLE:exports.ASSETSPATH.ANIMATIONS+"CandyAnim.json",CANDY_DIE:exports.ASSETSPATH.ANIMATIONS+"CandyDie.json",SCARYARM_BACK:exports.ASSETSPATH.ANIMATIONS+"scaryArmBack.json",SCARYARM_FRONT:exports.ASSETSPATH.ANIMATIONS+"scaryArmFront.json",GHOST_IDLE:exports.ASSETSPATH.ANIMATIONS+"ghostIdle.json",GHOST_DIE:exports.ASSETSPATH.ANIMATIONS+"ghostDie.json",GRANNY_HAND1:exports.ASSETSPATH.ANIMATIONS+"granny_hand1.json",GRANNY_HAND2:exports.ASSETSPATH.ANIMATIONS+"granny_hand2.json",GRANNYDIE_HAND1:exports.ASSETSPATH.ANIMATIONS+"grannyDie_hand1.json",GRANNYDIE_HAND2:exports.ASSETSPATH.ANIMATIONS+"grannyDie_hand2.json",GRANNYDIE_BODY:exports.ASSETSPATH.ANIMATIONS+"grannyDie_body.json",WIN_IMAGE_POPUP:exports.ASSETSPATH.ANIMATIONS+"winImagePopup.json",NOTE_DEATH:exports.ASSETSPATH.ANIMATIONS+"noteDeath.json",BLUE_LIGHT:exports.ASSETSPATH.ANIMATIONS+"bluelight.json",GREEN_LIGHT:exports.ASSETSPATH.ANIMATIONS+"greenlight.json",PINK_LIGHT:exports.ASSETSPATH.ANIMATIONS+"pinklight.json",COMEDIAN_HAND_1:exports.ASSETSPATH.ANIMATIONS+"comedianHand.json",COMEDIAN_HAND_2:exports.ASSETSPATH.ANIMATIONS+"comedianHand2.json",FLY_WIN:exports.ASSETSPATH.ANIMATIONS+"flyWin.json"},PHYSICS:{FLY_SHAPES:exports.ASSETSPATH.PHYSICS+"ghost_shape.json",HEAVENHELL_SHAPES:exports.ASSETSPATH.PHYSICS+"heavenhell_shapes.json"},MENU:{BACKGROUND:exports.ASSETSPATH.MENU+"background.png",OVERLAY:exports.ASSETSPATH.MENU+"overlay.png",PLAY_BUTTON:exports.ASSETSPATH.MENU+"playButton.png",STAR_PARTICLE:exports.ASSETSPATH.MENU+"particle.png"},FLY:{BACKGROUND:exports.ASSETSPATH.FLY+"ozadje-modr.png",HOLD_TEXT:exports.ASSETSPATH.FLY+"hold.png",GRADIENT:exports.ASSETSPATH.FLY+"gradient.png",WHITE_SQUARE:exports.ASSETSPATH.FLY+"white_square.jpg",START_GRASS:exports.ASSETSPATH.FLY+"grass_start.png",GRASS_1:exports.ASSETSPATH.FLY+"grass1.png",GRASS_2:exports.ASSETSPATH.FLY+"grass2.png",FOUNTAIN:exports.ASSETSPATH.FLY+"fountain.png",LIGHT:exports.ASSETSPATH.FLY+"light-2.png",MOON:exports.ASSETSPATH.FLY+"moon.png",SPIDER_1:exports.ASSETSPATH.FLY+"spider-1.png",SPIDER_2:exports.ASSETSPATH.FLY+"spider-2.png",SPIDER_3:exports.ASSETSPATH.FLY+"spider-3.png",SPIDER_LINE:exports.ASSETSPATH.FLY+"crta.png",TWIG:exports.ASSETSPATH.FLY+"twig.png",GHOST:exports.ASSETSPATH.FLY+"duhc.png",WIN_IMAGE:exports.ASSETSPATH.FLY+"win.png",WIN_GHOST:exports.ASSETSPATH.FLY+"win_ghost.png",END:exports.ASSETSPATH.ENDSCREEN+"fly.png"},ALAN:{BACKGROUND:exports.ASSETSPATH.ALAN+"background.png",CLOUDS:exports.ASSETSPATH.ALAN+"clouds.png",PLANT:exports.ASSETSPATH.ALAN+"plant.png",TABLE:exports.ASSETSPATH.ALAN+"table.png",WINDOWS:exports.ASSETSPATH.ALAN+"windows.png",ALAN:exports.ASSETSPATH.ALAN+"alan.png",ALAN_SADMOUTH:exports.ASSETSPATH.ALAN+"sad-mouth.png",ALAN_SADDERMOUTH:exports.ASSETSPATH.ALAN+"sadder-mouth.png",PAPER_1:exports.ASSETSPATH.ALAN+"paper1.png",PAPER_2:exports.ASSETSPATH.ALAN+"paper2.png",PAPER_3:exports.ASSETSPATH.ALAN+"paper3.png",PAPER_4:exports.ASSETSPATH.ALAN+"paper4.png",PAPER_5:exports.ASSETSPATH.ALAN+"paper5.png",PAPER_6:exports.ASSETSPATH.ALAN+"paper6.png",PAPER_7:exports.ASSETSPATH.ALAN+"paper7.png",LEAF:exports.ASSETSPATH.ALAN+"leaf.png",MUG:exports.ASSETSPATH.ALAN+"mug.png",NAPIS:exports.ASSETSPATH.ALAN+"napis.png",PEN:exports.ASSETSPATH.ALAN+"pen.png",PENCIL:exports.ASSETSPATH.ALAN+"pencil.png",RUBBER:exports.ASSETSPATH.ALAN+"rubber.png",END:exports.ASSETSPATH.ENDSCREEN+"alan.png"},PROTECT:{BACKGROUND:exports.ASSETSPATH.PROTECT+"bg.png",DRAG_TEXT:exports.ASSETSPATH.PROTECT+"drag.png",WIN_SCREEN:exports.ASSETSPATH.PROTECT+"protect.png",LADY:exports.ASSETSPATH.PROTECT+"lady.png",HAND_1:exports.ASSETSPATH.PROTECT+"h1.png",HAND_2:exports.ASSETSPATH.PROTECT+"h2.png",AXE:exports.ASSETSPATH.PROTECT+"axe.png",KNIFE:exports.ASSETSPATH.PROTECT+"hey-orange.png",NINJA:exports.ASSETSPATH.PROTECT+"nunja.png",POOP:exports.ASSETSPATH.PROTECT+"poop.png",PORCUPINE:exports.ASSETSPATH.PROTECT+"porcupine.png",YARN:exports.ASSETSPATH.PROTECT+"yarn.png",END:exports.ASSETSPATH.ENDSCREEN+"protect.png"},JUMPSCARE:{BACKGROUND:exports.ASSETSPATH.JUMPSCARE+"background.png",WALLPAPER:exports.ASSETSPATH.JUMPSCARE+"epic-poster.png",CHAIR:exports.ASSETSPATH.JUMPSCARE+"chair.png",TABLE:exports.ASSETSPATH.JUMPSCARE+"table.png",TV_PLAY:exports.ASSETSPATH.JUMPSCARE+"tvPlay.png",TV_SCARE:exports.ASSETSPATH.JUMPSCARE+"tvScare.png",CLICK_TEXT:exports.ASSETSPATH.JUMPSCARE+"click.png",FAST_TEXT:exports.ASSETSPATH.JUMPSCARE+"fast.png",JACK:exports.ASSETSPATH.JUMPSCARE+"jackaboy.png",NORMAL_EYES:exports.ASSETSPATH.JUMPSCARE+"jack-normal-eyes.png",SCARED_EYES:exports.ASSETSPATH.JUMPSCARE+"jack-shit-pantso.png",ARM_1:exports.ASSETSPATH.JUMPSCARE+"arm.png",ARM_2:exports.ASSETSPATH.JUMPSCARE+"arm-2.png",BAR:exports.ASSETSPATH.JUMPSCARE+"bar-brez-crtice.png",BAR_LINE:exports.ASSETSPATH.JUMPSCARE+"crtica-za-bar.png",BUTTON:exports.ASSETSPATH.JUMPSCARE+"button.png",BUTTON_PRESSED:exports.ASSETSPATH.JUMPSCARE+"button-presed.png",SCARE_SCREEN:exports.ASSETSPATH.JUMPSCARE+"jumpscare.png"},COMEDIAN:{BACKGROUND:exports.ASSETSPATH.COMEDIAN+"background.png",MIC:exports.ASSETSPATH.COMEDIAN+"mic.png",JOKE_1_QUESTION:exports.ASSETSPATH.COMEDIAN+"5-2.png",JOKE_1_ANSWER_1:exports.ASSETSPATH.COMEDIAN+"5-1.png",JOKE_1_ANSWER_2:exports.ASSETSPATH.COMEDIAN+"5-3.png",JOKE_1_ANSWER_3:exports.ASSETSPATH.COMEDIAN+"5-4.png",JOKE_2_QUESTION:exports.ASSETSPATH.COMEDIAN+"1-2.png",JOKE_2_ANSWER_1:exports.ASSETSPATH.COMEDIAN+"1-1.png",JOKE_2_ANSWER_2:exports.ASSETSPATH.COMEDIAN+"1-3.png",JOKE_2_ANSWER_3:exports.ASSETSPATH.COMEDIAN+"1-4.png",JOKE_3_QUESTION:exports.ASSETSPATH.COMEDIAN+"2-3.png",JOKE_3_ANSWER_1:exports.ASSETSPATH.COMEDIAN+"2-4.png",JOKE_3_ANSWER_2:exports.ASSETSPATH.COMEDIAN+"2-1.png",JOKE_3_ANSWER_3:exports.ASSETSPATH.COMEDIAN+"2-2.png",JOKE_4_QUESTION:exports.ASSETSPATH.COMEDIAN+"3-2.png",JOKE_4_ANSWER_1:exports.ASSETSPATH.COMEDIAN+"3-4.png",JOKE_4_ANSWER_2:exports.ASSETSPATH.COMEDIAN+"3-3.png",JOKE_4_ANSWER_3:exports.ASSETSPATH.COMEDIAN+"3-1.png",JOKE_5_QUESTION:exports.ASSETSPATH.COMEDIAN+"4-3.png",JOKE_5_ANSWER_1:exports.ASSETSPATH.COMEDIAN+"4-4.png",JOKE_5_ANSWER_2:exports.ASSETSPATH.COMEDIAN+"4-2.png",JOKE_5_ANSWER_3:exports.ASSETSPATH.COMEDIAN+"4-1.png",WIN_BACKGROUND:exports.ASSETSPATH.COMEDIAN+"win-anim/background.png",GHOST_1:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-1.png",GHOST_2:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-2.png",GHOST_3:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-3.png",GHOST_4:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-4.png",GHOST_5:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-5.png",GHOST_6:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-6.png",GHOST_7:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-7.png",GHOST_8:exports.ASSETSPATH.COMEDIAN+"win-anim/duhc-8.png",HANDS_1:exports.ASSETSPATH.COMEDIAN+"win-anim/hands.png",HANDS_2:exports.ASSETSPATH.COMEDIAN+"win-anim/hands2.png",LOSEIMAGE:exports.ASSETSPATH.ENDSCREEN+"comedian-1.png",END:exports.ASSETSPATH.ENDSCREEN+"comedian-2.png"},PARTY:{BACKGROUND_BACK:exports.ASSETSPATH.PARTY+"ozadje-zadi.png",BACKGROUND_FRONT:exports.ASSETSPATH.PARTY+"ozadje-spredi.png",GRAVE:exports.ASSETSPATH.PARTY+"grave.png",MARTINI:exports.ASSETSPATH.PARTY+"martini.png",BATS:exports.ASSETSPATH.PARTY+"netopirji.png",LUNA:exports.ASSETSPATH.PARTY+"ozdaje-moon.png",GHOST_1_BODY:exports.ASSETSPATH.PARTY+"ghost-1-body.png",GHOST_2_BODY:exports.ASSETSPATH.PARTY+"ghost-2-body.png",GHOST_3_BODY:exports.ASSETSPATH.PARTY+"ghost-3-body.png",GHOST_4_BODY:exports.ASSETSPATH.PARTY+"ghost-4-body.png",DOT_BLUE:exports.ASSETSPATH.PARTY+"blue-dot.png",DOT_GREEN:exports.ASSETSPATH.PARTY+"green-dot.png",DOT_PINK:exports.ASSETSPATH.PARTY+"pink-dot.png",END_BLUE:exports.ASSETSPATH.PARTY+"blue-something.png",END_GREEN:exports.ASSETSPATH.PARTY+"green-something.png",END_PINK:exports.ASSETSPATH.PARTY+"pink-something.png",LIGHT_BLUE:exports.ASSETSPATH.PARTY+"blue-light.png",LIGHT_GREEN:exports.ASSETSPATH.PARTY+"green-light.png",LIGHT_PINK:exports.ASSETSPATH.PARTY+"pink-light.png",LINE_BLUE:exports.ASSETSPATH.PARTY+"blue-line.png",LINE_GREEN:exports.ASSETSPATH.PARTY+"green-line.png",LINE_PINK:exports.ASSETSPATH.PARTY+"pink-line.png",WIN_SCREEN:exports.ASSETSPATH.PARTY+"party.png",END:exports.ASSETSPATH.ENDSCREEN+"party.png"},JSONPARTY:{MUSIC:exports.ASSETSPATH.PARTY+"music.json",FFT:exports.ASSETSPATH.PARTY+"fft.json"},DRESSUP:{BACKGROUND:exports.ASSETSPATH.DRESSUP+"ozadje.png",GHOST:exports.ASSETSPATH.DRESSUP+"ghost.png",FABULOUS_BUTTON:exports.ASSETSPATH.DRESSUP+"fabulousButton.png",BOY_1:exports.ASSETSPATH.DRESSUP+"boy-1.png",BOY_2:exports.ASSETSPATH.DRESSUP+"boy-2.png",BOY_3:exports.ASSETSPATH.DRESSUP+"boy-3.png",DPOOL_1:exports.ASSETSPATH.DRESSUP+"deadpool-1.png",DPOOL_2:exports.ASSETSPATH.DRESSUP+"deadpool-2.png",DPOOL_3:exports.ASSETSPATH.DRESSUP+"deadpool-3.png",DINO_1:exports.ASSETSPATH.DRESSUP+"dinosaur-1.png",DINO_2:exports.ASSETSPATH.DRESSUP+"dinosaur-2.png",DINO_3:exports.ASSETSPATH.DRESSUP+"dinosaur-3.png",WITCH_1:exports.ASSETSPATH.DRESSUP+"whitch-1.png",WITCH_2:exports.ASSETSPATH.DRESSUP+"witch-2.png",WITCH_3:exports.ASSETSPATH.DRESSUP+"witch-3.png",END:exports.ASSETSPATH.ENDSCREEN+"halloween-dress-up.png"},COLLECT:{BACKGROUND:exports.ASSETSPATH.COLLECT+"bg.png",CANDY_1:exports.ASSETSPATH.COLLECT+"candy1.png",CANDY_2:exports.ASSETSPATH.COLLECT+"candy2.png",CANDY_3:exports.ASSETSPATH.COLLECT+"candy3.png",CANDY_4:exports.ASSETSPATH.COLLECT+"candy4.png",CANDY_5:exports.ASSETSPATH.COLLECT+"candy5.png",PLAYER_0:exports.ASSETSPATH.COLLECT+"homan.png",PLAYER_1:exports.ASSETSPATH.COLLECT+"raaaaaawr.png",PLAYER_2:exports.ASSETSPATH.COLLECT+"dead-pooly.png",PLAYER_3:exports.ASSETSPATH.COLLECT+"its-a-witch.png",END:exports.ASSETSPATH.ENDSCREEN+"haloween-collect.png"},SORT:{BACKGROUND:exports.ASSETSPATH.SORT+"ozadje.png",SORT_TEXT:exports.ASSETSPATH.SORT+"sort.png",PUMPKIN_BACK:exports.ASSETSPATH.SORT+"pumpkin_1.png",PUMPKIN_FRONT:exports.ASSETSPATH.SORT+"pumpkin-ozadje.png",TRASH_BACK:exports.ASSETSPATH.SORT+"trash.png",TRASH_FRONT:exports.ASSETSPATH.SORT+"trash-front.png",GHOST:exports.ASSETSPATH.SORT+"ghost.png",CANDY_1:exports.ASSETSPATH.SORT+"bombombom-3.png",CANDY_2:exports.ASSETSPATH.SORT+"bonbon.png",CANDY_3:exports.ASSETSPATH.SORT+"chocoloto.png",CANDY_4:exports.ASSETSPATH.SORT+"loleh.png",CANDY_5:exports.ASSETSPATH.SORT+"nom.png",BROCCOLI:exports.ASSETSPATH.SORT+"brocololo.png",MEAT:exports.ASSETSPATH.SORT+"meat.png",RAZOR:exports.ASSETSPATH.SORT+"razor.png",TOOTHBRUSH:exports.ASSETSPATH.SORT+"tootho.png",WIN_BACKGROUND:exports.ASSETSPATH.SORT+"endbg.png",WIN_GHOST:exports.ASSETSPATH.SORT+"sort-ghost.png",END:exports.ASSETSPATH.ENDSCREEN+"sortCandy.png"},GHOSTBUSTERS:{BACKGROUND:exports.ASSETSPATH.GHOSTBUSTERS+"ozadje.png",START_GRADIENT:exports.ASSETSPATH.GHOSTBUSTERS+"gradient.png",LEVEL:exports.ASSETSPATH.GHOSTBUSTERS+"polje.png",CANNON:exports.ASSETSPATH.GHOSTBUSTERS+"shooter.png",BALL:exports.ASSETSPATH.GHOSTBUSTERS+"krogla.png",LASER:exports.ASSETSPATH.GHOSTBUSTERS+"laser.png",SPINNER:exports.ASSETSPATH.GHOSTBUSTERS+"swirly.png",END:exports.ASSETSPATH.ENDSCREEN+"ghostbusters.png"},HEAVENHELL:{HEAVEN_BACKGROUND:exports.ASSETSPATH.HEAVENHELL+"heaven-ozadje.png",HELL_BACKGROUND:exports.ASSETSPATH.HEAVENHELL+"hell-ozadje.png",START_CLOUD:exports.ASSETSPATH.HEAVENHELL+"startCloud.png",START_GHOST:exports.ASSETSPATH.HEAVENHELL+"ghostie.png",GHOST_SIDE:exports.ASSETSPATH.HEAVENHELL+"ghost-side.png",SIGN_HEAVEN:exports.ASSETSPATH.HEAVENHELL+"heaven_sign.png",SIGN_HELL:exports.ASSETSPATH.HEAVENHELL+"hell-sign.png",EVIL_DUCK:exports.ASSETSPATH.HEAVENHELL+"duck-devil.png",NORMAL_DUCK:exports.ASSETSPATH.HEAVENHELL+"suck-a-duck.png",SWING:exports.ASSETSPATH.HEAVENHELL+"bar.png",CLICKER:exports.ASSETSPATH.HEAVENHELL+"clicker.png",ROAD:exports.ASSETSPATH.HEAVENHELL+"road.png",ROAD_FIRE:exports.ASSETSPATH.HEAVENHELL+"road-of-fire.png",STAIRS_START:exports.ASSETSPATH.HEAVENHELL+"staircaseStart.png",STAIRS_MID:exports.ASSETSPATH.HEAVENHELL+"stairs.png",STAIRS_END:exports.ASSETSPATH.HEAVENHELL+"stairsEnd.png",CLOUD_1:exports.ASSETSPATH.HEAVENHELL+"oblak1.png",CLOUD_2:exports.ASSETSPATH.HEAVENHELL+"oblak2.png",CLOUD_3:exports.ASSETSPATH.HEAVENHELL+"oblak3.png",CLOUD_4:exports.ASSETSPATH.HEAVENHELL+"oblak4.png",CLOUD_5:exports.ASSETSPATH.HEAVENHELL+"oblak5.png",CLOUD_7:exports.ASSETSPATH.HEAVENHELL+"oblak7.png",END:exports.ASSETSPATH.ENDSCREEN+"hell.png"},CREDITS:{HELL:exports.ASSETSPATH.ENDSCREEN+"credits-hell.png",HEAVEN:exports.ASSETSPATH.ENDSCREEN+"credits-heaven.png"}};
},{}],"x3NR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONFIG"),o=function(){function o(){}return o.Debug=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.Log(e)},o.Log=function(o,n){void 0===n&&(n=e.BuildLevel.Dev),e.Config.BuildLevel>n||console.log.apply(console,o)},o}();exports.OMGLogger=o;
},{"../CONFIG":"Ex3v"}],"ublV":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],n=n||function(e,n){var t={},i=t.lib={},r=function(){},s=i.Base={extend:function(e){r.prototype=this;var n=new r;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var n=this.words,t=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)n[i+r>>>2]|=(t[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<t.length)for(r=0;r<e;r+=4)n[i+r>>>2]=t[r>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],i=0;i<n;i+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),a=t.enc={},d=a.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++){var r=n[i>>>2]>>>24-i%4*8&255;t.push((r>>>4).toString(16)),t.push((15&r).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i+=2)t[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(t,n/2)}},u=a.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++)t.push(String.fromCharCode(n[i>>>2]>>>24-i%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i++)t[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(t,n)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(n){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},c=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,i=t.words,r=t.sigBytes,s=this.blockSize,a=r/(4*s);if(n=(a=n?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,r=e.min(4*n,r),n){for(var d=0;d<n;d+=s)this._doProcessBlock(i,d);d=i.splice(0,n),t.sigBytes-=r}return new o.init(d,r)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new v.HMAC.init(e,t).finalize(n)}}});var v=t.algo={};return t}(Math);!function(e){for(var t=n,i=(s=t.lib).WordArray,r=s.Hasher,s=t.algo,o=[],a=[],d=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{c=u;for(var v=e.sqrt(c),g=2;g<=v;g++)if(!(c%g)){c=!1;break e}c=!0}c&&(8>l&&(o[l]=d(e.pow(u,.5))),a[l]=d(e.pow(u,1/3)),l++),u++}var f=[];s=s.SHA256=r.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,i=t[0],r=t[1],s=t[2],o=t[3],d=t[4],u=t[5],l=t[6],c=t[7],v=0;64>v;v++){if(16>v)f[v]=0|e[n+v];else{var g=f[v-15],m=f[v-2];f[v]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+f[v-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+f[v-16]}g=c+((d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25))+(d&u^~d&l)+a[v]+f[v],m=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&s^r&s),c=l,l=u,u=d,d=o+g|0,o=s,s=r,r=i,i=g+m|0}t[0]=t[0]+i|0,t[1]=t[1]+r|0,t[2]=t[2]+s|0,t[3]=t[3]+o|0,t[4]=t[4]+d|0,t[5]=t[5]+u|0,t[6]=t[6]+l|0,t[7]=t[7]+c|0},_doFinalize:function(){var n=this._data,t=n.words,i=8*this._nDataBytes,r=8*n.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=e.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(s),t.HmacSHA256=r._createHmacHelper(s)}(Math),function(){var e=n,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var i=e.blockSize,r=4*i;n.sigBytes>r&&(n=e.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,d=o.words,u=0;u<i;u++)a[u]^=1549556828,d[u]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<t;r+=3)for(var s=(n[r>>>2]>>>24-r%4*8&255)<<16|(n[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|n[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;4>o&&r+.75*o<t;o++)e.push(i.charAt(s>>>6*(3-o)&63));if(n=i.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var n=e.length,i=this._map;(r=i.charAt(64))&&(-1!=(r=e.indexOf(r))&&(n=r));for(var r=[],s=0,o=0;o<n;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,d=i.indexOf(e.charAt(o))>>>6-o%4*2;r[s>>>2]|=(a|d)<<24-s%4*8,s++}return t.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"}(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(e.EGAAdAction||(e.EGAAdAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(e.EGAAdError||(e.EGAAdError={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(e.EGAAdType||(e.EGAAdType={})),function(e){!function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok",e[e.Created=10]="Created"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={})),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.EventValidation=1]="EventValidation",e[e.Database=2]="Database",e[e.Init=3]="Init",e[e.Http=4]="Http",e[e.Json=5]="Json"}(e.EGASdkErrorCategory||(e.EGASdkErrorCategory={})),function(e){e[e.Undefined=0]="Undefined",e[e.BusinessEvent=1]="BusinessEvent",e[e.ResourceEvent=2]="ResourceEvent",e[e.ProgressionEvent=3]="ProgressionEvent",e[e.DesignEvent=4]="DesignEvent",e[e.ErrorEvent=5]="ErrorEvent",e[e.InitHttp=9]="InitHttp",e[e.EventsHttp=10]="EventsHttp",e[e.ProcessEvents=11]="ProcessEvents",e[e.AddEventsToStore=12]="AddEventsToStore",e[e.AdEvent=20]="AdEvent"}(e.EGASdkErrorArea||(e.EGASdkErrorArea={})),function(e){e[e.Undefined=0]="Undefined",e[e.InvalidCurrency=1]="InvalidCurrency",e[e.InvalidShortString=2]="InvalidShortString",e[e.InvalidEventPartLength=3]="InvalidEventPartLength",e[e.InvalidEventPartCharacters=4]="InvalidEventPartCharacters",e[e.InvalidStore=5]="InvalidStore",e[e.InvalidFlowType=6]="InvalidFlowType",e[e.StringEmptyOrNull=7]="StringEmptyOrNull",e[e.NotFoundInAvailableCurrencies=8]="NotFoundInAvailableCurrencies",e[e.InvalidAmount=9]="InvalidAmount",e[e.NotFoundInAvailableItemTypes=10]="NotFoundInAvailableItemTypes",e[e.WrongProgressionOrder=11]="WrongProgressionOrder",e[e.InvalidEventIdLength=12]="InvalidEventIdLength",e[e.InvalidEventIdCharacters=13]="InvalidEventIdCharacters",e[e.InvalidProgressionStatus=15]="InvalidProgressionStatus",e[e.InvalidSeverity=16]="InvalidSeverity",e[e.InvalidLongString=17]="InvalidLongString",e[e.DatabaseTooLarge=18]="DatabaseTooLarge",e[e.DatabaseOpenOrCreate=19]="DatabaseOpenOrCreate",e[e.JsonError=25]="JsonError",e[e.FailHttpJsonDecode=29]="FailHttpJsonDecode",e[e.FailHttpJsonEncode=30]="FailHttpJsonEncode",e[e.InvalidAdAction=31]="InvalidAdAction",e[e.InvalidAdType=32]="InvalidAdType",e[e.InvalidString=33]="InvalidString"}(e.EGASdkErrorAction||(e.EGASdkErrorAction={})),function(e){e[e.Undefined=0]="Undefined",e[e.Currency=1]="Currency",e[e.CartType=2]="CartType",e[e.ItemType=3]="ItemType",e[e.ItemId=4]="ItemId",e[e.Store=5]="Store",e[e.FlowType=6]="FlowType",e[e.Amount=7]="Amount",e[e.Progression01=8]="Progression01",e[e.Progression02=9]="Progression02",e[e.Progression03=10]="Progression03",e[e.EventId=11]="EventId",e[e.ProgressionStatus=12]="ProgressionStatus",e[e.Severity=13]="Severity",e[e.Message=14]="Message",e[e.AdAction=15]="AdAction",e[e.AdType=16]="AdType",e[e.AdSdkName=17]="AdSdkName",e[e.AdPlacement=18]="AdPlacement"}(e.EGASdkErrorParameter||(e.EGASdkErrorParameter={}))}(e.events||(e.events={}))}(t||(t={}));var t,i=t.EGAErrorSeverity,r=t.EGAProgressionStatus,s=t.EGAResourceFlowType;!function(e){!function(e){var n;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(n||(n={}));var t=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(n){e.instance.infoLogEnabled=n},e.setVerboseLog=function(n){e.instance.infoLogVerboseEnabled=n},e.i=function(t){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.w=function(t){var i="Warning/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Warning)},e.e=function(t){var i="Error/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Error)},e.ii=function(t){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.d=function(t){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Debug)}},e.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:console.error(e);break;case n.Warning:console.warn(e);break;case n.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case n.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=t}(e.logging||(e.logging={}))}(t||(t={})),function(e){!function(t){var i=e.logging.GALogger,r=function(){function e(){}return e.getHmac=function(e,t){var i=n.HmacSHA256(t,e);return n.enc.Base64.stringify(i)},e.stringMatch=function(e,n){return!(!e||!n)&&n.test(e)},e.joinStringArray=function(e,n){for(var t="",i=0,r=e.length;i<r;i++)i>0&&(t+=n),t+=e[i];return t},e.stringArrayContainsString=function(e,n){if(0===e.length)return!1;for(var t in e)if(e[t]===n)return!0;return!1},e.encode64=function(n){n=encodeURI(n);var t,i,r,s,o,a="",d=0,u=0,l=0;do{r=(t=n.charCodeAt(l++))>>2,s=(3&t)<<4|(i=n.charCodeAt(l++))>>4,o=(15&i)<<2|(d=n.charCodeAt(l++))>>6,u=63&d,isNaN(i)?o=u=64:isNaN(d)&&(u=64),a=a+e.keyStr.charAt(r)+e.keyStr.charAt(s)+e.keyStr.charAt(o)+e.keyStr.charAt(u),t=i=d=0,r=s=o=u=0}while(l<n.length);return a},e.decode64=function(n){var t,r,s,o,a="",d=0,u=0,l=0;/[^A-Za-z0-9\+\/\=]/g.exec(n)&&i.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=e.keyStr.indexOf(n.charAt(l++))<<2|(s=e.keyStr.indexOf(n.charAt(l++)))>>4,r=(15&s)<<4|(o=e.keyStr.indexOf(n.charAt(l++)))>>2,d=(3&o)<<6|(u=e.keyStr.indexOf(n.charAt(l++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(r)),64!=u&&(a+=String.fromCharCode(d)),t=r=d=0,s=o=u=0}while(l<n.length);return decodeURI(a)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();t.GAUtilities=r}(e.utilities||(e.utilities={}))}(t||(t={})),function(e){!function(n){var t=e.logging.GALogger,i=e.utilities.GAUtilities,r=e.events.EGASdkErrorCategory,s=e.events.EGASdkErrorArea,o=e.events.EGASdkErrorAction,a=e.events.EGASdkErrorParameter,d=function(){return function(e,n,t,i,r){this.category=e,this.area=n,this.action=t,this.parameter=i,this.reason=r}}();n.ValidationResult=d;var u=function(){function n(){}return n.validateBusinessEvent=function(e,i,u,l,c){return n.validateCurrency(e)?i<0?(t.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),new d(r.EventValidation,s.BusinessEvent,o.InvalidAmount,a.Amount,i+"")):n.validateShortString(u,!0)?n.validateEventPartLength(l,!1)?n.validateEventPartCharacters(l)?n.validateEventPartLength(c,!1)?n.validateEventPartCharacters(c)?null:(t.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+c),new d(r.EventValidation,s.BusinessEvent,o.InvalidEventPartCharacters,a.ItemId,c)):(t.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+c),new d(r.EventValidation,s.BusinessEvent,o.InvalidEventPartLength,a.ItemId,c)):(t.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new d(r.EventValidation,s.BusinessEvent,o.InvalidEventPartCharacters,a.ItemType,l)):(t.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+l),new d(r.EventValidation,s.BusinessEvent,o.InvalidEventPartLength,a.ItemType,l)):(t.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+u),new d(r.EventValidation,s.BusinessEvent,o.InvalidShortString,a.CartType,u)):(t.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),new d(r.EventValidation,s.BusinessEvent,o.InvalidCurrency,a.Currency,e))},n.validateResourceEvent=function(u,l,c,v,g,f,m){return u==e.EGAResourceFlowType.Undefined?(t.w("Validation fail - resource event - flowType: Invalid flow type."),new d(r.EventValidation,s.ResourceEvent,o.InvalidFlowType,a.FlowType,"")):l?i.stringArrayContainsString(f,l)?c>0?v?n.validateEventPartLength(v,!1)?n.validateEventPartCharacters(v)?i.stringArrayContainsString(m,v)?n.validateEventPartLength(g,!1)?n.validateEventPartCharacters(g)?null:(t.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+g),new d(r.EventValidation,s.ResourceEvent,o.InvalidEventPartCharacters,a.ItemId,g)):(t.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+g),new d(r.EventValidation,s.ResourceEvent,o.InvalidEventPartLength,a.ItemId,g)):(t.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+v),new d(r.EventValidation,s.ResourceEvent,o.NotFoundInAvailableItemTypes,a.ItemType,v)):(t.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+v),new d(r.EventValidation,s.ResourceEvent,o.InvalidEventPartCharacters,a.ItemType,v)):(t.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+v),new d(r.EventValidation,s.ResourceEvent,o.InvalidEventPartLength,a.ItemType,v)):(t.w("Validation fail - resource event - itemType: Cannot be (null)"),new d(r.EventValidation,s.ResourceEvent,o.StringEmptyOrNull,a.ItemType,"")):(t.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+c),new d(r.EventValidation,s.ResourceEvent,o.InvalidAmount,a.Amount,c+"")):(t.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+l),new d(r.EventValidation,s.ResourceEvent,o.NotFoundInAvailableCurrencies,a.Currency,l)):(t.w("Validation fail - resource event - currency: Cannot be (null)"),new d(r.EventValidation,s.ResourceEvent,o.StringEmptyOrNull,a.Currency,""))},n.validateProgressionEvent=function(i,u,l,c){if(i==e.EGAProgressionStatus.Undefined)return t.w("Validation fail - progression event: Invalid progression status."),new d(r.EventValidation,s.ProgressionEvent,o.InvalidProgressionStatus,a.ProgressionStatus,"");if(c&&!l&&u)return t.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),new d(r.EventValidation,s.ProgressionEvent,o.WrongProgressionOrder,a.Undefined,u+":"+l+":"+c);if(l&&!u)return t.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),new d(r.EventValidation,s.ProgressionEvent,o.WrongProgressionOrder,a.Undefined,u+":"+l+":"+c);if(!u)return t.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),new d(r.EventValidation,s.ProgressionEvent,o.WrongProgressionOrder,a.Undefined,(u||"")+":"+(l||"")+":"+(c||""));if(!n.validateEventPartLength(u,!1))return t.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+u),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartLength,a.Progression01,u);if(!n.validateEventPartCharacters(u))return t.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartCharacters,a.Progression01,u);if(l){if(!n.validateEventPartLength(l,!0))return t.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+l),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartLength,a.Progression02,l);if(!n.validateEventPartCharacters(l))return t.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+l),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartCharacters,a.Progression02,l)}if(c){if(!n.validateEventPartLength(c,!0))return t.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+c),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartLength,a.Progression03,c);if(!n.validateEventPartCharacters(c))return t.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+c),new d(r.EventValidation,s.ProgressionEvent,o.InvalidEventPartCharacters,a.Progression03,c)}return null},n.validateDesignEvent=function(e){return n.validateEventIdLength(e)?n.validateEventIdCharacters(e)?null:(t.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),new d(r.EventValidation,s.DesignEvent,o.InvalidEventIdCharacters,a.EventId,e)):(t.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 64 characters or less. String: "+e),new d(r.EventValidation,s.DesignEvent,o.InvalidEventIdLength,a.EventId,e))},n.validateErrorEvent=function(i,u){return i==e.EGAErrorSeverity.Undefined?(t.w("Validation fail - error event - severity: Severity was unsupported value."),new d(r.EventValidation,s.ErrorEvent,o.InvalidSeverity,a.Severity,"")):n.validateLongString(u,!0)?null:(t.w("Validation fail - error event - message: Message cannot be above 8192 characters."),new d(r.EventValidation,s.ErrorEvent,o.InvalidLongString,a.Message,u))},n.validateAdEvent=function(i,u,l,c){return i==e.EGAAdAction.Undefined?(t.w("Validation fail - error event - severity: Severity was unsupported value."),new d(r.EventValidation,s.AdEvent,o.InvalidAdAction,a.AdAction,"")):u==e.EGAAdType.Undefined?(t.w("Validation fail - ad event - adType: Ad type was unsupported value."),new d(r.EventValidation,s.AdEvent,o.InvalidAdType,a.AdType,"")):n.validateShortString(l,!1)?n.validateString(c,!1)?null:(t.w("Validation fail - ad event - message: Ad placement cannot be above 64 characters."),new d(r.EventValidation,s.AdEvent,o.InvalidString,a.AdPlacement,c)):(t.w("Validation fail - ad event - message: Ad SDK name cannot be above 32 characters."),new d(r.EventValidation,s.AdEvent,o.InvalidShortString,a.AdSdkName,l))},n.validateSdkErrorEvent=function(e,i,a,d,u){return!!n.validateKeys(e,i)&&(a===r.Undefined?(t.w("Validation fail - sdk error event - type: Category was unsupported value."),!1):d===s.Undefined?(t.w("Validation fail - sdk error event - type: Area was unsupported value."),!1):u!==o.Undefined||(t.w("Validation fail - sdk error event - type: Action was unsupported value."),!1))},n.validateKeys=function(e,n){return!(!i.stringMatch(e,/^[A-z0-9]{32}$/)||!i.stringMatch(n,/^[A-z0-9]{40}$/))},n.validateCurrency=function(e){return!!e&&!!i.stringMatch(e,/^[A-Z]{3}$/)},n.validateEventPartLength=function(e,n){return!(!n||e)||!!e&&!(e.length>64)},n.validateEventPartCharacters=function(e){return!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},n.validateEventIdLength=function(e){return!!e&&!!i.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},n.validateEventIdCharacters=function(e){return!!e&&!!i.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},n.validateAndCleanInitRequestResponse=function(e,n){if(null==e)return t.w("validateInitRequestResponse failed - no response dictionary."),null;var i={};try{var r=e.server_ts;if(!(r>0))return t.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;i.server_ts=r}catch(u){return t.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+u),null}if(n){try{var s=e.configs;i.configs=s}catch(u){return t.w("validateInitRequestResponse failed - invalid type in 'configs' field. type="+typeof e.configs+", value="+e.configs+", "+u),null}try{var o=e.configs_hash;i.configs_hash=o}catch(u){return t.w("validateInitRequestResponse failed - invalid type in 'configs_hash' field. type="+typeof e.configs_hash+", value="+e.configs_hash+", "+u),null}try{var a=e.ab_id;i.ab_id=a}catch(u){return t.w("validateInitRequestResponse failed - invalid type in 'ab_id' field. type="+typeof e.ab_id+", value="+e.ab_id+", "+u),null}try{var d=e.ab_variant_id;i.ab_variant_id=d}catch(u){return t.w("validateInitRequestResponse failed - invalid type in 'ab_variant_id' field. type="+typeof e.ab_variant_id+", value="+e.ab_variant_id+", "+u),null}}return i},n.validateBuild=function(e){return!!n.validateShortString(e,!1)},n.validateSdkWrapperVersion=function(e){return!!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot|flutter) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},n.validateEngineVersion=function(e){return!(!e||!i.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold|godot) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},n.validateUserId=function(e){return!!n.validateString(e,!1)||(t.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},n.validateShortString=function(e,n){return!(!n||e)||!(!e||e.length>32)},n.validateString=function(e,n){return!(!n||e)||!(!e||e.length>64)},n.validateLongString=function(e,n){return!(!n||e)||!(!e||e.length>8192)},n.validateConnectionType=function(e){return i.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},n.validateCustomDimensions=function(e){return n.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},n.validateResourceCurrencies=function(e){if(!n.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var r=0;r<e.length;++r)if(!i.stringMatch(e[r],/^[A-Za-z]+$/))return t.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[r]),!1;return!0},n.validateResourceItemTypes=function(e){if(!n.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!n.validateEventPartCharacters(e[i]))return t.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},n.validateDimension01=function(e,n){return!e||!!i.stringArrayContainsString(n,e)},n.validateDimension02=function(e,n){return!e||!!i.stringArrayContainsString(n,e)},n.validateDimension03=function(e,n){return!e||!!i.stringArrayContainsString(n,e)},n.validateArrayOfStrings=function(e,n,i,r,s){var o=r;if(o||(o="Array"),!s)return t.w(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==s.length)return t.w(o+" validation failed: array cannot be empty. "),!1;if(e>0&&s.length>e)return t.w(o+" validation failed: array cannot exceed "+e+" values. It has "+s.length+" values."),!1;for(var a=0;a<s.length;++a){var d=s[a]?s[a].length:0;if(0===d)return t.w(o+" validation failed: contained an empty string. Array="+JSON.stringify(s)),!1;if(n>0&&d>n)return t.w(o+" validation failed: a string exceeded max allowed length (which is: "+n+"). String was: "+s[a]),!1}return!0},n.validateClientTs=function(e){return!(e<0||e>99999999999)},n}();n.GAValidator=u}(e.validators||(e.validators={}))}(t||(t={})),function(e){!function(e){var n=function(){return function(e,n,t){this.name=e,this.value=n,this.version=t}}();e.NameValueVersion=n;var t=function(){return function(e,n){this.name=e,this.version=n}}();e.NameVersion=t;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var n,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((n=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(n=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return n.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var r=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(n=t.match(/version\/(\d+)/i))&&r.splice(1,1,n[1]),r.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,n){var i,r,s,o,a=new t("unknown","0.0.0"),d=0,u=0;for(d=0;d<n.length;d+=1)if(new RegExp(n[d].value,"i").test(e)){if(i=new RegExp(n[d].version+"[- /:;]([\\d._]+)","i"),o="",(r=e.match(i))&&r[1]&&(s=r[1]),s){var l=s.split(/[._]+/);for(u=0;u<Math.min(l.length,3);u+=1)o+=l[u]+(u<Math.min(l.length,3)-1?".":"")}else o="0.0.0";return a.name=n[d].name,a.version=o,a}return a},e.sdkWrapperVersion="javascript 4.4.2",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new n("windows_phone","Windows Phone","OS"),new n("windows","Win","NT"),new n("ios","iPhone","OS"),new n("ios","iPad","OS"),new n("ios","iPod","OS"),new n("android","Android","Android"),new n("blackBerry","BlackBerry","/"),new n("mac_osx","Mac","OS X"),new n("tizen","Tizen","Tizen"),new n("linux","Linux","rv"),new n("kai_os","KAIOS","KAIOS")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e}();e.GADevice=i}(e.device||(e.device={}))}(t||(t={})),function(e){!function(e){var n=function(){function e(n){this.deadline=n,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=n}(e.threading||(e.threading={}))}(t||(t={})),function(e){!function(e){var n=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,n){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(n)},e.prototype.addQueueOfPriority=function(e){var n=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return n.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],n=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),n},e}();e.PriorityQueue=n}(e.threading||(e.threading={}))}(t||(t={})),function(e){!function(n){var t,i,r=e.logging.GALogger;!function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"}(t=n.EGAStoreArgsOperator||(n.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(i=n.EGAStore||(n.EGAStore={}));var s=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(n){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(n,i,r,s){void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===s&&(s=0);var o=e.getStore(n);if(!o)return null;for(var a=[],d=0;d<o.length;++d){for(var u=o[d],l=!0,c=0;c<i.length;++c){var v=i[c];if(u[v[0]])switch(v[1]){case t.Equal:l=u[v[0]]==v[2];break;case t.LessOrEqual:l=u[v[0]]<=v[2];break;case t.NotEqual:l=u[v[0]]!=v[2];break;default:l=!1}else l=!1;if(!l)break}l&&a.push(u)}return r&&a.sort(function(e,n){return e.client_ts-n.client_ts}),s>0&&a.length>s&&(a=a.slice(0,s+1)),a},e.update=function(n,i,r){void 0===r&&(r=[]);var s=e.getStore(n);if(!s)return!1;for(var o=0;o<s.length;++o){for(var a=s[o],d=!0,u=0;u<r.length;++u){var l=r[u];if(a[l[0]])switch(l[1]){case t.Equal:d=a[l[0]]==l[2];break;case t.LessOrEqual:d=a[l[0]]<=l[2];break;case t.NotEqual:d=a[l[0]]!=l[2];break;default:d=!1}else d=!1;if(!d)break}if(d)for(u=0;u<i.length;++u){var c=i[u];a[c[0]]=c[1]}}return!0},e.delete=function(n,i){var r=e.getStore(n);if(r)for(var s=0;s<r.length;++s){for(var o=r[s],a=!0,d=0;d<i.length;++d){var u=i[d];if(o[u[0]])switch(u[1]){case t.Equal:a=o[u[0]]==u[2];break;case t.LessOrEqual:a=o[u[0]]<=u[2];break;case t.NotEqual:a=o[u[0]]!=u[2];break;default:a=!1}else a=!1;if(!a)break}a&&(r.splice(s,1),--s)}},e.insert=function(n,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var s=e.getStore(n);if(s)if(i){if(!r)return;for(var o=!1,a=0;a<s.length;++a){var d=s[a];if(d[r]==t[r]){for(var u in t)d[u]=t[u];o=!0;break}}o||s.push(t)}else s.push(t)},e.save=function(n){e.isStorageAvailable()?(localStorage.setItem(e.StringFormat(e.KeyFormat,n,e.EventsStoreKey),JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,n,e.SessionsStoreKey),JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,n,e.ProgressionStoreKey),JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.StringFormat(e.KeyFormat,n,e.ItemsStoreKey),JSON.stringify(e.instance.storeItems))):r.w("Storage is not available, cannot save.")},e.load=function(n){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,n,e.EventsStoreKey))),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(t){r.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,n,e.SessionsStoreKey))),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(t){r.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,n,e.ProgressionStoreKey))),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(t){r.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.StringFormat(e.KeyFormat,n,e.ItemsStoreKey))),e.instance.storeItems||(e.instance.storeItems={})}catch(t){r.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else r.w("Storage is not available, cannot load.")},e.setItem=function(n,t,i){var r=e.StringFormat(e.KeyFormat,n,t);i?e.instance.storeItems[r]=i:r in e.instance.storeItems&&delete e.instance.storeItems[r]},e.getItem=function(n,t){var i=e.StringFormat(e.KeyFormat,n,t);return i in e.instance.storeItems?e.instance.storeItems[i]:null},e.getStore=function(n){switch(n){case i.Events:return e.instance.eventsStore;case i.Sessions:return e.instance.sessionsStore;case i.Progression:return e.instance.progressionStore;default:return r.w("GAStore.getStore(): Cannot find store: "+n),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.StringFormat=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e.replace(/{(\d+)}/g,function(e,t){return n[t]||""})},e.KeyFormat="GA::{0}::{1}",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();n.GAStore=s}(e.store||(e.store={}))}(t||(t={})),function(e){!function(n){var t=e.validators.GAValidator,i=e.utilities.GAUtilities,r=e.logging.GALogger,s=e.store.GAStore,o=e.device.GADevice,a=e.store.EGAStore,d=e.store.EGAStoreArgsOperator,u=function(){function e(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.currentGlobalCustomEventFields={},this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.remoteConfigsListeners=[],this.beforeUnloadListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0,this.isUnloading=!1}return e.setUserId=function(n){e.instance.userId=n,e.cacheIdentifier()},e.getIdentifier=function(){return e.instance.identifier},e.isInitialized=function(){return e.instance.initialized},e.setInitialized=function(n){e.instance.initialized=n},e.getSessionStart=function(){return e.instance.sessionStart},e.getSessionNum=function(){return e.instance.sessionNum},e.getTransactionNum=function(){return e.instance.transactionNum},e.getSessionId=function(){return e.instance.sessionId},e.getCurrentCustomDimension01=function(){return e.instance.currentCustomDimension01},e.getCurrentCustomDimension02=function(){return e.instance.currentCustomDimension02},e.getCurrentCustomDimension03=function(){return e.instance.currentCustomDimension03},e.getGameKey=function(){return e.instance.gameKey},e.getGameSecret=function(){return e.instance.gameSecret},e.getAvailableCustomDimensions01=function(){return e.instance.availableCustomDimensions01},e.setAvailableCustomDimensions01=function(n){t.validateCustomDimensions(n)&&(e.instance.availableCustomDimensions01=n,e.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+i.joinStringArray(n,", ")+")"))},e.getAvailableCustomDimensions02=function(){return e.instance.availableCustomDimensions02},e.setAvailableCustomDimensions02=function(n){t.validateCustomDimensions(n)&&(e.instance.availableCustomDimensions02=n,e.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+i.joinStringArray(n,", ")+")"))},e.getAvailableCustomDimensions03=function(){return e.instance.availableCustomDimensions03},e.setAvailableCustomDimensions03=function(n){t.validateCustomDimensions(n)&&(e.instance.availableCustomDimensions03=n,e.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+i.joinStringArray(n,", ")+")"))},e.getAvailableResourceCurrencies=function(){return e.instance.availableResourceCurrencies},e.setAvailableResourceCurrencies=function(n){t.validateResourceCurrencies(n)&&(e.instance.availableResourceCurrencies=n,r.i("Set available resource currencies: ("+i.joinStringArray(n,", ")+")"))},e.getAvailableResourceItemTypes=function(){return e.instance.availableResourceItemTypes},e.setAvailableResourceItemTypes=function(n){t.validateResourceItemTypes(n)&&(e.instance.availableResourceItemTypes=n,r.i("Set available resource item types: ("+i.joinStringArray(n,", ")+")"))},e.getBuild=function(){return e.instance.build},e.setBuild=function(n){e.instance.build=n,r.i("Set build version: "+n)},e.getUseManualSessionHandling=function(){return e.instance.useManualSessionHandling},e.isEventSubmissionEnabled=function(){return e.instance._isEventSubmissionEnabled},e.getABTestingId=function(){return e.instance.abId},e.getABTestingVariantId=function(){return e.instance.abVariantId},e.prototype.setDefaultId=function(n){this.defaultUserId=n||"",e.cacheIdentifier()},e.getDefaultId=function(){return e.instance.defaultUserId},e.getSdkConfig=function(){var n=0;for(var t in e.instance.sdkConfig)0===n&&(i=t),++n;if(i&&n>0)return e.instance.sdkConfig;var i;n=0;for(var t in e.instance.sdkConfigCached)0===n&&(i=t),++n;return i&&n>0?e.instance.sdkConfigCached:e.instance.sdkConfigDefault},e.isEnabled=function(){return!!e.instance.initAuthorized},e.setCustomDimension01=function(n){e.instance.currentCustomDimension01=n,s.setItem(e.getGameKey(),e.Dimension01Key,n),r.i("Set custom01 dimension value: "+n)},e.setCustomDimension02=function(n){e.instance.currentCustomDimension02=n,s.setItem(e.getGameKey(),e.Dimension02Key,n),r.i("Set custom02 dimension value: "+n)},e.setCustomDimension03=function(n){e.instance.currentCustomDimension03=n,s.setItem(e.getGameKey(),e.Dimension03Key,n),r.i("Set custom03 dimension value: "+n)},e.incrementSessionNum=function(){var n=e.getSessionNum()+1;e.instance.sessionNum=n},e.incrementTransactionNum=function(){var n=e.getTransactionNum()+1;e.instance.transactionNum=n},e.incrementProgressionTries=function(n){var t=e.getProgressionTries(n)+1;e.instance.progressionTries[n]=t;var i={};i.progression=n,i.tries=t,s.insert(a.Progression,i,!0,"progression")},e.getProgressionTries=function(n){return n in e.instance.progressionTries?e.instance.progressionTries[n]:0},e.clearProgressionTries=function(n){n in e.instance.progressionTries&&delete e.instance.progressionTries[n];var t=[];t.push(["progression",d.Equal,n]),s.delete(a.Progression,t)},e.setKeys=function(n,t){e.instance.gameKey=n,e.instance.gameSecret=t},e.setManualSessionHandling=function(n){e.instance.useManualSessionHandling=n,r.i("Use manual session handling: "+n)},e.setEnabledEventSubmission=function(n){e.instance._isEventSubmissionEnabled=n},e.getEventAnnotations=function(){var n={v:2};n.user_id=e.instance.identifier,n.client_ts=e.getClientTsAdjusted(),n.sdk_version=o.getRelevantSdkVersion(),n.os_version=o.osVersion,n.manufacturer=o.deviceManufacturer,n.device=o.deviceModel,n.browser_version=o.browserVersion,n.platform=o.buildPlatform,n.session_id=e.instance.sessionId,n[e.SessionNumKey]=e.instance.sessionNum;var i=o.getConnectionType();if(t.validateConnectionType(i)&&(n.connection_type=i),o.gameEngineVersion&&(n.engine_version=o.gameEngineVersion),e.instance.configurations){var r=0;for(var s in e.instance.configurations){r++;break}r>0&&(n.configurations=e.instance.configurations)}return e.instance.abId&&(n.ab_id=e.instance.abId),e.instance.abVariantId&&(n.ab_variant_id=e.instance.abVariantId),e.instance.build&&(n.build=e.instance.build),n},e.getSdkErrorEventAnnotations=function(){var n={v:2};n.category=e.CategorySdkError,n.sdk_version=o.getRelevantSdkVersion(),n.os_version=o.osVersion,n.manufacturer=o.deviceManufacturer,n.device=o.deviceModel,n.platform=o.buildPlatform;var i=o.getConnectionType();return t.validateConnectionType(i)&&(n.connection_type=i),o.gameEngineVersion&&(n.engine_version=o.gameEngineVersion),n},e.getInitAnnotations=function(){var n={};return e.getIdentifier()||e.cacheIdentifier(),s.setItem(e.getGameKey(),e.LastUsedIdentifierKey,e.getIdentifier()),n.user_id=e.getIdentifier(),n.sdk_version=o.getRelevantSdkVersion(),n.os_version=o.osVersion,n.platform=o.buildPlatform,e.getBuild()?n.build=e.getBuild():n.build=null,n.session_num=e.getSessionNum(),n.random_salt=e.getSessionNum(),n},e.getClientTsAdjusted=function(){var n=i.timeIntervalSince1970(),r=n+e.instance.clientServerTimeOffset;return t.validateClientTs(r)?r:n},e.sessionIsStarted=function(){return 0!=e.instance.sessionStart},e.cacheIdentifier=function(){e.instance.userId?e.instance.identifier=e.instance.userId:e.instance.defaultUserId&&(e.instance.identifier=e.instance.defaultUserId)},e.ensurePersistedStates=function(){s.isStorageAvailable()&&s.load(e.getGameKey());var n=e.instance;n.setDefaultId(null!=s.getItem(e.getGameKey(),e.DefaultUserIdKey)?s.getItem(e.getGameKey(),e.DefaultUserIdKey):i.createGuid()),n.sessionNum=null!=s.getItem(e.getGameKey(),e.SessionNumKey)?Number(s.getItem(e.getGameKey(),e.SessionNumKey)):0,n.transactionNum=null!=s.getItem(e.getGameKey(),e.TransactionNumKey)?Number(s.getItem(e.getGameKey(),e.TransactionNumKey)):0,n.currentCustomDimension01?s.setItem(e.getGameKey(),e.Dimension01Key,n.currentCustomDimension01):(n.currentCustomDimension01=null!=s.getItem(e.getGameKey(),e.Dimension01Key)?s.getItem(e.getGameKey(),e.Dimension01Key):"",n.currentCustomDimension01),n.currentCustomDimension02?s.setItem(e.getGameKey(),e.Dimension02Key,n.currentCustomDimension02):(n.currentCustomDimension02=null!=s.getItem(e.getGameKey(),e.Dimension02Key)?s.getItem(e.getGameKey(),e.Dimension02Key):"",n.currentCustomDimension02),n.currentCustomDimension03?s.setItem(e.getGameKey(),e.Dimension03Key,n.currentCustomDimension03):(n.currentCustomDimension03=null!=s.getItem(e.getGameKey(),e.Dimension03Key)?s.getItem(e.getGameKey(),e.Dimension03Key):"",n.currentCustomDimension03);var t=null!=s.getItem(e.getGameKey(),e.SdkConfigCachedKey)?s.getItem(e.getGameKey(),e.SdkConfigCachedKey):"";if(t){var o=JSON.parse(i.decode64(t));if(o){var d=s.getItem(e.getGameKey(),e.LastUsedIdentifierKey);null!=d&&d!=e.getIdentifier()&&(r.w("New identifier spotted compared to last one used, clearing cached configs hash!!"),o.configs_hash&&delete o.configs_hash),n.sdkConfigCached=o}}var u=e.getSdkConfig();n.configsHash=u.configs_hash?u.configs_hash:"",n.abId=u.ab_id?u.ab_id:"",n.abVariantId=u.ab_variant_id?u.ab_variant_id:"";var l=s.select(a.Progression);if(l)for(var c=0;c<l.length;++c){var v=l[c];v&&(n.progressionTries[v.progression]=v.tries)}},e.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},e.formatString=function(e,n){for(var t=e,i=0;i<n.length;i++){var r=new RegExp("\\{"+i+"\\}","gi");t=t.replace(r,arguments[i])}return t},e.validateAndCleanCustomFields=function(n,t){void 0===t&&(t=null);var s={};if(n){var o=0;for(var a in n){var d=n[a];if(a&&d)if(o<e.MAX_CUSTOM_FIELDS_COUNT){var u=new RegExp("^[a-zA-Z0-9_]{1,"+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(a,u)){var l=typeof d;if("string"===l||d instanceof String){var c=d;if(c.length<=e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&c.length>0)s[a]=c,++o;else{g="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is an empty string or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")",f=e.formatString(g,[a,d]);r.w(f),t&&t(g,f)}}else if("number"===l||d instanceof Number){var v=d;s[a]=v,++o}else{g="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its value is not a string or number",f=e.formatString(g,[a,d]);r.w(f),t&&t(g,f)}}else{g="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+e.MAX_CUSTOM_FIELDS_KEY_LENGTH+")",f=e.formatString(g,[a,d]);r.w(f),t&&t(g,f)}}else{g="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because it exceeds the max number of custom fields ("+e.MAX_CUSTOM_FIELDS_COUNT+")",f=e.formatString(g,[a,d]);r.w(f),t&&t(g,f)}else{var g="validateAndCleanCustomFields: entry with key={0}, value={1} has been omitted because its key or value is null",f=e.formatString(g,[a,d]);r.w(f),t&&t(g,f)}}}return s},e.validateAndFixCurrentDimensions=function(){t.validateDimension01(e.getCurrentCustomDimension01(),e.getAvailableCustomDimensions01())||e.setCustomDimension01(""),t.validateDimension02(e.getCurrentCustomDimension02(),e.getAvailableCustomDimensions02())||e.setCustomDimension02(""),t.validateDimension03(e.getCurrentCustomDimension03(),e.getAvailableCustomDimensions03())||e.setCustomDimension03("")},e.getConfigurationStringValue=function(n,t){return e.instance.configurations[n]?e.instance.configurations[n].toString():t},e.isRemoteConfigsReady=function(){return e.instance.remoteConfigsIsReady},e.addRemoteConfigsListener=function(n){e.instance.remoteConfigsListeners.indexOf(n)<0&&e.instance.remoteConfigsListeners.push(n)},e.removeRemoteConfigsListener=function(n){var t=e.instance.remoteConfigsListeners.indexOf(n);t>-1&&e.instance.remoteConfigsListeners.splice(t,1)},e.getRemoteConfigsContentAsString=function(){return JSON.stringify(e.instance.configurations)},e.populateConfigurations=function(n){var t=n.configs;if(t){e.instance.configurations={};for(var i=0;i<t.length;++i){var r=t[i];if(r){var s=r.key,o=r.value,a=r.start_ts?r.start_ts:Number.MIN_VALUE,d=r.end_ts?r.end_ts:Number.MAX_VALUE,u=e.getClientTsAdjusted();s&&o&&u>a&&u<d&&(e.instance.configurations[s]=o)}}}e.instance.remoteConfigsIsReady=!0;var l=e.instance.remoteConfigsListeners;for(i=0;i<l.length;++i)l[i]&&l[i].onRemoteConfigsUpdated()},e.addOnBeforeUnloadListener=function(n){e.instance.beforeUnloadListeners.indexOf(n)<0&&e.instance.beforeUnloadListeners.push(n)},e.removeOnBeforeUnloadListener=function(n){var t=e.instance.beforeUnloadListeners.indexOf(n);t>-1&&e.instance.beforeUnloadListeners.splice(t,1)},e.notifyBeforeUnloadListeners=function(){for(var n=e.instance.beforeUnloadListeners,t=0;t<n.length;++t)n[t]&&n[t].onBeforeUnload()},e.CategorySdkError="sdk_error",e.MAX_CUSTOM_FIELDS_COUNT=50,e.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,e.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,e.instance=new e,e.DefaultUserIdKey="default_user_id",e.SessionNumKey="session_num",e.TransactionNumKey="transaction_num",e.Dimension01Key="dimension01",e.Dimension02Key="dimension02",e.Dimension03Key="dimension03",e.SdkConfigCachedKey="sdk_config_cached",e.LastUsedIdentifierKey="last_used_identifier",e}();n.GAState=u}(e.state||(e.state={}))}(t||(t={})),function(e){!function(n){var t=e.utilities.GAUtilities,i=e.logging.GALogger,r=function(){function e(){}return e.execute=function(n,r,s,o){var a=new Date;if(e.timestampMap[r]||(e.timestampMap[r]=a),e.countMap[r]||(e.countMap[r]=0),(a.getTime()-e.timestampMap[r].getTime())/1e3>=3600&&(e.timestampMap[r]=a,e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var d=t.getHmac(o,s),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void i.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[r]=e.countMap[r]+1}},u.open("POST",n,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",d);try{u.send(s)}catch(l){console.error(l)}}},e.MaxCount=10,e.countMap={},e.timestampMap={},e}();n.SdkErrorTask=r}(e.tasks||(e.tasks={}))}(t||(t={})),function(e){!function(n){var t=e.state.GAState,i=e.logging.GALogger,r=e.utilities.GAUtilities,s=e.validators.GAValidator,o=e.tasks.SdkErrorTask,a=e.events.EGASdkErrorCategory,d=e.events.EGASdkErrorArea,u=e.events.EGASdkErrorAction,l=e.events.EGASdkErrorParameter,c=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.remoteConfigsVersion="v1",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.remoteConfigsBaseUrl=this.protocol+"://"+this.hostName+"/remote_configs/"+this.remoteConfigsVersion,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i,r){var s=t.getGameKey(),o=this.remoteConfigsBaseUrl+"/"+this.initializeUrlPath+"?game_key="+s+"&interval_seconds=0&configs_hash="+i,a=t.getInitAnnotations(),d=JSON.stringify(a);if(d){var u=this.createPayloadData(d,this.useGzip),l=[];l.push(d),e.sendRequest(o,u,l,this.useGzip,e.initRequestCallback,r)}else r(n.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,r,s){if(0!=i.length){var o=t.getGameKey(),a=this.baseUrl+"/"+o+"/"+this.eventsUrlPath,d=JSON.stringify(i);if(d){var u=this.createPayloadData(d,this.useGzip),l=[];l.push(d),l.push(r),l.push(i.length.toString()),e.sendRequest(a,u,l,this.useGzip,e.sendEventInArrayRequestCallback,s)}else s(n.EGAHTTPApiResponse.JsonEncodeFailed,null,r,i.length)}},e.prototype.sendSdkErrorEvent=function(n,r,a,d,u,l,c){if(t.isEventSubmissionEnabled()&&s.validateSdkErrorEvent(l,c,n,r,a)){var v,g=this.baseUrl+"/"+l+"/"+this.eventsUrlPath,f="",m=t.getSdkErrorEventAnnotations(),E=e.sdkErrorCategoryString(n);m.error_category=E,f+=E;var p=e.sdkErrorAreaString(r);m.error_area=p,f+=":"+p;var h=e.sdkErrorActionString(a);m.error_action=h;var S=e.sdkErrorParameterString(d);if(S.length>0&&(m.error_parameter=S),u.length>0){var A=u;if(u.length>e.MAX_ERROR_MESSAGE_LENGTH)A=u.substring(0,e.MAX_ERROR_MESSAGE_LENGTH);m.reason=A}var y=[];y.push(m),(v=JSON.stringify(y))?o.execute(g,f,v,c):i.w("sendSdkErrorEvent: JSON encoding failed.")}},e.sendEventInArrayRequestCallback=function(i,r,s,o){void 0===o&&(o=null);o[0],o[1];var c,v,g=o[2],f=parseInt(o[3]);c=i.responseText,v=i.status;var m=e.instance.processRequestResponse(v,i.statusText,c,"Events");if(m==n.EGAHTTPApiResponse.Ok||m==n.EGAHTTPApiResponse.Created||m==n.EGAHTTPApiResponse.BadRequest){var E=c?JSON.parse(c):{};if(null==E)return s(n.EGAHTTPApiResponse.JsonDecodeFailed,null,g,f),void e.instance.sendSdkErrorEvent(a.Http,d.EventsHttp,u.FailHttpJsonDecode,l.Undefined,c,t.getGameKey(),t.getGameSecret());n.EGAHTTPApiResponse.BadRequest,s(m,E,g,f)}else s(m,null,g,f)},e.sendRequest=function(e,n,i,s,o,a){var d=new XMLHttpRequest,u=t.getGameSecret(),l=r.getHmac(u,n),c=[];for(var v in c.push(l),i)c.push(i[v]);if(d.onreadystatechange=function(){4===d.readyState&&o(d,e,a,c)},d.open("POST",e,!0),d.setRequestHeader("Content-Type","application/json"),d.setRequestHeader("Authorization",l),s)throw new Error("gzip not supported");try{d.send(n)}catch(g){console.error(g.stack)}},e.initRequestCallback=function(i,r,o,c){void 0===c&&(c=null);var v,g;c[0],c[1];v=i.responseText,g=i.status;var f=v?JSON.parse(v):{},m=e.instance.processRequestResponse(g,i.statusText,v,"Init");if(m==n.EGAHTTPApiResponse.Ok||m==n.EGAHTTPApiResponse.Created||m==n.EGAHTTPApiResponse.BadRequest){if(null==f)return o(n.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0),void e.instance.sendSdkErrorEvent(a.Http,d.InitHttp,u.FailHttpJsonDecode,l.Undefined,v,t.getGameKey(),t.getGameSecret());if(m!==n.EGAHTTPApiResponse.BadRequest){var E=s.validateAndCleanInitRequestResponse(f,m===n.EGAHTTPApiResponse.Created);E?o(m,E,"",0):o(n.EGAHTTPApiResponse.BadResponse,null,"",0)}else o(m,null,"",0)}else o(m,null,"",0)},e.prototype.createPayloadData=function(e,n){if(n)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,t,i,r){return i?200===e?n.EGAHTTPApiResponse.Ok:201===e?n.EGAHTTPApiResponse.Created:0===e||401===e?n.EGAHTTPApiResponse.Unauthorized:400===e?n.EGAHTTPApiResponse.BadRequest:500===e?n.EGAHTTPApiResponse.InternalServerError:n.EGAHTTPApiResponse.UnknownResponseCode:n.EGAHTTPApiResponse.NoResponse},e.sdkErrorCategoryString=function(e){switch(e){case a.EventValidation:return"event_validation";case a.Database:return"db";case a.Init:return"init";case a.Http:return"http";case a.Json:return"json"}return""},e.sdkErrorAreaString=function(e){switch(e){case d.BusinessEvent:return"business";case d.ResourceEvent:return"resource";case d.ProgressionEvent:return"progression";case d.DesignEvent:return"design";case d.ErrorEvent:return"error";case d.InitHttp:return"init_http";case d.EventsHttp:return"events_http";case d.ProcessEvents:return"process_events";case d.AddEventsToStore:return"add_events_to_store"}return""},e.sdkErrorActionString=function(e){switch(e){case u.InvalidCurrency:return"invalid_currency";case u.InvalidShortString:return"invalid_short_string";case u.InvalidEventPartLength:return"invalid_event_part_length";case u.InvalidEventPartCharacters:return"invalid_event_part_characters";case u.InvalidStore:return"invalid_store";case u.InvalidFlowType:return"invalid_flow_type";case u.StringEmptyOrNull:return"string_empty_or_null";case u.NotFoundInAvailableCurrencies:return"not_found_in_available_currencies";case u.InvalidAmount:return"invalid_amount";case u.NotFoundInAvailableItemTypes:return"not_found_in_available_item_types";case u.WrongProgressionOrder:return"wrong_progression_order";case u.InvalidEventIdLength:return"invalid_event_id_length";case u.InvalidEventIdCharacters:return"invalid_event_id_characters";case u.InvalidProgressionStatus:return"invalid_progression_status";case u.InvalidSeverity:return"invalid_severity";case u.InvalidLongString:return"invalid_long_string";case u.DatabaseTooLarge:return"db_too_large";case u.DatabaseOpenOrCreate:return"db_open_or_create";case u.JsonError:return"json_error";case u.FailHttpJsonDecode:return"fail_http_json_decode";case u.FailHttpJsonEncode:return"fail_http_json_encode"}return""},e.sdkErrorParameterString=function(e){switch(e){case l.Currency:return"currency";case l.CartType:return"cart_type";case l.ItemType:return"item_type";case l.ItemId:return"item_id";case l.Store:return"store";case l.FlowType:return"flow_type";case l.Amount:return"amount";case l.Progression01:return"progression01";case l.Progression02:return"progression02";case l.Progression03:return"progression03";case l.EventId:return"event_id";case l.ProgressionStatus:return"progression_status";case l.Severity:return"severity";case l.Message:return"message"}return""},e.instance=new e,e.MAX_ERROR_MESSAGE_LENGTH=256,e}();n.GAHTTPApi=c}(e.http||(e.http={}))}(t||(t={})),function(e){var n,t,i,r,s,o,a,d,u,l,c;n=e.events||(e.events={}),t=e.store.GAStore,i=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,s=e.state.GAState,o=e.logging.GALogger,a=e.utilities.GAUtilities,d=e.http.EGAHTTPApiResponse,u=e.http.GAHTTPApi,l=e.validators.GAValidator,c=function(){function c(){}return c.customEventFieldsErrorCallback=function(n,t){if(s.isEventSubmissionEnabled()){var i=new Date;c.timestampMap[n]||(c.timestampMap[n]=i),c.countMap[n]||(c.countMap[n]=0),(i.getTime()-c.timestampMap[n].getTime())/1e3>=3600&&(c.timestampMap[n]=i,c.countMap[n]=0),c.countMap[n]>=c.MAX_ERROR_COUNT||e.threading.GAThreading.performTaskOnGAThread(function(){c.addErrorEvent(e.EGAErrorSeverity.Warning,t,null,!0),c.countMap[n]=c.countMap[n]+1})}},c.addSessionStartEvent=function(){if(s.isEventSubmissionEnabled()){var e={};e.category=c.CategorySessionStart,s.incrementSessionNum(),t.setItem(s.getGameKey(),s.SessionNumKey,s.getSessionNum().toString()),c.addDimensionsToEvent(e);var n=s.instance.currentGlobalCustomEventFields;c.addCustomFieldsToEvent(e,s.validateAndCleanCustomFields(n,c.customEventFieldsErrorCallback)),c.addEventToStore(e),o.i("Add SESSION START event"),c.processEvents(c.CategorySessionStart,!1)}},c.addSessionEndEvent=function(){if(s.isEventSubmissionEnabled()){var e=s.getSessionStart(),n=s.getClientTsAdjusted()-e;n<0&&(o.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),n=0);var t={};t.category=c.CategorySessionEnd,t.length=n,c.addDimensionsToEvent(t);var i=s.instance.currentGlobalCustomEventFields;c.addCustomFieldsToEvent(t,s.validateAndCleanCustomFields(i,c.customEventFieldsErrorCallback)),c.addEventToStore(t),o.i("Add SESSION END event."),c.processEvents("",!1)}},c.addBusinessEvent=function(e,n,i,r,a,d,v){if(void 0===a&&(a=null),s.isEventSubmissionEnabled()){var g=l.validateBusinessEvent(e,n,a,i,r);if(null==g){var f={};s.incrementTransactionNum(),t.setItem(s.getGameKey(),s.TransactionNumKey,s.getTransactionNum().toString()),f.event_id=i+":"+r,f.category=c.CategoryBusiness,f.currency=e,f.amount=n,f[s.TransactionNumKey]=s.getTransactionNum(),a&&(f.cart_type=a),c.addDimensionsToEvent(f);var m={};if(d&&Object.keys(d).length>0)for(var E in d)m[E]=d[E];else for(var E in s.instance.currentGlobalCustomEventFields)m[E]=s.instance.currentGlobalCustomEventFields[E];if(v&&d&&Object.keys(d).length>0)for(var E in s.instance.currentGlobalCustomEventFields)m[E]||(m[E]=s.instance.currentGlobalCustomEventFields[E]);c.addCustomFieldsToEvent(f,s.validateAndCleanCustomFields(m,c.customEventFieldsErrorCallback)),o.i("Add BUSINESS event: {currency:"+e+", amount:"+n+", itemType:"+i+", itemId:"+r+", cartType:"+a+"}"),c.addEventToStore(f)}else u.instance.sendSdkErrorEvent(g.category,g.area,g.action,g.parameter,g.reason,s.getGameKey(),s.getGameSecret())}},c.addResourceEvent=function(n,t,i,r,a,d,v){if(s.isEventSubmissionEnabled()){var g=l.validateResourceEvent(n,t,i,r,a,s.getAvailableResourceCurrencies(),s.getAvailableResourceItemTypes());if(null==g){n===e.EGAResourceFlowType.Sink&&(i*=-1);var f={},m=c.resourceFlowTypeToString(n);f.event_id=m+":"+t+":"+r+":"+a,f.category=c.CategoryResource,f.amount=i,c.addDimensionsToEvent(f);var E={};if(d&&Object.keys(d).length>0)for(var p in d)E[p]=d[p];else for(var p in s.instance.currentGlobalCustomEventFields)E[p]=s.instance.currentGlobalCustomEventFields[p];if(v&&d&&Object.keys(d).length>0)for(var p in s.instance.currentGlobalCustomEventFields)E[p]||(E[p]=s.instance.currentGlobalCustomEventFields[p]);c.addCustomFieldsToEvent(f,s.validateAndCleanCustomFields(E,c.customEventFieldsErrorCallback)),o.i("Add RESOURCE event: {currency:"+t+", amount:"+i+", itemType:"+r+", itemId:"+a+"}"),c.addEventToStore(f)}else u.instance.sendSdkErrorEvent(g.category,g.area,g.action,g.parameter,g.reason,s.getGameKey(),s.getGameSecret())}},c.addProgressionEvent=function(n,t,i,r,a,d,v,g){if(s.isEventSubmissionEnabled()){var f=c.progressionStatusToString(n),m=l.validateProgressionEvent(n,t,i,r);if(null==m){var E,p={};E=i?r?t+":"+i+":"+r:t+":"+i:t,p.category=c.CategoryProgression,p.event_id=f+":"+E;var h=0;d&&n!=e.EGAProgressionStatus.Start&&(p.score=Math.round(a)),n===e.EGAProgressionStatus.Fail&&s.incrementProgressionTries(E),n===e.EGAProgressionStatus.Complete&&(s.incrementProgressionTries(E),h=s.getProgressionTries(E),p.attempt_num=h,s.clearProgressionTries(E)),c.addDimensionsToEvent(p);var S={};if(v&&Object.keys(v).length>0)for(var A in v)S[A]=v[A];else for(var A in s.instance.currentGlobalCustomEventFields)S[A]=s.instance.currentGlobalCustomEventFields[A];if(g&&v&&Object.keys(v).length>0)for(var A in s.instance.currentGlobalCustomEventFields)S[A]||(S[A]=s.instance.currentGlobalCustomEventFields[A]);c.addCustomFieldsToEvent(p,s.validateAndCleanCustomFields(S,c.customEventFieldsErrorCallback)),o.i("Add PROGRESSION event: {status:"+f+", progression01:"+t+", progression02:"+i+", progression03:"+r+", score:"+a+", attempt:"+h+"}"),c.addEventToStore(p)}else u.instance.sendSdkErrorEvent(m.category,m.area,m.action,m.parameter,m.reason,s.getGameKey(),s.getGameSecret())}},c.addDesignEvent=function(e,n,t,i,r){if(s.isEventSubmissionEnabled()){var a=l.validateDesignEvent(e);if(null==a){var d={};d.category=c.CategoryDesign,d.event_id=e,t&&(d.value=n),c.addDimensionsToEvent(d);var v={};if(i&&Object.keys(i).length>0)for(var g in i)v[g]=i[g];else for(var g in s.instance.currentGlobalCustomEventFields)v[g]=s.instance.currentGlobalCustomEventFields[g];if(r&&i&&Object.keys(i).length>0)for(var g in s.instance.currentGlobalCustomEventFields)v[g]||(v[g]=s.instance.currentGlobalCustomEventFields[g]);c.addCustomFieldsToEvent(d,s.validateAndCleanCustomFields(v,c.customEventFieldsErrorCallback)),o.i("Add DESIGN event: {eventId:"+e+", value:"+n+"}"),c.addEventToStore(d)}else u.instance.sendSdkErrorEvent(a.category,a.area,a.action,a.parameter,a.reason,s.getGameKey(),s.getGameSecret())}},c.addErrorEvent=function(e,n,t,i,r){if(void 0===r&&(r=!1),s.isEventSubmissionEnabled()){var a=c.errorSeverityToString(e),d=l.validateErrorEvent(e,n);if(null==d){var v={};if(v.category=c.CategoryError,v.severity=a,v.message=n,c.addDimensionsToEvent(v),!r){var g={};if(t&&Object.keys(t).length>0)for(var f in t)g[f]=t[f];else for(var f in s.instance.currentGlobalCustomEventFields)g[f]=s.instance.currentGlobalCustomEventFields[f];if(i&&t&&Object.keys(t).length>0)for(var f in s.instance.currentGlobalCustomEventFields)g[f]||(g[f]=s.instance.currentGlobalCustomEventFields[f]);c.addCustomFieldsToEvent(v,s.validateAndCleanCustomFields(g,c.customEventFieldsErrorCallback))}o.i("Add ERROR event: {severity:"+a+", message:"+n+"}"),c.addEventToStore(v)}else u.instance.sendSdkErrorEvent(d.category,d.area,d.action,d.parameter,d.reason,s.getGameKey(),s.getGameSecret())}},c.addAdEvent=function(n,t,i,r,a,d,v,g,f){if(s.isEventSubmissionEnabled()){var m=c.adActionToString(n),E=c.adTypeToString(t),p=c.adErrorToString(a),h=l.validateAdEvent(n,t,i,r);if(null==h){var S={};S.category=c.CategoryAds,S.ad_sdk_name=i,S.ad_placement=r,S.ad_type=E,S.ad_action=m,n==e.EGAAdAction.FailedShow&&p.length>0&&(S.ad_fail_show_reason=p),!v||t!=e.EGAAdType.RewardedVideo&&t!=e.EGAAdType.Video||(S.ad_duration=d),c.addDimensionsToEvent(S);var A={};if(g&&Object.keys(g).length>0)for(var y in g)A[y]=g[y];else for(var y in s.instance.currentGlobalCustomEventFields)A[y]=s.instance.currentGlobalCustomEventFields[y];if(f&&g&&Object.keys(g).length>0)for(var y in s.instance.currentGlobalCustomEventFields)A[y]||(A[y]=s.instance.currentGlobalCustomEventFields[y]);c.addCustomFieldsToEvent(S,s.validateAndCleanCustomFields(A,c.customEventFieldsErrorCallback)),o.i("Add AD event: {ad_sdk_name:"+i+", ad_placement:"+r+", ad_type:"+E+", ad_action:"+m+(n==e.EGAAdAction.FailedShow&&p.length>0?", ad_fail_show_reason:"+p:"")+(!v||t!=e.EGAAdType.RewardedVideo&&t!=e.EGAAdType.Video?"":", ad_duration:"+d)+"}"),c.addEventToStore(S)}else u.instance.sendSdkErrorEvent(h.category,h.area,h.action,h.parameter,h.reason,s.getGameKey(),s.getGameSecret())}},c.processEvents=function(e,d){if(s.isEventSubmissionEnabled())try{var v=a.createGuid();d&&(c.cleanupEvents(),c.fixMissingSessionEndEvents());var g=[];g.push(["status",r.Equal,"new"]);var f=[];f.push(["status",r.Equal,"new"]),e&&(g.push(["category",r.Equal,e]),f.push(["category",r.Equal,e]));var m=[];m.push(["status",v]);var E=t.select(i.Events,g);if(!E||0==E.length)return o.i("Event queue: No events to send"),void c.updateSessionStore();if(E.length>c.MaxEventCount){if(!(E=t.select(i.Events,g,!0,c.MaxEventCount)))return;var p=E[E.length-1].client_ts;if(g.push(["client_ts",r.LessOrEqual,p]),!(E=t.select(i.Events,g)))return;f.push(["client_ts",r.LessOrEqual,p])}if(o.i("Event queue: Sending "+E.length+" events."),!t.update(i.Events,m,f))return;for(var h=[],S=0;S<E.length;++S){var A=E[S],y=JSON.parse(a.decode64(A.event));if(0!=y.length){var b=y.client_ts;b&&!l.validateClientTs(b)&&delete y.client_ts,h.push(y)}}u.instance.sendEventsInArray(h,v,c.processEventsCallback)}catch(C){o.e("Error during ProcessEvents(): "+C.stack),u.instance.sendSdkErrorEvent(n.EGASdkErrorCategory.Json,n.EGASdkErrorArea.ProcessEvents,n.EGASdkErrorAction.JsonError,n.EGASdkErrorParameter.Undefined,C.stack,s.getGameKey(),s.getGameSecret())}},c.processEventsCallback=function(e,n,s,a){var u=[];if(u.push(["status",r.Equal,s]),e===d.Ok)t.delete(i.Events,u),o.i("Event queue: "+a+" events sent.");else if(e===d.NoResponse){var l=[];l.push(["status","new"]),o.w("Event queue: Failed to send events to collector - Retrying next time"),t.update(i.Events,l,u)}else{if(n){var c,v=0;for(var g in n)0==v&&(c=n[g]),++v;e===d.BadRequest&&c.constructor===Array?o.w("Event queue: "+a+" events sent. "+v+" events failed GA server validation."):o.w("Event queue: Failed to send events.")}else o.w("Event queue: Failed to send events.");t.delete(i.Events,u)}},c.cleanupEvents=function(){t.update(i.Events,[["status","new"]])},c.fixMissingSessionEndEvents=function(){if(s.isEventSubmissionEnabled()){var e=[];e.push(["session_id",r.NotEqual,s.getSessionId()]);var n=t.select(i.Sessions,e);if(n&&0!=n.length){o.i(n.length+" session(s) located with missing session_end event.");for(var d=0;d<n.length;++d){var u=JSON.parse(a.decode64(n[d].event)),l=u.client_ts-n[d].timestamp;l=Math.max(0,l),u.category=c.CategorySessionEnd,u.length=l,c.addEventToStore(u)}}}},c.addEventToStore=function(e){if(s.isEventSubmissionEnabled())if(s.isInitialized())try{if(t.isStoreTooLargeForEvents()&&!a.stringMatch(e.category,/^(user|session_end|business)$/))return o.w("Database too large. Event has been blocked."),void u.instance.sendSdkErrorEvent(n.EGASdkErrorCategory.Database,n.EGASdkErrorArea.AddEventsToStore,n.EGASdkErrorAction.DatabaseTooLarge,n.EGASdkErrorParameter.Undefined,"",s.getGameKey(),s.getGameSecret());var d=s.getEventAnnotations();for(var l in e)d[l]=e[l];var v=JSON.stringify(d);o.ii("Event added to queue: "+v);var g={status:"new"};g.category=d.category,g.session_id=d.session_id,g.client_ts=d.client_ts,g.event=a.encode64(JSON.stringify(d)),t.insert(i.Events,g),e.category==c.CategorySessionEnd?t.delete(i.Sessions,[["session_id",r.Equal,d.session_id]]):c.updateSessionStore(),t.isStorageAvailable()&&t.save(s.getGameKey())}catch(l){o.e("addEventToStore: error"),o.e(l.stack),u.instance.sendSdkErrorEvent(n.EGASdkErrorCategory.Database,n.EGASdkErrorArea.AddEventsToStore,n.EGASdkErrorAction.DatabaseTooLarge,n.EGASdkErrorParameter.Undefined,l.stack,s.getGameKey(),s.getGameSecret())}else o.w("Could not add event: SDK is not initialized")},c.updateSessionStore=function(){if(s.sessionIsStarted()){var e={};e.session_id=s.instance.sessionId,e.timestamp=s.getSessionStart();var n=s.getEventAnnotations();c.addDimensionsToEvent(n);var r=s.instance.currentGlobalCustomEventFields;c.addCustomFieldsToEvent(n,s.validateAndCleanCustomFields(r,c.customEventFieldsErrorCallback)),e.event=a.encode64(JSON.stringify(n)),t.insert(i.Sessions,e,!0,"session_id"),t.isStorageAvailable()&&t.save(s.getGameKey())}},c.addDimensionsToEvent=function(e){e&&(s.getCurrentCustomDimension01()&&(e.custom_01=s.getCurrentCustomDimension01()),s.getCurrentCustomDimension02()&&(e.custom_02=s.getCurrentCustomDimension02()),s.getCurrentCustomDimension03()&&(e.custom_03=s.getCurrentCustomDimension03()))},c.addCustomFieldsToEvent=function(e,n){e&&n&&Object.keys(n).length>0&&(e.custom_fields=n)},c.resourceFlowTypeToString=function(n){return n==e.EGAResourceFlowType.Source||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":n==e.EGAResourceFlowType.Sink||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},c.progressionStatusToString=function(n){return n==e.EGAProgressionStatus.Start||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":n==e.EGAProgressionStatus.Complete||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":n==e.EGAProgressionStatus.Fail||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},c.errorSeverityToString=function(n){return n==e.EGAErrorSeverity.Debug||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":n==e.EGAErrorSeverity.Info||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":n==e.EGAErrorSeverity.Warning||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":n==e.EGAErrorSeverity.Error||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":n==e.EGAErrorSeverity.Critical||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},c.adActionToString=function(n){return n==e.EGAAdAction.Clicked||n==e.EGAAdAction[e.EGAAdAction.Clicked]?"clicked":n==e.EGAAdAction.Show||n==e.EGAAdAction[e.EGAAdAction.Show]?"show":n==e.EGAAdAction.FailedShow||n==e.EGAAdAction[e.EGAAdAction.FailedShow]?"failed_show":n==e.EGAAdAction.RewardReceived||n==e.EGAAdAction[e.EGAAdAction.RewardReceived]?"reward_received":""},c.adErrorToString=function(n){return n==e.EGAAdError.Unknown||n==e.EGAAdError[e.EGAAdError.Unknown]?"unknown":n==e.EGAAdError.Offline||n==e.EGAAdError[e.EGAAdError.Offline]?"offline":n==e.EGAAdError.NoFill||n==e.EGAAdError[e.EGAAdError.NoFill]?"no_fill":n==e.EGAAdError.InternalError||n==e.EGAAdError[e.EGAAdError.InternalError]?"internal_error":n==e.EGAAdError.InvalidRequest||n==e.EGAAdError[e.EGAAdError.InvalidRequest]?"invalid_request":n==e.EGAAdError.UnableToPrecache||n==e.EGAAdError[e.EGAAdError.UnableToPrecache]?"unable_to_precache":""},c.adTypeToString=function(n){return n==e.EGAAdType.Video||n==e.EGAAdType[e.EGAAdType.Video]?"video":n==e.EGAAdType.RewardedVideo||n==e.EGAAdError[e.EGAAdType.RewardedVideo]?"rewarded_video":n==e.EGAAdType.Playable||n==e.EGAAdError[e.EGAAdType.Playable]?"playable":n==e.EGAAdType.Interstitial||n==e.EGAAdError[e.EGAAdType.Interstitial]?"interstitial":n==e.EGAAdType.OfferWall||n==e.EGAAdError[e.EGAAdType.OfferWall]?"offer_wall":n==e.EGAAdType.Banner||n==e.EGAAdError[e.EGAAdType.Banner]?"banner":""},c.CategorySessionStart="user",c.CategorySessionEnd="session_end",c.CategoryDesign="design",c.CategoryBusiness="business",c.CategoryProgression="progression",c.CategoryResource="resource",c.CategoryError="error",c.CategoryAds="ads",c.MaxEventCount=500,c.MAX_ERROR_COUNT=10,c.countMap={},c.timestampMap={},c}(),n.GAEvents=c}(t||(t={})),function(e){!function(n){var t=e.logging.GALogger,i=e.state.GAState,r=e.events.GAEvents,s=function(){function e(){this.blocks=new n.PriorityQueue({compare:function(e,n){return e-n}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new n.TimedBlock(t)},e.performTaskOnGAThread=function(t,i){void 0===i&&(i=0);var r=new Date;r.setSeconds(r.getSeconds()+i);var s=new n.TimedBlock(r);s.block=t,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s)},e.performTimedBlockOnGAThread=function(n){e.instance.id2TimedBlockMap[n.id]=n,e.instance.addTimedBlock(n)},e.scheduleTimer=function(t,i){var r=new Date;r.setSeconds(r.getSeconds()+t);var s=new n.TimedBlock(r);return s.block=i,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s),s.id},e.getTimedBlockById=function(n){return n in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[n]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(t.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(r.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(n){n in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[n].ignore=!0)},e.setEventProcessInterval=function(n){n>0&&(e.ProcessEventsIntervalInSeconds=n)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var n;n=e.getNextBlock();)if(!n.ignore)if(n.async){if(!n.running){n.running=!0,n.block();break}}else n.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(i){t.e("Error on GA thread"),t.e(i.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var n=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=n.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();n.GAThreading=s}(e.threading||(e.threading={}))}(t||(t={})),function(n){var t=n.threading.GAThreading,i=n.logging.GALogger,r=n.store.GAStore,s=n.state.GAState,o=n.http.GAHTTPApi,a=n.device.GADevice,d=n.validators.GAValidator,u=n.http.EGAHTTPApiResponse,l=n.utilities.GAUtilities,c=n.events.GAEvents,v=function(){function v(){}return v.getGlobalObject=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0},v.init=function(){if(a.touch(),v.methodMap.configureAvailableCustomDimensions01=v.configureAvailableCustomDimensions01,v.methodMap.configureAvailableCustomDimensions02=v.configureAvailableCustomDimensions02,v.methodMap.configureAvailableCustomDimensions03=v.configureAvailableCustomDimensions03,v.methodMap.configureAvailableResourceCurrencies=v.configureAvailableResourceCurrencies,v.methodMap.configureAvailableResourceItemTypes=v.configureAvailableResourceItemTypes,v.methodMap.configureBuild=v.configureBuild,v.methodMap.configureSdkGameEngineVersion=v.configureSdkGameEngineVersion,v.methodMap.configureGameEngineVersion=v.configureGameEngineVersion,v.methodMap.configureUserId=v.configureUserId,v.methodMap.initialize=v.initialize,v.methodMap.addBusinessEvent=v.addBusinessEvent,v.methodMap.addResourceEvent=v.addResourceEvent,v.methodMap.addProgressionEvent=v.addProgressionEvent,v.methodMap.addDesignEvent=v.addDesignEvent,v.methodMap.addErrorEvent=v.addErrorEvent,v.methodMap.addAdEvent=v.addAdEvent,v.methodMap.setEnabledInfoLog=v.setEnabledInfoLog,v.methodMap.setEnabledVerboseLog=v.setEnabledVerboseLog,v.methodMap.setEnabledManualSessionHandling=v.setEnabledManualSessionHandling,v.methodMap.setEnabledEventSubmission=v.setEnabledEventSubmission,v.methodMap.setCustomDimension01=v.setCustomDimension01,v.methodMap.setCustomDimension02=v.setCustomDimension02,v.methodMap.setCustomDimension03=v.setCustomDimension03,v.methodMap.setGlobalCustomEventFields=v.setGlobalCustomEventFields,v.methodMap.setEventProcessInterval=v.setEventProcessInterval,v.methodMap.startSession=v.startSession,v.methodMap.endSession=v.endSession,v.methodMap.onStop=v.onStop,v.methodMap.onResume=v.onResume,v.methodMap.addRemoteConfigsListener=v.addRemoteConfigsListener,v.methodMap.removeRemoteConfigsListener=v.removeRemoteConfigsListener,v.methodMap.getRemoteConfigsValueAsString=v.getRemoteConfigsValueAsString,v.methodMap.isRemoteConfigsReady=v.isRemoteConfigsReady,v.methodMap.getRemoteConfigsContentAsString=v.getRemoteConfigsContentAsString,v.methodMap.addOnBeforeUnloadListener=v.addOnBeforeUnloadListener,v.methodMap.removeOnBeforeUnloadListener=v.removeOnBeforeUnloadListener,void 0!==v.getGlobalObject()&&void 0!==v.getGlobalObject().GameAnalytics&&void 0!==v.getGlobalObject().GameAnalytics.q){var e=v.getGlobalObject().GameAnalytics.q;for(var n in e)v.gaCommand.apply(null,e[n])}window.addEventListener("beforeunload",function(e){console.log("addEventListener unload"),s.instance.isUnloading=!0,s.notifyBeforeUnloadListeners(),t.endSessionAndStopQueue(),s.instance.isUnloading=!1})},v.gaCommand=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length>0&&e[0]in n.GameAnalytics.methodMap&&(e.length>1?n.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):n.GameAnalytics.methodMap[e[0]]())},v.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions01(e)})},v.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions02(e)})},v.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions03(e)})},v.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Available resource currencies must be set before SDK is initialized"):s.setAvailableResourceCurrencies(e)})},v.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Available resource item types must be set before SDK is initialized"):s.setAvailableResourceItemTypes(e)})},v.configureBuild=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("Build version must be set before SDK is initialized."):d.validateBuild(e)?s.setBuild(e):i.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},v.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)||(d.validateSdkWrapperVersion(e)?a.sdkGameEngineVersion=e:i.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},v.configureGameEngineVersion=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)||(d.validateEngineVersion(e)?a.gameEngineVersion=e:i.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},v.configureUserId=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){v.isSdkReady(!0,!1)?i.w("A custom user id must be set before SDK is initialized."):d.validateUserId(e)?s.setUserId(e):i.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},v.initialize=function(e,n){void 0===e&&(e=""),void 0===n&&(n=""),a.updateConnectionType();var r=t.createTimedBlock();r.async=!0,v.initTimedBlockId=r.id,r.block=function(){v.isSdkReady(!0,!1)?i.w("SDK already initialized. Can only be called once."):d.validateKeys(e,n)?(s.setKeys(e,n),v.internalInitialize()):i.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+n)},t.performTimedBlockOnGAThread(r)},v.addBusinessEvent=function(e,n,i,r,o,d,u){if(void 0===e&&(e=""),void 0===n&&(n=0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===o&&(o=""),void 0===d&&(d={}),void 0===u&&(u=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add business event"))return;c.addBusinessEvent(e,n,i,r,o,d,u)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add business event")&&c.addBusinessEvent(e,n,i,r,o,d,u)})},v.addResourceEvent=function(e,i,r,o,d,u,l){if(void 0===e&&(e=n.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===r&&(r=0),void 0===o&&(o=""),void 0===d&&(d=""),void 0===u&&(u={}),void 0===l&&(l=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add resource event"))return;c.addResourceEvent(e,i,r,o,d,u,l)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add resource event")&&c.addResourceEvent(e,i,r,o,d,u,l)})},v.addProgressionEvent=function(e,i,r,o,d,u,l){if(void 0===e&&(e=n.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===r&&(r=""),void 0===o&&(o=""),void 0===u&&(u={}),void 0===l&&(l=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add progression event"))return;var g="number"==typeof d;c.addProgressionEvent(e,i,r,o,g?d:0,g,u,l)}else t.performTaskOnGAThread(function(){if(v.isSdkReady(!0,!0,"Could not add progression event")){var n="number"==typeof d;c.addProgressionEvent(e,i,r,o,n?d:0,n,u,l)}})},v.addDesignEvent=function(e,n,i,r){if(void 0===i&&(i={}),void 0===r&&(r=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add design event"))return;var o="number"==typeof n;c.addDesignEvent(e,o?n:0,o,i,r)}else t.performTaskOnGAThread(function(){if(v.isSdkReady(!0,!0,"Could not add design event")){var t="number"==typeof n;c.addDesignEvent(e,t?n:0,t,i,r)}})},v.addErrorEvent=function(e,i,r,o){if(void 0===e&&(e=n.EGAErrorSeverity.Undefined),void 0===i&&(i=""),void 0===r&&(r={}),void 0===o&&(o=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add error event"))return;c.addErrorEvent(e,i,r,o)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add error event")&&c.addErrorEvent(e,i,r,o)})},v.addAdEventWithNoAdReason=function(e,i,r,o,d,u,l){if(void 0===e&&(e=n.EGAAdAction.Undefined),void 0===i&&(i=n.EGAAdType.Undefined),void 0===r&&(r=""),void 0===o&&(o=""),void 0===d&&(d=n.EGAAdError.Undefined),void 0===u&&(u={}),void 0===l&&(l=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add ad event"))return;c.addAdEvent(e,i,r,o,d,0,!1,u,l)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add ad event")&&c.addAdEvent(e,i,r,o,d,0,!1,u,l)})},v.addAdEventWithDuration=function(e,i,r,o,d,u,l){if(void 0===e&&(e=n.EGAAdAction.Undefined),void 0===i&&(i=n.EGAAdType.Undefined),void 0===r&&(r=""),void 0===o&&(o=""),void 0===d&&(d=0),void 0===u&&(u={}),void 0===l&&(l=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add ad event"))return;c.addAdEvent(e,i,r,o,n.EGAAdError.Undefined,d,!0,u,l)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add ad event")&&c.addAdEvent(e,i,r,o,n.EGAAdError.Undefined,d,!0,u,l)})},v.addAdEvent=function(e,i,r,o,d,u){if(void 0===e&&(e=n.EGAAdAction.Undefined),void 0===i&&(i=n.EGAAdType.Undefined),void 0===r&&(r=""),void 0===o&&(o=""),void 0===d&&(d={}),void 0===u&&(u=!1),a.updateConnectionType(),s.instance.isUnloading){if(!v.isSdkReady(!0,!0,"Could not add ad event"))return;c.addAdEvent(e,i,r,o,n.EGAAdError.Undefined,0,!1,d,u)}else t.performTaskOnGAThread(function(){v.isSdkReady(!0,!0,"Could not add ad event")&&c.addAdEvent(e,i,r,o,n.EGAAdError.Undefined,0,!1,d,u)})},v.setEnabledInfoLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(i.setInfoLog(e),i.i("Info logging enabled")):(i.i("Info logging disabled"),i.setInfoLog(e))})},v.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(i.setVerboseLog(e),i.i("Verbose logging enabled")):(i.i("Verbose logging disabled"),i.setVerboseLog(e))})},v.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){s.setManualSessionHandling(e)})},v.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),t.performTaskOnGAThread(function(){e?(s.setEnabledEventSubmission(e),i.i("Event submission enabled")):(i.i("Event submission disabled"),s.setEnabledEventSubmission(e))})},v.setCustomDimension01=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){d.validateDimension01(e,s.getAvailableCustomDimensions01())?s.setCustomDimension01(e):i.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},v.setCustomDimension02=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){d.validateDimension02(e,s.getAvailableCustomDimensions02())?s.setCustomDimension02(e):i.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},v.setCustomDimension03=function(e){void 0===e&&(e=""),t.performTaskOnGAThread(function(){d.validateDimension03(e,s.getAvailableCustomDimensions03())?s.setCustomDimension03(e):i.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},v.setGlobalCustomEventFields=function(e){void 0===e&&(e={}),t.performTaskOnGAThread(function(){i.i("Set global custom event fields: "+JSON.stringify(e)),s.instance.currentGlobalCustomEventFields=e})},v.setEventProcessInterval=function(e){t.performTaskOnGAThread(function(){t.setEventProcessInterval(e)})},v.startSession=function(){if(s.isInitialized()){var e=t.createTimedBlock();e.async=!0,v.initTimedBlockId=e.id,e.block=function(){s.isEnabled()&&s.sessionIsStarted()&&t.endSessionAndStopQueue(),v.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)}},v.endSession=function(){v.onStop()},v.onStop=function(){t.performTaskOnGAThread(function(){try{t.endSessionAndStopQueue()}catch(e){}})},v.onResume=function(){var e=t.createTimedBlock();e.async=!0,v.initTimedBlockId=e.id,e.block=function(){v.resumeSessionAndStartQueue()},t.performTimedBlockOnGAThread(e)},v.getRemoteConfigsValueAsString=function(e,n){return void 0===n&&(n=null),s.getConfigurationStringValue(e,n)},v.isRemoteConfigsReady=function(){return s.isRemoteConfigsReady()},v.addRemoteConfigsListener=function(e){s.addRemoteConfigsListener(e)},v.removeRemoteConfigsListener=function(e){s.removeRemoteConfigsListener(e)},v.getRemoteConfigsContentAsString=function(){return s.getRemoteConfigsContentAsString()},v.getABTestingId=function(){return s.getABTestingId()},v.getABTestingVariantId=function(){return s.getABTestingVariantId()},v.addOnBeforeUnloadListener=function(e){s.addOnBeforeUnloadListener(e)},v.removeOnBeforeUnloadListener=function(e){s.removeOnBeforeUnloadListener(e)},v.internalInitialize=function(){s.ensurePersistedStates(),r.setItem(s.getGameKey(),s.DefaultUserIdKey,s.getDefaultId()),s.setInitialized(!0),v.newSession(),s.isEnabled()&&t.ensureEventQueueIsRunning()},v.newSession=function(){i.i("Starting a new session."),s.validateAndFixCurrentDimensions(),o.instance.requestInit(s.instance.configsHash,v.startNewSessionCallback)},v.startNewSessionCallback=function(e,n){if(e!==u.Ok&&e!==u.Created||!n)e==u.Unauthorized?(i.w("Initialize SDK failed - Unauthorized"),s.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?i.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?i.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||i.i("Init call (session start) failed - bad request or unknown response."),null==s.instance.sdkConfig?null!=s.instance.sdkConfigCached?(i.i("Init call (session start) failed - using cached init values."),s.instance.sdkConfig=s.instance.sdkConfigCached):(i.i("Init call (session start) failed - using default init values."),s.instance.sdkConfig=s.instance.sdkConfigDefault):i.i("Init call (session start) failed - using cached init values."),s.instance.initAuthorized=!0);else{var o=0;if(n.server_ts){var a=n.server_ts;o=s.calculateServerTimeOffset(a)}if(n.time_offset=o,e!=u.Created){var d=s.getSdkConfig();d.configs&&(n.configs=d.configs),d.configs_hash&&(n.configs_hash=d.configs_hash),d.ab_id&&(n.ab_id=d.ab_id),d.ab_variant_id&&(n.ab_variant_id=d.ab_variant_id)}s.instance.configsHash=n.configs_hash?n.configs_hash:"",s.instance.abId=n.ab_id?n.ab_id:"",s.instance.abVariantId=n.ab_variant_id?n.ab_variant_id:"",r.setItem(s.getGameKey(),s.SdkConfigCachedKey,l.encode64(JSON.stringify(n))),s.instance.sdkConfigCached=n,s.instance.sdkConfig=n,s.instance.initAuthorized=!0}if(s.instance.clientServerTimeOffset=s.getSdkConfig().time_offset?s.getSdkConfig().time_offset:0,s.populateConfigurations(s.getSdkConfig()),!s.isEnabled())return i.w("Could not start session: SDK is disabled."),void t.stopEventQueue();t.ensureEventQueueIsRunning();var g=l.createGuid();s.instance.sessionId=g,s.instance.sessionStart=s.getClientTsAdjusted(),c.addSessionStartEvent();var f=t.getTimedBlockById(v.initTimedBlockId);null!=f&&(f.running=!1),v.initTimedBlockId=-1},v.resumeSessionAndStartQueue=function(){s.isInitialized()&&(i.i("Resuming session."),s.sessionIsStarted()||v.newSession())},v.isSdkReady=function(e,n,t){return void 0===n&&(n=!0),void 0===t&&(t=""),t&&(t+=": "),e&&!s.isInitialized()?(n&&i.w(t+"SDK is not initialized"),!1):e&&!s.isEnabled()?(n&&i.w(t+"SDK is disabled"),!1):!(e&&!s.sessionIsStarted())||(n&&i.w(t+"Session has not started yet"),!1)},v.initTimedBlockId=-1,v.methodMap={},v}();n.GameAnalytics=v}(t||(t={})),t.GameAnalytics.init();var o=t.GameAnalytics.gaCommand;module.exports=t;
},{}],"G1z3":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONFIG"),i=require("../CONST"),o=require("../util/OMGLogger"),a=require("gameanalytics"),n=function(n){function r(){var e=n.call(this,{key:i.CONST.SCENES.LOAD,active:!0,pack:{files:[{type:"image",key:"loadBG",url:"./assets/load/background.png"},{type:"image",key:"loadLogo",url:"./assets/load/logo.png"}]}})||this;return e.loadStartTime=0,e}return e(r,n),r.prototype.init=function(){var e=this;o.OMGLogger.Debug("CAUTION: DEV BUILD ENABLED!"),o.OMGLogger.Debug("Local storage supported: "+this.storagePlugin.isLocalStorageSupported()),o.OMGLogger.Debug("Audio enabled: "+this.audioPlugin.isAudioEnabled()),this.registry.set(i.CONST.REGISTRY.ADBLOCKENABLED,!1),PokiSDK.init().then(function(){o.OMGLogger.Debug("PokiSDK initialized")}).catch(function(){e.registry.set(i.CONST.REGISTRY.ADBLOCKENABLED,!0),o.OMGLogger.Debug("PokiSDK initialization fail: Adblock enabled")}),t.Config.BuildLevel<t.BuildLevel.Prod&&PokiSDK.setDebug(!0);this.initAnalytics()},r.prototype.initAnalytics=function(){a.GameAnalytics.configureBuild(t.Config.GameVersion),a.GameAnalytics.initialize("0e2c1ed3ff77fc8d1a7dcd778f6801ca","20de031cbd535c2c8d5a6161ed9eb231f28533a0")},r.prototype.loadSceneImages=function(e){for(var t in e)this.load.image(e[t],e[t])},r.prototype.loadStartSceneImages=function(){this.loadSceneImages(i.CONST.BUTTONS),this.loadSceneImages(i.CONST.MENU)},r.prototype.loadStartAudio=function(){this.load.audio(i.CONST.AUDIO.SOUNDTRACK_SHORT,i.CONST.AUDIO.SOUNDTRACK_SHORT),this.load.audio(i.CONST.AUDIO.EERIE,i.CONST.AUDIO.EERIE)},r.prototype.loadFonts=function(){this.load.bitmapFont(i.CONST.FONT.ATLAS,i.CONST.FONT.ATLAS,i.CONST.FONT.XML)},r.prototype.preload=function(){var e=this;this.loadStartTime=this.time.now,this.add.image(0,-32,"loadBG").setOrigin(0,0).setScale(.6824),this.add.image(426.5,195,"loadLogo").setScale(.7),this.loadStartSceneImages(),this.loadFonts(),this.loadStartAudio();var t=this.add.graphics({fillStyle:{color:4763335}}).setDepth(1);this.add.graphics().fillStyle(16777215,.5).fillRect(150,this.game.renderer.height/2+90,this.game.renderer.width-300,50),PokiSDK.gameLoadingStart(),this.load.on("progress",function(i){PokiSDK.gameLoadingProgress({percentageDone:i}),t.fillRect(150,e.game.renderer.height/2+90,(e.game.renderer.width-300)*i,50)}),this.load.on("complete",function(){PokiSDK.gameLoadingFinished();var t=e.time.now-e.loadStartTime;a.GameAnalytics.addDesignEvent("Load:Loading:Time",t)}),this.hidePreloadScreen()},r.prototype.create=function(){this.registry.get(i.CONST.REGISTRY.ADBLOCKENABLED)?a.GameAnalytics.addDesignEvent("Ads:Adblock:Enabled"):a.GameAnalytics.addDesignEvent("Ads:Adblock:Disabled"),a.GameAnalytics.addDesignEvent("General:LocalStorage:"+(this.storagePlugin.isLocalStorageSupported()?"Enabled":"Disabled")),this.scene.launch(i.CONST.SCENES.SOUNDTRACK),this.scene.launch(i.CONST.SCENES.PROGRESSIVE_LOAD),this.scene.start(i.CONST.SCENES.MENU)},r.prototype.hidePreloadScreen=function(){document.getElementById("preloadDiv").style.display="none",document.getElementsByTagName("canvas")[0].style.zIndex=1},r}(Phaser.Scene);exports.LoadScene=n;
},{"../CONFIG":"Ex3v","../CONST":"HmIA","../util/OMGLogger":"x3NR","gameanalytics":"ublV"}],"f21r":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),n=function(n){function o(t,o,r,i,a,s,u){void 0===u&&(u=40);var c=n.call(this,t,o,r)||this;c.bgImage=c.scene.add.image(0,0,i);var p=c.scene.add.bitmapText(0,0,e.CONST.FONT.ATLAS,a,u).setOrigin(.5,.35);return c.add([c.bgImage,p]),t.add.existing(c),c.setDepth(3),c.bgImage.on("pointerup",function(){s()}),c.bgImage.on("pointerover",function(){c.animateButton(!0)}),c.bgImage.on("pointerout",function(){c.animateButton(!1)}),c.overrideInteractive(!0),c}return t(o,n),o.prototype.animateButton=function(t){this.buttonTween&&this.buttonTween.stop(),this.buttonTween=this.scene.tweens.add({targets:this,scaleX:t?1.05:1,scaleY:t?1.05:1,ease:"Quad.easeInOut",duration:75,repeat:0,yoyo:!1})},o.prototype.overrideInteractive=function(t){t?this.bgImage.setInteractive({useHandCursor:!0,pixelPerfect:!0}):this.bgImage.disableInteractive()},o}(Phaser.GameObjects.Container);exports.default=n;
},{"../CONST":"HmIA"}],"OuKZ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("../components/MenuButton")),i=require("../CONST"),s=function(e){function s(){var t=e.call(this,{key:i.CONST.SCENES.MENU})||this;return t.firstScene=i.CONST.SCENES.FLY,t.gameCompleted=!1,t}return t(s,e),s.prototype.init=function(){this.resetRegistry(),this.gameCompleted=this.registry.get(i.CONST.REGISTRY.GAME_COMPLETED)},s.prototype.resetRegistry=function(){this.registry.set(i.CONST.REGISTRY.SKIPUSED,!1),this.registry.set(i.CONST.REGISTRY.JUMPSCARE_ATTEMPTS,1),this.registry.set(i.CONST.REGISTRY.GHOSTBUSTERS_ATTEMPTED,!1),this.registry.set(i.CONST.REGISTRY.HELL_COMPLETED,!0)},s.prototype.preload=function(){},s.prototype.create=function(){var t=this;this.createParticles(),this.add.image(0,0,i.CONST.MENU.BACKGROUND).setOrigin(0,0).setDepth(0),this.add.image(0,0,i.CONST.MENU.OVERLAY).setOrigin(0,0).setDepth(2);var e=this.canContinueGame();new r.default(this,this.game.renderer.width/2,e?370:400,i.CONST.BUTTONS.RED,"PLAY",function(){t.startGame()});if(e)new r.default(this,this.game.renderer.width/2,430,i.CONST.BUTTONS.PURPLE,"CONTINUE",function(){t.continueGame()},30);this.gameCompleted||this.scene.get(i.CONST.SCENES.SOUNDTRACK).pause()},s.prototype.createParticles=function(){var t=this.add.particles(i.CONST.MENU.STAR_PARTICLE).setDepth(1),e={active:!0,visible:!0,on:!1,radial:!0,frequency:500,gravityY:0,timeScale:1,maxParticles:300,blendMode:0,lifespan:1e4,alpha:{start:0,end:1,ease:"Quad.easeOut"},scale:{start:1,end:0,ease:"Linear"},quantity:{ease:"Linear",min:0,max:10},emitZone:{source:new Phaser.Geom.Rectangle(-600,-300,1200,480),type:"random"},speed:{ease:"Linear",min:0,max:27},x:400,y:300};this.starParticles=t.createEmitter(e),this.starParticles.start(),this.starParticles.explode(50,400,300),this.starParticles.flow(500,7)},s.prototype.startGame=function(){this.scene.start(this.firstScene),this.startSoundtrack()},s.prototype.continueGame=function(){var t=this.storagePlugin.getItem(i.CONST.STORAGE_KEYS.PROGRESS);this.scene.start(t),this.startSoundtrack()},s.prototype.canContinueGame=function(){var t=this.storagePlugin.getItem(i.CONST.STORAGE_KEYS.PROGRESS);return t&&t!=i.CONST.SCENES.CREDITS},s.prototype.startSoundtrack=function(){if(!this.gameCompleted){var t=this.scene.get(i.CONST.SCENES.SOUNDTRACK);t.play(),t.FadeSoundtrack(1,1e3),t.FadeOutEerie()}},s}(Phaser.Scene);exports.MenuScene=s;
},{"../components/MenuButton":"f21r","../CONST":"HmIA"}],"QxR8":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=require("../util/OMGLogger"),s=function(s){function o(){return s.call(this,{key:e.CONST.SCENES.SOUNDTRACK})||this}return t(o,s),o.prototype.init=function(){this.startVolume=1,this.targetVolume=1,this.timer=1e3,this.timerEerie=0,this.timeToChangeVolume=1e3,this.isFading=!1,this.isFadingEerie=!1},o.prototype.preload=function(){},o.prototype.FadeSoundtrack=function(t,e){this.startVolume=this.music.volume,this.targetVolume=t,this.timeToChangeVolume=e,this.timer=0,this.isFading=!0},o.prototype.FadeOutEerie=function(){this.isFadingEerie=!0},o.prototype.play=function(){this.music.play(),this.music.setSeek(87)},o.prototype.pause=function(){this.music.pause()},o.prototype.create=function(){this.music=this.sound.add(e.CONST.AUDIO.SOUNDTRACK_SHORT,{loop:!0,mute:!1,volume:0}),this.music.setVolume(0),this.music.pause(),this.creepySound=this.sound.add(e.CONST.AUDIO.EERIE,{loop:!0,mute:!1,volume:1}),this.creepySound.play(),this.registry.set(e.CONST.SCENES.SOUNDTRACK,this)},o.prototype.update=function(t,e){this.fadeVolume(e),this.fadeEerie(e)},o.prototype.fadeVolume=function(t){if(this.isFading){if(this.timer+=t,this.timer>this.timeToChangeVolume)return this.music.setVolume(this.targetVolume),void(this.isFading=!1);this.music.setVolume(Phaser.Math.Linear(this.startVolume,this.targetVolume,this.timer/this.timeToChangeVolume))}},o.prototype.fadeEerie=function(t){if(this.isFadingEerie){if(this.timer+=t,this.timer>1e3)return this.creepySound.setVolume(0),this.creepySound.stop(),void(this.isFadingEerie=!1);this.creepySound.setVolume(Phaser.Math.Linear(1,0,this.timer/1e3))}},o.prototype.switchMusic=function(){i.OMGLogger.Debug("Music switched!");var t=this.sound.add(e.CONST.AUDIO.SOUNDTRACK,{loop:!0,mute:!1,seek:this.music.seek});t.play(),this.music.isPaused&&t.pause(),t.setSeek(this.music.seek),t.setVolume(this.music.volume),this.music.stop(),this.music=t},o}(Phaser.Scene);exports.SoundtrackScene=s;
},{"../CONST":"HmIA","../util/OMGLogger":"x3NR"}],"d3fA":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),r=function(r){function n(e,n,o,i){var u=r.call(this,e,n,o,t.CONST.BUTTONS.SOUND_ON)||this;return u.audioPlugin=i,u.setInteractive({useHandCursor:!0}),u.on("pointerup",u.handleClick),u.updateTexture(),u.setScale(.7),u.scene.add.existing(u),u}return e(n,r),n.prototype.handleClick=function(){this.scene.rewardedBreakRequested||(this.audioPlugin.toggleAudioEnabled(),this.updateTexture())},n.prototype.updateTexture=function(){this.setTexture(this.audioPlugin.isAudioEnabled()?t.CONST.BUTTONS.SOUND_ON:t.CONST.BUTTONS.SOUND_OFF)},n}(Phaser.GameObjects.Image);exports.default=r;
},{"../CONST":"HmIA"}],"qoOj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,e){void 0===e&&(e=60),this.animTimer=0,this.isAnimating=!1,this.loop=!1,this.playbackSpeed=1,this.xOffset=0,this.yOffset=0,this.angleOffset=0,this.scaleMultiplierX=1,this.scaleMultiplierY=1,this.xOverride=0,this.yOverride=0,this.finishCallback=function(){},this.image=t,this.animationJson=i,this.animFPS=e,this.resetAnimTimer(),this.isAnimating=!1,this.duration=1e3*i.frames.length/e}return t.prototype.resetAnimTimer=function(){this.animTimer=this.playbackSpeed<0?this.duration:0},t.prototype.setLoop=function(t){return this.loop=t,this},t.prototype.setPlaybackSpeed=function(t){return this.playbackSpeed=t,this.resetAnimTimer(),this},t.prototype.setOffset=function(t,i){return this.xOffset=t,this.yOffset=i,this},t.prototype.setAngleOffset=function(t){return this.angleOffset=t,this},t.prototype.setScaleMultiplier=function(t,i){return void 0===i&&(i=0),this.scaleMultiplierX=t,this.scaleMultiplierY=0===i?t:i,this},t.prototype.setDepth=function(t){return this.image.setDepth(t),this},t.prototype.setScrollFactor=function(t,i){return this.image.setScrollFactor(t,i),this},t.prototype.setDraggable=function(t){return this.image.setInteractive({useHandCursor:!0}),t.setDraggable(this.image),this},t.prototype.setPositionOverride=function(t,i,e){return void 0===e&&(e=!0),this.xOverride=t,e&&(this.yOverride=i),this},t.prototype.setAnimFinishCallback=function(t){return this.finishCallback=t,this},t.prototype.setImageOrigin=function(t,i){return this.image.setOrigin(t,i),this},t.prototype.setImageInteractive=function(){return this.image.setInteractive(),this},t.prototype.GetPositionOverride=function(){return{x:this.xOverride,y:this.yOverride}},t.prototype.GetOffset=function(){return{x:this.xOffset,y:this.yOffset}},t.prototype.GetImage=function(){return this.image},t.prototype.update=function(t){this.isAnimating&&(this.positionImageOnAnimation(this.animTimer),this.updateTimer(t))},t.prototype.updateTimer=function(t){this.animTimer+=t*this.playbackSpeed,this.isAnimationFinished()&&(this.loop?this.resetAnimTimer():(this.isAnimating=!1,this.finishCallback()))},t.prototype.isAnimationFinished=function(){return this.playbackSpeed>0&&this.animTimer>=this.duration||this.playbackSpeed<0&&this.animTimer<=0},t.prototype.start=function(){return this.isAnimating=!0,this},t.prototype.pause=function(){return this.isAnimating=!1,this},t.prototype.stop=function(){return this.resetAnimTimer(),this.isAnimating=!1,this},t.prototype.setAnimation=function(t){return this.animationJson=t,this.resetAnimTimer(),this.duration=1e3*t.frames.length/this.animFPS,this},t.prototype.setImagePosition=function(t){return this.positionImageOnAnimation(t),this},t.prototype.IsAnimating=function(){return this.isAnimating},t.prototype.positionImageOnAnimation=function(t){var i=Math.floor(t*(this.animFPS/1e3));i>=this.animationJson.frames.length&&(i=this.animationJson.frames.length-1);var e=this.animationJson.frames[i];this.image.setPosition(e.x+this.xOffset+this.xOverride,e.y+this.yOffset+this.yOverride).setScale(parseFloat(e.scaleX)*this.scaleMultiplierX,parseFloat(e.scaleY)*this.scaleMultiplierY).setAngle(parseFloat(e.angle)+this.angleOffset)},t}();exports.UnityAnimation=t;
},{}],"Qwd5":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var i=e(require("../../components/SoundButton")),s=require("../../CONFIG"),a=require("../../CONST"),r=require("../../util/OMGLogger"),o=require("./Animation"),n=require("gameanalytics"),h=function(e){function h(t){var i=e.call(this,{key:t.sceneName})||this;return i.rewardedBreakRequested=!1,i.sceneName=t.sceneName,i.nextScene=t.nextScene,i.duration=t.duration,i.showCountdown=void 0===t.showCountdown||t.showCountdown,i.startScreenColor=t.startScreenColor,i.startText=t.startText,i.startTextYOrigin=void 0===t.startTextYOrigin?.25:t.startTextYOrigin,i.startTextColor=t.startTextColor,i.startTextSize=void 0===t.startTextSize?150:t.startTextSize,i.failImage=t.endScreen?t.endScreen:"",i.timeToStart=void 0===t.timeToStart?1e3:t.timeToStart,i.buttonPositions=t.endButtons,i.targetFPS=t.targetFPS?t.targetFPS:60,i.waitingToLoad=!1,i}return t(h,e),h.prototype.init=function(){this.animations=[],this.progressiveLoadScene=this.registry.get(a.CONST.SCENES.PROGRESSIVE_LOAD),this.rewardedBreakRequested=!1,this._init()},h.prototype.preload=function(){this._preload()},h.prototype.create=function(){var t=this;this.saveProgress(),this.createStartUI(),this.createGameplayUI(),this.createLoseUI(),this.createLoadUI();var e=this.areAllAssetsLoaded();e?this._create():this.waitingToLoad=!0,s.Config.BuildLevel<s.BuildLevel.Prod&&(this.skipKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P)),this.changeGameState(a.CONST.GAMESTATE.START),this.audioPlugin.beforeCommercialBreak(),PokiSDK.commercialBreak().then(function(){r.OMGLogger.Debug("End of commercial break"),t.audioPlugin.afterCommercialBreak(),e?t.createStartTimer():(t.createWaitingUI(),t.waitingToLoad=!0),t.onCommercialEnded()})},h.prototype.saveProgress=function(){this.storagePlugin.setItem(a.CONST.STORAGE_KEYS.PROGRESS,this.sceneName)},h.prototype.createWaitingUI=function(){var t=this.add.image(this.game.renderer.width/2,this.game.renderer.height-50,a.CONST.BUTTONS.SPINNER).setDepth(1002).setTint(this.startTextColor).setVisible(!0);this.tweens.add({targets:t,angle:"+=360",duration:1e3,ease:"Linear",repeat:-1})},h.prototype.createStartUI=function(){var t=this.add.graphics({fillStyle:{color:this.startScreenColor}}).fillRect(0,0,this.game.renderer.width,this.game.renderer.height).setDepth(1e3).setVisible(!1);this.startTextObject=this.add.bitmapText(this.game.renderer.width/2,this.game.renderer.height/2,a.CONST.FONT.ATLAS,this.startText,this.startTextSize).setOrigin(.5,this.startTextYOrigin).setDepth(1001).setVisible(!1).setTint(this.startTextColor).setCenterAlign(),this.startUI=this.add.group([t,this.startTextObject],{active:!1}),this.startUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},h.prototype.createGameplayUI=function(){this.progressBar=this.add.graphics({fillStyle:{color:1381653,alpha:this.showCountdown?.7:0}}).fillRect(0,0,this.game.renderer.width,14).setDepth(100).setVisible(!1),this.progressBarBackground=this.add.graphics({fillStyle:{color:2697513,alpha:this.showCountdown?.3:0}}).fillRect(0,0,this.game.renderer.width,14).setDepth(99).setVisible(!1),this.gameplayUI=this.add.group([this.progressBar,this.progressBarBackground],{active:!1}),this.gameplayUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},h.prototype.createLoseUI=function(){var t=this,e=[];if(""!=this.failImage){var s=this.add.image(0,0,this.failImage).setOrigin(0,0).setDepth(1002).setVisible(!1);e.push(s)}var r=void 0===this.buttonPositions.skipEnabled||this.buttonPositions.skipEnabled,o=void 0===this.buttonPositions.rotation?0:this.buttonPositions.rotation;if(!r||this.registry.get(a.CONST.REGISTRY.ADBLOCKENABLED)||this.registry.get(a.CONST.REGISTRY.SKIPUSED)){var n=this.addButton(this.buttonPositions.normalNoSkip.x,this.buttonPositions.normalNoSkip.y,a.CONST.BUTTONS.TRYAGAIN,this.buttonPositions.normalNoSkip.scale,function(){t.restartGame()});n.setAngle(o),e.push(n)}else{var h=this.addButton(this.buttonPositions.normalWithSkip.x,this.buttonPositions.normalWithSkip.y,a.CONST.BUTTONS.TRYAGAIN,this.buttonPositions.normalWithSkip.scale,function(){t.restartGame()});h.setAngle(o),e.push(h);var d=this.addButton(this.buttonPositions.skip.x,this.buttonPositions.skip.y,a.CONST.BUTTONS.SKIP,this.buttonPositions.skip.scale,function(){t.skipLevel()});d.setAngle(o),e.push(d)}var c=new i.default(this,this.game.renderer.width-10,this.game.renderer.height-10,this.audioPlugin).setOrigin(1,1).setDepth(1003).setVisible(!1);e.push(c),this.loseUI=this.add.group(e,{active:!1}),this.loseUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},h.prototype.createLoadUI=function(){var t=this.scene.get(this.nextScene),e=this.add.graphics({fillStyle:{color:t.startScreenColor}}).fillRect(0,0,this.game.renderer.width,this.game.renderer.height).setDepth(1e3).setVisible(!1),i=this.add.bitmapText(this.game.renderer.width/2,this.game.renderer.height/2,a.CONST.FONT.ATLAS,t.startText,150).setOrigin(.5,t.startTextYOrigin).setDepth(1001).setVisible(!1).setTint(t.startTextColor).setCenterAlign(),s=this.add.image(this.game.renderer.width/2,this.game.renderer.height-50,a.CONST.BUTTONS.SPINNER).setDepth(1002).setTint(t.startTextColor).setVisible(!1);this.tweens.add({targets:s,angle:"+=360",duration:1e3,ease:"Linear",repeat:-1}),this.loadUI=this.add.group([e,i,s],{active:!1}),this.loadUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},h.prototype.addButton=function(t,e,i,s,a){var r=this.add.image(t,e,i).setScale(s,s).setVisible(!1).setDepth(1003).setInteractive({useHandCursor:!0});return r.on("pointerup",a,this),r},h.prototype.changeGameState=function(t){var e=!0;switch(t===this.currentState&&(e=!1,r.OMGLogger.Debug("Cant switch to same state! Current state: "+this.currentState)),t){case a.CONST.GAMESTATE.START:this.setChildrenVisible(this.startUI,!0);break;case a.CONST.GAMESTATE.PLAYING:PokiSDK.gameplayStart(),this.setChildrenVisible(this.gameplayUI,!0);break;case a.CONST.GAMESTATE.LOSE:case a.CONST.GAMESTATE.WIN:break;case a.CONST.GAMESTATE.LOADNEXTLEVEL:this.setChildrenVisible(this.loadUI,!0);break;default:r.OMGLogger.Debug("Can't switch to invalid state: "+t),e=!1}if(e){switch(this.currentState){case a.CONST.GAMESTATE.START:this.setChildrenVisible(this.startUI,!1);break;case a.CONST.GAMESTATE.PLAYING:PokiSDK.gameplayStop(),this.setChildrenVisible(this.gameplayUI,!1);break;case a.CONST.GAMESTATE.LOSE:this.setChildrenVisible(this.loseUI,!1);break;case a.CONST.GAMESTATE.WIN:}this.currentState=t,r.OMGLogger.Debug("Minigame state changed to: "+this.currentState)}},h.prototype.showLoseUI=function(t){this.setChildrenVisible(this.loseUI,t)},h.prototype.setChildrenVisible=function(t,e){t.getChildren().forEach(function(t){t.setVisible(e)})},h.prototype.update=function(t,e){if(s.Config.BuildLevel<s.BuildLevel.Prod&&Phaser.Input.Keyboard.JustDown(this.skipKey)&&(r.OMGLogger.Debug("Skip level pressed"),this.clearTimers(),this.winGame()),this.waitingToLoad)return r.OMGLogger.Debug("Waiting to load..."),void(this.areAllAssetsLoaded()&&(this.waitingToLoad=!1,this.restartGame()));this.isCurrentState(a.CONST.GAMESTATE.PLAYING)&&this.updateGameplayTimer(),this.isCurrentState(a.CONST.GAMESTATE.LOADNEXTLEVEL)&&this.areAllAssetsLoaded(this.nextScene)&&this.loadNextScene(),this._update(t,e),this.updateAnimations(e)},h.prototype.updateGameplayTimer=function(){this.gameplayTimer&&this.progressBar.setX(-this.game.renderer.width*this.gameplayTimer.getProgress()).setVisible(!0)},h.prototype.updateAnimations=function(t){this.animations.forEach(function(e){e.update(t)})},h.prototype.createStartTimer=function(){this.startTimer=this.time.addEvent({delay:this.timeToStart,callback:this.startGame,callbackScope:this})},h.prototype.startGame=function(){this.changeGameState(a.CONST.GAMESTATE.PLAYING),this.clearTimers(),this.gameplayTimer=this.time.addEvent({delay:this.duration,callback:this.triggerTimeout,callbackScope:this}),this.onGameStarted(),n.GameAnalytics.addProgressionEvent(n.EGAProgressionStatus.Start,this.sceneName)},h.prototype.onGameStarted=function(){},h.prototype.onCommercialEnded=function(){},h.prototype.triggerTimeout=function(){this.clearTimers(),this._timeout()},h.prototype.clearTimers=function(){this.startTimer&&(this.startTimer.paused=!0,this.startTimer.remove()),this.gameplayTimer&&(this.gameplayTimer.paused=!0,this.gameplayTimer.remove()),this.winGameTimer&&(this.winGameTimer.paused=!0,this.winGameTimer.remove())},h.prototype.winGame=function(t){void 0===t&&(t=0),this.isCurrentState(a.CONST.GAMESTATE.PLAYING)&&(this.changeGameState(a.CONST.GAMESTATE.WIN),this.clearTimers(),this.winGameTimer=this.time.addEvent({delay:t,callback:this.handleWinGame,callbackScope:this}),n.GameAnalytics.addProgressionEvent(n.EGAProgressionStatus.Complete,this.sceneName),this.playWinAudio())},h.prototype.handleWinGame=function(){PokiSDK.happyTime(.5),this._afterWin(),this.loadNextScene()},h.prototype.loadNextScene=function(){this.areAllAssetsLoaded(this.nextScene)?(this.scene.stop(this.sceneName),this.scene.start(this.nextScene)):this.changeGameState(a.CONST.GAMESTATE.LOADNEXTLEVEL)},h.prototype.loseGame=function(t){void 0===t&&(t=0),this.isCurrentState(a.CONST.GAMESTATE.PLAYING)&&(this.changeGameState(a.CONST.GAMESTATE.LOSE),this.clearTimers(),this.winGameTimer=this.time.addEvent({delay:t,callback:this.handleLoseGame,callbackScope:this}),n.GameAnalytics.addProgressionEvent(n.EGAProgressionStatus.Fail,this.sceneName),this.playLoseAudio())},h.prototype.handleLoseGame=function(){this.showLoseUI(!0),this._afterLoss()},h.prototype.restartGame=function(){this.rewardedBreakRequested||(this.scene.stop(this.sceneName),this.scene.start(this.sceneName))},h.prototype.skipLevel=function(){var t=this;this.rewardedBreakRequested||(this.rewardedBreakRequested=!0,r.OMGLogger.Debug("skip level pressed"),this.audioPlugin.beforeCommercialBreak(),PokiSDK.rewardedBreak().then(function(e){t.audioPlugin.afterCommercialBreak(),e?(n.GameAnalytics.addDesignEvent("Ads:Rewarded:Completed"),t.loadNextScene()):(t.rewardedBreakRequested=!1,n.GameAnalytics.addDesignEvent("Ads:Rewarded:Failed"))}))},h.prototype.addBackgroundImage=function(t){return this.add.image(0,0,t).setDepth(0).setOrigin(0,0)},h.prototype.isCurrentState=function(t){return this.currentState===t},h.prototype.changeGameplayTimerDuration=function(t){this.gameplayTimer&&(this.gameplayTimer.elapsed-=t)},h.prototype.addAnimation=function(t,e,i){void 0===i&&(i=60);var s=this.add.image(0,0,t).setScale(0,0),a=this.cache.json.get(e),r=new o.UnityAnimation(s,a,i);return this.animations.push(r),r},h.prototype.getUnityY=function(t){return 4.5-9*t/480},h.prototype.getRandomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},h.prototype.getDetune=function(){return this.getRandomInt(-200,200)},h.prototype.areAllAssetsLoaded=function(t){return void 0===t&&(t=this.sceneName),this.progressiveLoadScene.isSceneLoaded(t)},h.prototype.smoothMoveObject=function(t,e,i,s){this.tweens.add({targets:t,x:e,y:i,ease:"Cubic",duration:s,repeat:0,yoyo:!1})},h.prototype.fadeSoundtrack=function(t,e){this.scene.get(a.CONST.SCENES.SOUNDTRACK).FadeSoundtrack(t,e)},h.prototype.playWinAudio=function(){this.sound.play(a.CONST.AUDIO.WIN,{detune:this.getDetune(),volume:1})},h.prototype.playLoseAudio=function(){this.sound.play(a.CONST.AUDIO.LOSE,{detune:this.getDetune(),volume:.4})},h.prototype.adjustVelocityForDelta=function(t,e){return t*e*this.targetFPS/1e3},h}(Phaser.Scene);exports.MinigameScene=h;
},{"../../components/SoundButton":"d3fA","../../CONFIG":"Ex3v","../../CONST":"HmIA","../../util/OMGLogger":"x3NR","./Animation":"qoOj","gameanalytics":"ublV"}],"wU9F":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function o(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),s=require("./generic/MinigameScene"),o=function(s){function o(){var e=s.call(this,{sceneName:t.CONST.SCENES.DRESSUP,duration:2e4,showCountdown:!1,startScreenColor:4954111,startText:"DRESS\nUP!",startTextColor:3289650,startTextYOrigin:.35,endScreen:t.CONST.DRESSUP.END,nextScene:t.CONST.SCENES.COLLECT,endButtons:{skipEnabled:!1,rotation:-10,normalNoSkip:{x:565,y:327,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}}})||this;return e.clothesConfigs=[{imageName:t.CONST.DRESSUP.BOY_1,startPos:{x:482,y:56},dressedPos:{x:295,y:177},type:0,costumeSet:0,scale:1.02,depth:21},{imageName:t.CONST.DRESSUP.BOY_2,startPos:{x:519,y:165},dressedPos:{x:295,y:258},type:1,costumeSet:0,scale:1.02,depth:21},{imageName:t.CONST.DRESSUP.BOY_3,startPos:{x:726,y:174},dressedPos:{x:282,y:312},type:2,costumeSet:0,scale:1.02,depth:21},{imageName:t.CONST.DRESSUP.DPOOL_1,startPos:{x:586,y:66},dressedPos:{x:297.5,y:184.5},type:0,costumeSet:2,scale:1.02,depth:22},{imageName:t.CONST.DRESSUP.DPOOL_2,startPos:{x:516,y:218},dressedPos:{x:296,y:257.5},type:1,costumeSet:2,scale:1.02,depth:22},{imageName:t.CONST.DRESSUP.DPOOL_3,startPos:{x:725,y:216},dressedPos:{x:283,y:313},type:2,costumeSet:2,scale:1.02,depth:22},{imageName:t.CONST.DRESSUP.DINO_1,startPos:{x:671,y:54},dressedPos:{x:282.5,y:169.5},type:0,costumeSet:1,scale:1.02,depth:23},{imageName:t.CONST.DRESSUP.DINO_2,startPos:{x:506,y:267},dressedPos:{x:281,y:259},type:1,costumeSet:1,scale:1.02,depth:23},{imageName:t.CONST.DRESSUP.DINO_3,startPos:{x:720,y:265},dressedPos:{x:279,y:313},type:2,costumeSet:1,scale:1.02,depth:23},{imageName:t.CONST.DRESSUP.WITCH_1,startPos:{x:755,y:62},dressedPos:{x:294,y:119},type:0,costumeSet:3,scale:1.02,depth:24},{imageName:t.CONST.DRESSUP.WITCH_2,startPos:{x:519,y:317},dressedPos:{x:295,y:258},type:1,costumeSet:3,scale:1.02,depth:24},{imageName:t.CONST.DRESSUP.WITCH_3,startPos:{x:722,y:313},dressedPos:{x:282,y:311},type:2,costumeSet:3,scale:1.02,depth:24}],e.dressedPositions=[{type:0,x:300,y:187},{type:1,x:299,y:262},{type:2,x:295,y:320}],e.maxDropDistance=80,e.clothes=[],e}return e(o,s),o.prototype._init=function(){this.clothes=[],this.dressedClothes=Array.apply(null,Array(3)).map(function(){})},o.prototype._preload=function(){},o.prototype._create=function(){this.addBackgroundImage(t.CONST.DRESSUP.BACKGROUND),this.add.image(283,234,t.CONST.DRESSUP.GHOST).setDepth(1),this.createFinishButton(),this.createClothes()},o.prototype.createFinishButton=function(){var e=this;this.add.image(625,431,t.CONST.DRESSUP.FABULOUS_BUTTON).setDepth(50).setInteractive({useHandCursor:!0}).on("pointerup",function(){e.checkForWin()})},o.prototype.checkForWin=function(){for(var e=-1,t=!0,s=0;s<this.dressedClothes.length;s++){if(null==this.dressedClothes[s]){t=!1;break}if(-1===e&&(e=this.dressedClothes[s].config.costumeSet),this.dressedClothes[s].config.costumeSet!==e){t=!1;break}}t?this.triggerWin(e):this.triggerLose()},o.prototype.createClothes=function(){var e=this;this.clothesConfigs.forEach(function(t){var s=e.add.image(t.startPos.x,t.startPos.y,t.imageName).setInteractive({useHandCursor:!0}).setScale(t.scale,t.scale).setDepth(t.depth);s.config=t,s.isDressed=!1,s.setDressed=function(t){s.isDressed=t,s.isDressed?(e.smoothMoveObject(s,s.config.dressedPos.x,s.config.dressedPos.y,200),s.setDepth(9+s.config.type)):(e.smoothMoveObject(s,s.config.startPos.x,s.config.startPos.y,400),s.setDepth(s.config.depth))},s.dress=function(){s.setDressed(!0),e.dressedClothes[s.config.type]&&e.dressedClothes[s.config.type].setDressed(!1),e.dressedClothes[s.config.type]=s},e.input.setDraggable(s)}),this.input.on("dragstart",function(e,s){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(s.isDressed||this.sound.play(t.CONST.AUDIO.GRAB,{detune:this.getDetune()}))},this),this.input.on("drag",function(e,t,s,o){t.isDressed||(t.x=s,t.y=o)}),this.input.on("dragend",function(e,s,o){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(s.isDressed||(this.canDress(s)?(s.dress(),this.sound.play(t.CONST.AUDIO.BOUNCE,{detune:this.getDetune()})):(s.setDressed(!1),this.sound.play(t.CONST.AUDIO.GRAB,{detune:this.getDetune()}))))},this)},o.prototype.canDress=function(e){for(var t=0,s=this.dressedPositions;t<s.length;t++){var o=s[t];if(o.type==e.config.type)return Phaser.Math.Distance.Between(o.x,o.y,e.x,e.y)<=this.maxDropDistance}return!1},o.prototype._update=function(e,t){},o.prototype._timeout=function(){},o.prototype._afterLoss=function(){},o.prototype._afterWin=function(){},o.prototype.triggerLose=function(){this.loseGame()},o.prototype.triggerWin=function(e){this.storagePlugin.setItem(t.CONST.STORAGE_KEYS.DRESSUP_COSTUME,e),this.winGame()},o}(s.MinigameScene);exports.DressupScene=o;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"XNKR":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),i=require("./generic/MinigameScene"),n=function(i){function n(){var e=i.call(this,{sceneName:t.CONST.SCENES.COLLECT,duration:33e3,showCountdown:!0,startScreenColor:5433142,startText:"COLLECT!",startTextColor:3289650,endScreen:t.CONST.COLLECT.END,nextScene:t.CONST.SCENES.SORT,endButtons:{normalNoSkip:{x:426.5,y:386,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}}})||this;return e.worldColliders=[{x:66.5,y:74.5,width:75,height:85},{x:132,y:34.5,width:44,height:27},{x:252,y:46,width:154,height:50},{x:387.5,y:68.5,width:85,height:123},{x:295.5,y:142,width:311,height:16},{x:444,y:69,width:16,height:132},{x:502.5,y:57.5,width:57,height:45},{x:136.5,y:100.5,width:61,height:-17},{x:158.5,y:120,width:29,height:-22},{x:127,y:415,width:116,height:102},{x:94,y:344.5,width:40,height:25},{x:268,y:296,width:88,height:120},{x:232.5,y:433,width:77,height:66},{x:356,y:348.5,width:46,height:259},{x:214.5,y:381.5,width:59,height:21},{x:729,y:242.5,width:176,height:197},{x:450.5,y:174.5,width:29,height:37},{x:497,y:368.5,width:42,height:65},{x:540.5,y:363,width:39,height:40},{x:587,y:353.5,width:50,height:43}],e.costumes=[{costumeSet:0,image:t.CONST.COLLECT.PLAYER_0},{costumeSet:1,image:t.CONST.COLLECT.PLAYER_1},{costumeSet:2,image:t.CONST.COLLECT.PLAYER_2},{costumeSet:3,image:t.CONST.COLLECT.PLAYER_3}],e.candies=[{image:t.CONST.COLLECT.CANDY_5,spawnPosition:new Phaser.Math.Vector2(746,418),scaleOverride:.3,angleOverride:33},{image:t.CONST.COLLECT.CANDY_4,spawnPosition:new Phaser.Math.Vector2(76,153),scaleOverride:.457,angleOverride:0},{image:t.CONST.COLLECT.CANDY_2,spawnPosition:new Phaser.Math.Vector2(743,73),scaleOverride:.69,angleOverride:-44},{image:t.CONST.COLLECT.CANDY_1,spawnPosition:new Phaser.Math.Vector2(136,295),scaleOverride:.597,angleOverride:33},{image:t.CONST.COLLECT.CANDY_3,spawnPosition:new Phaser.Math.Vector2(580,253),scaleOverride:.34,angleOverride:0}],e.playerSpawnPosition={x:51,y:183},e.moveForce=.03,e.candyCollectDistance=75,e.currentCandy=-1,e}return e(n,i),n.prototype._init=function(){this.player=null,this.currentCandy=-1,this.candyObject=null},n.prototype._preload=function(){},n.prototype._create=function(){this.addBackgroundImage(t.CONST.COLLECT.BACKGROUND),this.initPhysics(),this.spawnPlayer(),this.spawnNextCandy()},n.prototype.initPhysics=function(){var e=this;this.matter.world.setBounds(0,0,this.game.renderer.width,this.game.renderer.height),this.worldColliders.forEach(function(t){e.matter.add.rectangle(t.x,t.y,t.width,t.height,{isStatic:!0})})},n.prototype.spawnPlayer=function(){var e=this,t=this.matter.add.image(this.playerSpawnPosition.x,this.playerSpawnPosition.y,this.costumes[0].image,null,{chamfer:{radius:55},ignoreGravity:!0,frictionAir:0,friction:0}).setDepth(10).setScale(.375);t.setTexture(this.getCostumeImageKey()),t.isTouching=!1,t.update=function(i){var n=e.input.activePointer.position,o=new Phaser.Math.Vector2(n.x-t.x,n.y-t.y);t.rotateToPointer(o),t.move(i,o)},t.rotateToPointer=function(e){t.setRotation(e.angle()+ +Math.PI/2)},t.move=function(i,n){t.isTouching&&t.applyForce(n.normalize().scale(i/1e3*e.moveForce))},this.player=t,this.input.on("pointerdown",function(e){this.player.isTouching=!0},this),this.input.on("pointerup",function(e){this.player.isTouching=!1},this)},n.prototype.getCostumeImageKey=function(){var e=this.storagePlugin.getItem(t.CONST.STORAGE_KEYS.DRESSUP_COSTUME);return e||(e=0),this.costumes.find(function(t){return t.costumeSet==e}).image},n.prototype.spawnNextCandy=function(){var e=this;if(this.currentCandy++,this.currentCandy>=this.candies.length)this.triggerWin();else{var i=this.candies[this.currentCandy],n=this.addAnimation(i.image,t.CONST.ANIMATIONS.CANDY_DIE,60).setOffset(-76,-153).setPositionOverride(i.spawnPosition.x,i.spawnPosition.y).setScaleMultiplier(i.scaleOverride).setAngleOffset(i.angleOverride).setDepth(90).setLoop(!1).setPlaybackSpeed(-1).setAnimFinishCallback(function(){n.setAnimation(e.cache.json.get(t.CONST.ANIMATIONS.CANDY_IDLE)).setLoop(!0).setPlaybackSpeed(1).start()}).start();n.isActive=!0,n.onUpdate=function(e){n.isActive&&n.checkDistanceToPlayer()},n.checkDistanceToPlayer=function(){Phaser.Math.Distance.Between(n.image.x,n.image.y,e.player.x,e.player.y)<=e.candyCollectDistance&&(n.isActive=!1,n.setAnimation(e.cache.json.get(t.CONST.ANIMATIONS.CANDY_DIE)).setPlaybackSpeed(1).setLoop(!1).setAnimFinishCallback(function(){n.image.setVisible(!1)}),e.spawnNextCandy(),e.sound.play(t.CONST.AUDIO.WINK,{detune:e.getDetune(),volume:10}))},this.candyObject=n}},n.prototype._update=function(e,t){this.player.update(t),this.candyObject.onUpdate(t)},n.prototype._timeout=function(){this.triggerLose()},n.prototype._afterLoss=function(){},n.prototype._afterWin=function(){},n.prototype.triggerLose=function(){this.loseGame()},n.prototype.triggerWin=function(){this.winGame(1500)},n}(i.MinigameScene);exports.CollectScene=n;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"Lz1s":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),s=require("./generic/MinigameScene"),i=function(s){function i(){var t=s.call(this,{sceneName:e.CONST.SCENES.SORT,duration:14e3,showCountdown:!0,startScreenColor:16748688,startText:"SORT!",startTextColor:3289650,endScreen:e.CONST.SORT.END,nextScene:e.CONST.SCENES.GHOSTBUSTERS,endButtons:{normalNoSkip:{x:688,y:293,scale:1.25},normalWithSkip:{x:688,y:293,scale:1.25},skip:{x:688,y:395,scale:1.25}}})||this;return t.itemConfig=[{image:e.CONST.SORT.CANDY_1,startX:525,startY:68,startAngle:0,isTrash:!1,trash:{x:538,y:246,scale:.83,angle:-93,depth:10},pumpkin:{x:212,y:222,scale:1,angle:28,depth:10}},{image:e.CONST.SORT.CANDY_2,startX:99,startY:107,startAngle:0,isTrash:!1,trash:{x:669,y:207,scale:.91,angle:29,depth:10},pumpkin:{x:181,y:293,scale:.85,angle:-118,depth:10}},{image:e.CONST.SORT.CANDY_3,startX:750,startY:71,startAngle:-44.2,isTrash:!1,trash:{x:591,y:289,scale:1,angle:-110,depth:10},pumpkin:{x:338,y:269,scale:1,angle:-103,depth:10}},{image:e.CONST.SORT.CANDY_4,startX:796,startY:241,startAngle:1,isTrash:!1,trash:{x:658,y:255,scale:1,angle:-153,depth:10},pumpkin:{x:257.5,y:266.6,scale:1,angle:-164,depth:10}},{image:e.CONST.SORT.CANDY_5,startX:438,startY:161,startAngle:0,isTrash:!1,trash:{x:582,y:200,scale:.91,angle:-12,depth:10},pumpkin:{x:286,y:215,scale:.92,angle:7,depth:10}},{image:e.CONST.SORT.RAZOR,startX:59,startY:238,startAngle:0,isTrash:!0,trash:{x:560,y:216,scale:1,angle:-44,depth:10},pumpkin:{x:224,y:294,scale:.76,angle:174,depth:10}},{image:e.CONST.SORT.MEAT,startX:84,startY:350,startAngle:16,isTrash:!0,trash:{x:580,y:273,scale:.76,angle:-43,depth:10},pumpkin:{x:202,y:250,scale:.81,angle:9,depth:10}},{image:e.CONST.SORT.TOOTHBRUSH,startX:327,startY:73,startAngle:-26,isTrash:!0,trash:{x:706,y:269,scale:1,angle:46,depth:10},pumpkin:{x:258,y:246,scale:1,angle:-5,depth:10}},{image:e.CONST.SORT.BROCCOLI,startX:780,startY:341,startAngle:0,isTrash:!0,trash:{x:660,y:263,scale:1,angle:47,depth:10},pumpkin:{x:321,y:265,scale:1,angle:-87,depth:10}}],t.basketPosition={x:260,y:250},t.trashPosition={x:615,y:253},t.maxCupDistance=110,t.dragDepth=101,t.idleDepth=50,t.items=[],t.itemDepth=10,t.sortedItemsCount=0,t}return t(i,s),i.prototype._init=function(){this.items=[],this.itemDepth=10,this.sortedItemsCount=0},i.prototype._preload=function(){},i.prototype._create=function(){this.addBackgroundImage(e.CONST.SORT.BACKGROUND),this.add.image(426.5,431,e.CONST.SORT.SORT_TEXT).setDepth(1),this.spawnGhost(),this.addBins(),this.spawnItems()},i.prototype.spawnGhost=function(){this.ghost=this.add.image(731,485,e.CONST.SORT.GHOST).setDepth(200).setScale(.93)},i.prototype.addBins=function(){this.add.image(this.basketPosition.x,this.basketPosition.y,e.CONST.SORT.PUMPKIN_BACK).setDepth(1),this.add.image(this.basketPosition.x,this.basketPosition.y+50,e.CONST.SORT.PUMPKIN_FRONT).setDepth(100),this.add.image(this.trashPosition.x,this.trashPosition.y,e.CONST.SORT.TRASH_BACK).setDepth(1),this.add.image(this.trashPosition.x,this.trashPosition.y,e.CONST.SORT.TRASH_FRONT).setDepth(100)},i.prototype.spawnItems=function(){var t=this;this.itemConfig.forEach(function(s){var i=t.add.image(s.startX,s.startY,s.image).setDepth(50).setAngle(s.startAngle).setInteractive(t.input.makePixelPerfect());t.input.setDraggable(i),t.items.push({key:s.image,image:i,isTrash:s.isTrash,config:s,sortedCorrectly:!1,putInCup:function(s,i,a){t.input.disable(s.image),a||s.key!==e.CONST.SORT.RAZOR||s.image.setTint(13290186);var n=a?s.config.pumpkin:s.config.trash;t.tweens.add({targets:s.image,x:n.x,y:n.y,scaleX:n.scale,scaleY:n.scale,angle:n.angle,ease:"Cubic",duration:200,repeat:0,yoyo:!1,onComplete:function(){s.image.setDepth(n.depth)}})}})}),this.input.on("dragstart",function(t,s){this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&(s.setDepth(this.dragDepth),this.sound.play(e.CONST.AUDIO.GRAB,{detune:this.getDetune()}))},this),this.input.on("drag",function(t,e,s,i){e.x=s,e.y=i}),this.input.on("dragend",function(t,s,i){this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&(s.setDepth(this.idleDepth),this.PutInCup(s),this.sound.play(e.CONST.AUDIO.GRAB,{detune:this.getDetune()}))},this)},i.prototype.PutInCup=function(t){var e=this,s=this.isItemInCup(!0,t),i=this.isItemInCup(!1,t);(s||i)&&this.items.forEach(function(a){if(a.key===t.texture.key)return e.itemDepth++,e.sortedItemsCount++,a.sortedCorrectly=a.isTrash===i,a.putInCup(a,e.itemDepth,s),void e.CheckForWin()})},i.prototype.isItemInCup=function(t,e){return Phaser.Math.Distance.Between(e.x,e.y,t?this.basketPosition.x:this.trashPosition.x,t?this.basketPosition.y:this.trashPosition.y)<=this.maxCupDistance},i.prototype.CheckForWin=function(){for(var t=!0,e=0,s=this.items;e<s.length;e++){if(!s[e].sortedCorrectly){t=!1;break}}t?this.triggerWin():this.sortedItemsCount===this.items.length&&this.triggerLose(500)},i.prototype._update=function(t,e){this.ghost.x=Phaser.Math.Interpolation.SmoothStep(.1,this.ghost.x,this.input.activePointer.x)},i.prototype._timeout=function(){this.triggerLose(0)},i.prototype._afterLoss=function(){},i.prototype._afterWin=function(){},i.prototype.triggerLose=function(t){this.loseGame(t)},i.prototype.triggerWin=function(){var t=this,s=this.add.image(238,685,e.CONST.SORT.WIN_GHOST).setDepth(502);this.time.delayedCall(400,function(){t.add.image(0,0,e.CONST.SORT.WIN_BACKGROUND).setOrigin(0,0).setDepth(500)},null,this),this.tweens.add({targets:s,x:230.8,y:244.8,ease:"Sine.easeOut",duration:1700,delay:500,repeat:0,yoyo:!1}),this.winGame(3e3)},i}(s.MinigameScene);exports.SortScene=i;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"isVz":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=require("./generic/MinigameScene"),s=function(i){function s(){var t=i.call(this,{sceneName:e.CONST.SCENES.JUMPSCARE,duration:16e3,showCountdown:!0,startScreenColor:16731623,startText:"PLAY!",startTextColor:3289650,nextScene:e.CONST.SCENES.COMEDIAN,endButtons:{normalNoSkip:{x:426.5,y:421,scale:1},normalWithSkip:{x:314.5,y:421,scale:1},skip:{x:538.5,y:421,scale:1}}})||this;return t.barClickMovement=21.33,t.actualLevelTime=8e3,t.gameStarted=!1,t.barYSpeed=133.33,t.onGameStarted=function(){t.gameplayTimer.timeScale=0},t}return t(s,i),s.prototype._init=function(){this.bar=null,this.jack=null,this.gameStarted=!1,this.barYSpeed=133.33},s.prototype._preload=function(){},s.prototype._create=function(){this.calculateBarYSpeed(),this.createBackground(),this.createJack(),this.createText(),this.createButton(),this.createBar()},s.prototype.calculateBarYSpeed=function(){var t=this.registry.get(e.CONST.REGISTRY.JUMPSCARE_ATTEMPTS);this.registry.set(e.CONST.REGISTRY.JUMPSCARE_ATTEMPTS,t+1),this.barYSpeed-=53.3*Math.log(t)/Math.log(7)},s.prototype.createBackground=function(){this.addBackgroundImage(e.CONST.JUMPSCARE.BACKGROUND),this.add.image(184,111,e.CONST.JUMPSCARE.WALLPAPER).setDepth(1),this.add.image(581,306,e.CONST.JUMPSCARE.TABLE).setDepth(2),this.add.image(347,248,e.CONST.JUMPSCARE.CHAIR).setDepth(3)},s.prototype.createJack=function(){var t=this,i={body:this.add.image(367,207,e.CONST.JUMPSCARE.JACK).setDepth(4),hands:{first:[this.add.image(386,213,e.CONST.JUMPSCARE.ARM_1).setDepth(5),this.add.image(383,188,e.CONST.JUMPSCARE.ARM_2).setDepth(3)],second:[this.add.image(386,195,e.CONST.JUMPSCARE.ARM_1).setDepth(5).setAngle(-27),this.add.image(383,210,e.CONST.JUMPSCARE.ARM_2).setDepth(3).setAngle(22)]},firstHandsVisible:!0,normalFace:this.add.image(356,141,e.CONST.JUMPSCARE.NORMAL_EYES).setDepth(6),scaredFace:this.add.image(356,143.5,e.CONST.JUMPSCARE.SCARED_EYES).setDepth(6).setVisible(!1),playTV:this.add.image(468,0,e.CONST.JUMPSCARE.TV_PLAY).setOrigin(0).setDepth(6),scareTV:this.add.image(468,0,e.CONST.JUMPSCARE.TV_SCARE).setOrigin(0).setDepth(6).setVisible(!1),onButtonPress:function(){i.firstHandsVisible=!i.firstHandsVisible,i.hands.first.forEach(function(t){t.setVisible(i.firstHandsVisible)}),i.hands.second.forEach(function(t){t.setVisible(!i.firstHandsVisible)})},animateScared:function(){i.normalFace.setVisible(!1),i.scaredFace.setVisible(!0),i.playTV.setVisible(!1),i.scareTV.setVisible(!0),i.hands.first.forEach(function(t){t.setVisible(!1)}),i.hands.second.forEach(function(t){t.setVisible(!1)}),t.addAnimation(e.CONST.JUMPSCARE.ARM_1,e.CONST.ANIMATIONS.SCARYARM_FRONT).setImageOrigin(.02733,.1334).setDepth(5).setLoop(!0).start(),t.addAnimation(e.CONST.JUMPSCARE.ARM_2,e.CONST.ANIMATIONS.SCARYARM_BACK).setImageOrigin(.0205,.8977).setDepth(3).setLoop(!0).start()}};i.onButtonPress(),this.jack=i},s.prototype.createText=function(){this.clickText=this.add.image(155,452,e.CONST.JUMPSCARE.CLICK_TEXT).setDepth(2),this.fastText=this.add.image(157,457,e.CONST.JUMPSCARE.FAST_TEXT).setDepth(2).setVisible(!1)},s.prototype.createButton=function(){this.button=this.add.image(157,336,e.CONST.JUMPSCARE.BUTTON).setInteractive(this.input.makePixelPerfect()).setDepth(5).setAlpha(1),this.buttonPressed=this.add.image(157,344,e.CONST.JUMPSCARE.BUTTON_PRESSED).setDepth(5).setAlpha(0),this.button.on("pointerdown",function(t,i){this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&(this.customStartGame(),this.button.setAlpha(0),this.buttonPressed.setAlpha(1),this.jack.onButtonPress(),this.bar.onButtonPress(),this.sound.play(e.CONST.AUDIO.CLICK,{detune:this.getDetune()}))},this),this.input.on("pointerup",function(t,i,s){this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&(this.button.setAlpha(1),this.buttonPressed.setAlpha(0),this.sound.play(e.CONST.AUDIO.CLICK,{detune:this.getDetune()}))},this)},s.prototype.createBar=function(){var t=this,i={background:this.add.image(40,327,e.CONST.JUMPSCARE.BAR).setDepth(6),clicker:this.add.image(41,439,e.CONST.JUMPSCARE.BAR_LINE).setDepth(8),limits:{bottom:438,top:212},onUpdate:function(s){t.isCurrentState(e.CONST.GAMESTATE.WIN)||(i.clicker.y+=t.barYSpeed*s/1e3,i.clicker.y>i.limits.bottom&&(i.clicker.y=i.limits.bottom))},onButtonPress:function(){i.clicker.y-=t.barClickMovement,i.clicker.y<i.limits.top&&(i.clicker.y=i.limits.top,t.triggerWin())}};this.bar=i},s.prototype._update=function(t,e){this.bar.onUpdate(e)},s.prototype.customStartGame=function(){var t=this;this.gameStarted||(this.gameStarted=!0,this.gameplayTimer.timeScale=1,this.time.delayedCall(this.actualLevelTime,function(){t._timeout()},null,this),this.time.delayedCall(this.actualLevelTime-5e3,function(){t.switchText()},null,this))},s.prototype.switchText=function(){this.clickText.setVisible(!1),this.fastText.setVisible(!0)},s.prototype._timeout=function(){this.triggerLose()},s.prototype._afterLoss=function(){},s.prototype._afterWin=function(){},s.prototype.triggerLose=function(){if(this.isCurrentState(e.CONST.GAMESTATE.PLAYING)){this.sound.play(e.CONST.AUDIO.SCARE2);this.add.image(0,0,e.CONST.JUMPSCARE.SCARE_SCREEN).setOrigin(0).setDepth(200);this.cameras.main.shake(1e3,.03),this.loseGame(1e3)}},s.prototype.triggerWin=function(){this.sound.play(e.CONST.AUDIO.SCARE1),this.winGame(2e3),this.jack.animateScared()},s}(i.MinigameScene);exports.JumpscareScene=s;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"SG5b":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=require("./generic/MinigameScene"),n=function(i){function n(){var t=i.call(this,{sceneName:e.CONST.SCENES.GHOSTBUSTERS,duration:2e4,showCountdown:!1,startScreenColor:1710618,startText:"BUST\nOUT!",startTextColor:16777215,startTextYOrigin:.35,endScreen:e.CONST.GHOSTBUSTERS.END,nextScene:e.CONST.SCENES.HEAVENHELL,endButtons:{normalNoSkip:{x:426.5,y:365,scale:1.25},normalWithSkip:{x:283,y:365,scale:1.25},skip:{x:570,y:365,scale:1.25}}})||this;return t.worldColliders=[{x:424,y:230,width:162,height:144},{x:434.5,y:313,width:533,height:18},{x:643,y:394,width:114,height:16},{x:430.5,y:396,width:113,height:16},{x:206.5,y:394.5,width:101,height:9},{x:534,y:7,width:548,height:12},{x:829,y:244.5,width:46,height:467},{x:162.5,y:354.5,width:11,height:63},{x:164,y:151,width:6,height:300},{x:245.5,y:119.5,width:7,height:233},{x:24.5,y:269.5,width:43,height:413}],t.spikeColliders=[{x:57.5,y:271.5,width:21,height:401},{x:145.5,y:197,width:13,height:382},{x:260,y:115.5,width:16,height:199},{x:257,y:222,width:10,height:14},{x:147,y:392.5,width:8,height:7}],t.winZones=[{x:203.5,y:24.5,width:67,height:43}],t.moveSensitivity=.1,t.spinnerRotationSpeed=-90,t.laserSwitchFrequency=1200,t.cannonConfig={interval:1300,topStartPosition:{x:829,y:353.3},topEndPosition:179,bottomStartPosition:{x:829,y:440.8},bottomEndPosition:86,ballSpeed:-4.4},t.hasGradient=!1,t.pointerOffset=null,t.balls=[],t}return t(n,i),n.prototype._init=function(){this.ghost=null,this.spinner=null,this.hasGradient=!1,this.balls=[],this.pointerOffset=null},n.prototype._preload=function(){},n.prototype._create=function(){this.initPhysics(),this.addBackgroundImage(e.CONST.GHOSTBUSTERS.BACKGROUND),this.add.image(96,33,e.CONST.PROTECT.DRAG_TEXT).setTint(8882062).setScale(.32).setDepth(1),this.createLevel(),this.spawnGhost(),this.createStartGradient()},n.prototype.initPhysics=function(){var t=this;this.matter.world.setBounds(0,0,this.game.renderer.width,this.game.renderer.height),this.worldColliders.forEach(function(e){t.matter.add.rectangle(e.x,e.y,e.width,e.height,{isStatic:!0})}),this.spikeColliders.forEach(function(e){t.matter.add.rectangle(e.x,e.y,e.width,e.height,{label:"killer",isStatic:!0})}),this.winZones.forEach(function(e){t.matter.add.rectangle(e.x,e.y,e.width,e.height,{label:"winZone",isStatic:!0})}),this.collisionPlayer=2,this.matter.world.on("collisionstart",function(t,e,i){"player"!==e.label&&"player"!==i.label||("killer"!==e.label&&"killer"!==i.label||this.ghost.die(),"winZone"!==e.label&&"winZone"!==i.label||this.ghost.win())},this)},n.prototype.createLevel=function(){this.add.image(0,0,e.CONST.GHOSTBUSTERS.LEVEL).setOrigin(0).setDepth(5),this.spawnSpinner(656.3,157.3),this.spawnCannon(866.3,396),this.spawnLaser(463.4,84,this.laserSwitchFrequency,this.laserSwitchFrequency,!0),this.spawnLaser(404.5,84,this.laserSwitchFrequency,this.laserSwitchFrequency,!1),this.spawnLaser(344.9,84,this.laserSwitchFrequency,this.laserSwitchFrequency,!0)},n.prototype.spawnSpinner=function(t,i){var n=this,s=this.matter.add.image(t,i,e.CONST.GHOSTBUSTERS.SPINNER).setDepth(9),a=Phaser.Physics.Matter.Matter.Bodies,o=a.rectangle(t,i,15,270,{label:"killer"}),r=a.rectangle(t,i,270,15,{label:"killer"}),h=Phaser.Physics.Matter.Matter.Body.create({parts:[o,r]});h.isStatic=!0,s.setExistingBody(h),s.onUpdate=function(t){s.setAngle(s.angle+n.spinnerRotationSpeed*t/1e3)},this.spinner=s},n.prototype.spawnCannon=function(t,i){var n=this,s=this.add.image(t,i,e.CONST.GHOSTBUSTERS.CANNON).setDepth(16);s.nextSpawnOnTop=!0,s.spawnNextBall=function(){n.spawnBall(s.nextSpawnOnTop?n.cannonConfig.topStartPosition:n.cannonConfig.bottomStartPosition,n.cannonConfig.ballSpeed,s.nextSpawnOnTop?n.cannonConfig.topEndPosition:n.cannonConfig.bottomEndPosition),n.time.delayedCall(n.cannonConfig.interval,function(){s.nextSpawnOnTop=!s.nextSpawnOnTop,s.spawnNextBall()},null,n)},s.spawnNextBall()},n.prototype.spawnBall=function(t,i,n){var s=this,a=this.matter.add.image(t.x,t.y,e.CONST.GHOSTBUSTERS.BALL,null,{chamfer:{radius:13},label:"killer",ignoreGravity:!0,frictionAir:0,friction:0}).setDepth(15),o=Phaser.Physics.Matter.Matter.Bodies.rectangle(t.x,t.y,28,28,{label:"killer",chamfer:{radius:16}}),r=Phaser.Physics.Matter.Matter.Body.create({parts:[o]});a.setExistingBody(r),a.setIgnoreGravity(!0),a.setFrictionAir(0),a.setCollidesWith([this.collisionPlayer]),a.onUpdate=function(t){a.setVelocity(s.adjustVelocityForDelta(i,t),0),a.x<=n&&(a.setVisible(!1),a.setCollidesWith([]),s.balls.shift(),a.destroy())},this.balls.push(a)},n.prototype.spawnLaser=function(t,i,n,s,a){var o=this,r=this.matter.add.image(t,i,e.CONST.GHOSTBUSTERS.LASER).setDepth(5);this.add.image(t,i,e.CONST.GHOSTBUSTERS.LASER).setDepth(4).setAlpha(.1).setBlendMode(Phaser.BlendModes.ERASE).setScale(.5,1);var h=Phaser.Physics.Matter.Matter.Bodies.rectangle(t,i,7,140,{label:"killer"}),l=Phaser.Physics.Matter.Matter.Body.create({parts:[h]});l.isStatic=!0,r.setExistingBody(l),r.logic={timeToSwitch:n,delay:s,active:a,switchLasers:function(){r.logic.active=!r.logic.active,r.setVisible(r.logic.active),r.setCollidesWith(r.logic.active?[o.collisionPlayer]:[]),o.time.delayedCall(r.logic.timeToSwitch,function(){r.logic.switchLasers()},null,o)}},this.time.delayedCall(s,r.logic.switchLasers(),null,this),r.setCollidesWith([]),r.setVisible(!1)},n.prototype.spawnGhost=function(){var t=this,i={anim:this.addAnimation(e.CONST.FLY.GHOST,e.CONST.ANIMATIONS.GHOST_IDLE).setDepth(10).setImageInteractive().setOffset(-38,-29).setPositionOverride(38,29).setScaleMultiplier(.7).setLoop(!0).start(),body:this.matter.add.image(38,29,e.CONST.FLY.GHOST,null,{chamfer:{radius:55},label:"player",ignoreGravity:!0,frictionAir:.25,friction:0}).setCollisionCategory(this.collisionPlayer).setScale(.22).setVisible(!1),isDragging:!1,isAlive:!0,onUpdate:function(e){if(i.anim.setPositionOverride(i.body.x,i.body.y),i.body.setAngle(0),i.isAlive&&i.isDragging){var n=t.input.activePointer.x+t.pointerOffset.x-i.anim.GetPositionOverride().x,s=t.input.activePointer.y+t.pointerOffset.y-i.anim.GetPositionOverride().y;i.body.setVelocity(t.adjustVelocityForDelta(n*t.moveSensitivity,e),t.adjustVelocityForDelta(s*t.moveSensitivity,e))}},die:function(){t.triggerLose(),i.isAlive=!1,i.anim.setAnimation(t.cache.json.get(e.CONST.ANIMATIONS.GHOST_DIE)).setPlaybackSpeed(1).setLoop(!1).setAnimFinishCallback(function(){i.anim.GetImage().setVisible(!1)})},win:function(){i.isAlive=!1,i.anim.stop(),t.tweens.add({targets:i.anim.GetImage(),alpha:0,y:"-=100",ease:"Quad.easeIn",duration:1e3,repeat:0,yoyo:!1}),t.triggerWin()}};this.input.on("pointerdown",function(t){this.hasGradient&&this.gradient.fadeOut(),this.pointerOffset={x:i.anim.GetPositionOverride().x-t.x,y:i.anim.GetPositionOverride().y-t.y},this.ghost.isDragging=!0},this),this.input.on("pointerup",function(t){this.ghost.isDragging=!1},this),this.ghost=i},n.prototype.createStartGradient=function(){var t=this,i=this.registry.get(e.CONST.REGISTRY.GHOSTBUSTERS_ATTEMPTED);if(this.hasGradient=!i,!i){this.registry.set(e.CONST.REGISTRY.GHOSTBUSTERS_ATTEMPTED,!0);var n=this.add.image(0,0,e.CONST.GHOSTBUSTERS.START_GRADIENT).setOrigin(0).setDepth(100);n.canFade=!0,n.fadeOut=function(){n.canFade&&(n.canFade=!1,t.tweens.add({targets:n,alpha:0,ease:"Linear",duration:1e3,repeat:0,yoyo:!1}))},this.gradient=n}},n.prototype._update=function(t,e){this.ghost.onUpdate(e),this.spinner.onUpdate(e),this.balls.forEach(function(t){return t.onUpdate(e)})},n.prototype._timeout=function(){},n.prototype._afterLoss=function(){},n.prototype._afterWin=function(){},n.prototype.triggerLose=function(){this.loseGame(1500)},n.prototype.triggerWin=function(){this.winGame(1e3)},n}(i.MinigameScene);exports.GhostbustersScene=n;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"vnj5":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),i=require("./generic/MinigameScene"),n=function(i){function n(){var e=i.call(this,{sceneName:t.CONST.SCENES.PROTECT,duration:1e4,showCountdown:!1,startScreenColor:4797696,startText:"PROTECT!",startTextColor:16777215,endScreen:t.CONST.PROTECT.END,nextScene:t.CONST.SCENES.ALAN,endButtons:{normalNoSkip:{x:426.5,y:417,scale:1.2},normalWithSkip:{x:284.5,y:417,scale:1.2},skip:{x:547,y:417,scale:1.2}}})||this;return e.moveSensitivity=.1,e.enemyConfig=[{spawnPos:{x:-172,y:65},image:t.CONST.PROTECT.AXE,rotationSpeed:540,moveSpeed:240,scale:1,colliderW:50,colliderH:150,chamferRadius:16},{spawnPos:{x:957,y:57},image:t.CONST.PROTECT.KNIFE,rotationSpeed:540,moveSpeed:240,scale:1,colliderW:90,colliderH:90,chamferRadius:45},{spawnPos:{x:-131,y:300},image:t.CONST.PROTECT.NINJA,rotationSpeed:0,moveSpeed:240,scale:1,colliderW:130,colliderH:200,chamferRadius:0},{spawnPos:{x:1058,y:121},image:t.CONST.PROTECT.POOP,rotationSpeed:360,moveSpeed:240,scale:1,colliderW:140,colliderH:140,chamferRadius:70},{spawnPos:{x:1009,y:295},image:t.CONST.PROTECT.PORCUPINE,rotationSpeed:0,moveSpeed:240,scale:1,colliderW:100,colliderH:75,chamferRadius:0},{spawnPos:{x:691,y:607},image:t.CONST.PROTECT.KNIFE,rotationSpeed:-540,moveSpeed:240,scale:1,colliderW:90,colliderH:90,chamferRadius:45},{spawnPos:{x:151,y:621},image:t.CONST.PROTECT.POOP,rotationSpeed:360,moveSpeed:240,scale:1,colliderW:140,colliderH:140,chamferRadius:70},{spawnPos:{x:1026,y:580},image:t.CONST.PROTECT.AXE,rotationSpeed:-540,moveSpeed:240,scale:1,colliderW:50,colliderH:150,chamferRadius:16},{spawnPos:{x:1249,y:417},image:t.CONST.PROTECT.NINJA,rotationSpeed:0,moveSpeed:240,scale:-1,colliderW:130,colliderH:200,chamferRadius:0},{spawnPos:{x:-342,y:19},image:t.CONST.PROTECT.POOP,rotationSpeed:360,moveSpeed:240,scale:1,colliderW:140,colliderH:140,chamferRadius:70},{spawnPos:{x:-168,y:469},image:t.CONST.PROTECT.PORCUPINE,rotationSpeed:0,moveSpeed:240,scale:-1,colliderW:100,colliderH:75,chamferRadius:0}],e.enemySpawning={startDelay:1e3,spawnInterval:{min:600,max:1200}},e.enemyTargetPos={x:422,y:146},e.enemyActivationTimer=0,e.nextEnemySpawnTime=0,e.activatedEnemiesCount=0,e.canActivateEnemies=!1,e.enemies=[],e.killedEnemiesCount=0,e.spawnedEnemiesCount=0,e}return e(n,i),n.prototype._init=function(){this.ghost=null,this.lady=null,this.enemies=[],this.killedEnemiesCount=0,this.spawnedEnemiesCount=0,this.enemyActivationTimer=0,this.nextEnemySpawnTime=this.enemySpawning.startDelay,this.activatedEnemiesCount=0,this.canActivateEnemies=!1},n.prototype._preload=function(){},n.prototype._create=function(){this.addBackgroundImage(t.CONST.PROTECT.BACKGROUND).setDepth(1),this.add.image(409,240,t.CONST.PROTECT.BACKGROUND).setDepth(0),this.add.image(700,55,t.CONST.PROTECT.DRAG_TEXT).setScale(.84).setDepth(1).setTint(603194),this.initPhysics(),this.spawnLady(),this.spawnGhost(),this.spawnEnemies()},n.prototype.initPhysics=function(){this.collisionPlayer=2,this.collisionKiller=4,this.collisionLady=8,this.matter.world.on("collisionstart",function(e,t,i){if(t.label.startsWith("killer")||i.label.startsWith("killer")){var n=t.label.startsWith("killer")?t:i;"player"!==t.label&&"player"!==i.label||this.killEnemyWithLabel(n.label),"lady"!==t.label&&"lady"!==i.label||(this.deactivateEnemyWithLabel(n.label),this.lady.kill())}},this)},n.prototype.killEnemyWithLabel=function(e){for(var t=0,i=this.enemies;t<i.length;t++){var n=i[t];if(n.isLabelEqual(e))return void n.kill()}},n.prototype.deactivateEnemyWithLabel=function(e){for(var t=0,i=this.enemies;t<i.length;t++){var n=i[t];if(n.isLabelEqual(e))return void n.deactivate()}},n.prototype.spawnLady=function(){var e=this;this.add.image(300,204,t.CONST.PROTECT.YARN).setDepth(5);var i=this.matter.add.image(412,161,t.CONST.GHOSTBUSTERS.BALL,null,{label:"lady",isStatic:!0}).setScale(1.5,3).setVisible(!1).setCollisionCategory(this.collisionLady);i.bodyAnim=this.addAnimation(t.CONST.PROTECT.LADY,t.CONST.ANIMATIONS.GRANNYDIE_BODY).setLoop(!1).setImagePosition(0).setDepth(3),i.hand1=this.addAnimation(t.CONST.PROTECT.HAND_1,t.CONST.ANIMATIONS.GRANNY_HAND1).setImageOrigin(.0355,.889).setDepth(10).setLoop(!0).start(),i.hand2=this.addAnimation(t.CONST.PROTECT.HAND_2,t.CONST.ANIMATIONS.GRANNY_HAND2).setImageOrigin(.933,.9564).setDepth(10).setLoop(!0).start(),i.kill=function(){i.bodyAnim.start(),i.hand1.setAnimation(e.cache.json.get(t.CONST.ANIMATIONS.GRANNYDIE_HAND1)).setLoop(!1),i.hand2.setAnimation(e.cache.json.get(t.CONST.ANIMATIONS.GRANNYDIE_HAND2)).setLoop(!1),e.triggerLose()},this.lady=i},n.prototype.spawnGhost=function(){var e=this,i={anim:this.addAnimation(t.CONST.FLY.GHOST,t.CONST.ANIMATIONS.GHOST_IDLE).setDepth(10).setImageInteractive().setOffset(-38,-29).setPositionOverride(695,153).setScaleMultiplier(2).setLoop(!0).start(),body:this.matter.add.image(695,153,t.CONST.FLY.GHOST,null,{chamfer:{radius:55},label:"player",ignoreGravity:!0,frictionAir:.25,friction:0}).setCollisionCategory(this.collisionPlayer).setCollidesWith([this.collisionKiller]).setScale(.5).setVisible(!1),isDragging:!1,isAlive:!0,onUpdate:function(t){if(i.anim.setPositionOverride(i.body.x,i.body.y),i.body.setAngle(0),i.isAlive&&i.isDragging){var n=e.input.activePointer.x-i.anim.GetPositionOverride().x,s=e.input.activePointer.y-i.anim.GetPositionOverride().y;i.body.setVelocity(e.adjustVelocityForDelta(n*e.moveSensitivity,t),e.adjustVelocityForDelta(s*e.moveSensitivity,t))}}};i.anim.GetImage().on("pointerdown",function(e){this.canActivateEnemies=!0,this.ghost.isDragging=!0},this),this.input.on("pointerup",function(e){this.ghost.isDragging=!1},this),this.ghost=i},n.prototype.spawnEnemies=function(){var e=this;this.enemyConfig.forEach(function(t){e.spawnedEnemiesCount++,e.spawnEnemy(t)}),this.enemies=this.shuffle(this.enemies)},n.prototype.spawnEnemy=function(e){var t=this,i="killer"+this.spawnedEnemiesCount,n=this.matter.add.image(e.spawnPos.x,e.spawnPos.y,e.image,null,{chamfer:{radius:13},label:i,ignoreGravity:!0,frictionAir:0,friction:0}).setScale(e.scale,1).setDepth(15),s=Phaser.Physics.Matter.Matter.Bodies.rectangle(e.spawnPos.x,e.spawnPos.y,e.colliderW,e.colliderH,{label:i,chamfer:{radius:e.chamferRadius}}),a=Phaser.Physics.Matter.Matter.Body.create({parts:[s]});n.label=i,n.setExistingBody(a),n.setIgnoreGravity(!0),n.setFrictionAir(1),n.setCollisionCategory(this.collisionKiller),n.setCollidesWith([this.collisionPlayer,this.collisionLady]),n.isActive=!1,n.wasKilled=!1,n.moveVector=new Phaser.Math.Vector2(-e.spawnPos.x+this.enemyTargetPos.x,-e.spawnPos.y+this.enemyTargetPos.y).normalize().scale(e.moveSpeed),n.onUpdate=function(t){n.setAngle(n.angle+e.rotationSpeed*t/1e3),n.isActive&&n.setPosition(n.x+n.moveVector.x*t/1e3,n.y+n.moveVector.y*t/1e3)},n.activate=function(){n.isActive=!0},n.kill=function(){n.wasKilled||(n.setScale(-n.scaleX,n.scaleY),n.moveVector.scale(-1),n.wasKilled=!0,t.handleEnemyKilled())},n.deactivate=function(){n.isActive=!1},n.isLabelEqual=function(e){return n.label===e},this.enemies.push(n)},n.prototype.handleEnemyKilled=function(){this.killedEnemiesCount++,this.killedEnemiesCount>=this.enemyConfig.length&&this.triggerWin()},n.prototype._update=function(e,t){this.ghost.onUpdate(t),this.enemies.forEach(function(e){e.onUpdate(t)}),this.activateEnemies(t)},n.prototype.activateEnemies=function(e){this.canActivateEnemies&&(this.activatedEnemiesCount>=this.enemyConfig.length||(this.enemyActivationTimer+=e,this.enemyActivationTimer>this.nextEnemySpawnTime&&(this.enemies[this.activatedEnemiesCount].activate(),this.enemyActivationTimer=0,this.activatedEnemiesCount++,this.nextEnemySpawnTime=this.getRandomInt(this.enemySpawning.spawnInterval.min,this.enemySpawning.spawnInterval.max))))},n.prototype.shuffle=function(e){var t,i,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),i=e[n],e[n]=e[t],e[t]=i;return e},n.prototype._timeout=function(){},n.prototype._afterLoss=function(){},n.prototype._afterWin=function(){},n.prototype.triggerLose=function(){this.loseGame(1e3)},n.prototype.triggerWin=function(){var e=this;this.time.delayedCall(2e3,function(){e.winAnimDelayed()},null,this),this.winGame(3500)},n.prototype.winAnimDelayed=function(){this.addAnimation(t.CONST.PROTECT.WIN_SCREEN,t.CONST.ANIMATIONS.WIN_IMAGE_POPUP).setDepth(300).setLoop(!1).start()},n}(i.MinigameScene);exports.ProtectScene=n;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"jmcL":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),a=require("./generic/MinigameScene"),i=function(a){function i(){var e=a.call(this,{sceneName:t.CONST.SCENES.ALAN,duration:2e4,showCountdown:!0,startScreenColor:16771382,startText:"REVENGE!",startTextColor:3289650,endScreen:t.CONST.ALAN.END,nextScene:t.CONST.SCENES.JUMPSCARE,endButtons:{normalNoSkip:{x:426.5,y:386,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}}})||this;return e.objectConfig=[{x:251,y:329,angle:0,scale:1,image:t.CONST.ALAN.MUG,isPaper:!1},{x:390,y:404,angle:0,scale:1,image:t.CONST.ALAN.PENCIL,isPaper:!1},{x:389,y:378,angle:0,scale:1,image:t.CONST.ALAN.PEN,isPaper:!1},{x:360,y:435,angle:0,scale:1,image:t.CONST.ALAN.RUBBER,isPaper:!1},{x:239,y:413,angle:0,scale:1,image:t.CONST.ALAN.NAPIS,isPaper:!1},{x:39,y:206,angle:315,scale:1,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:205,y:177,angle:0,scale:1,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:146,y:173,angle:64,scale:1.18,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:100,y:195,angle:291,scale:1.23,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:194,y:220,angle:310,scale:1.383,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:151,y:237,angle:295,scale:.8,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:94,y:322,angle:295,scale:.71,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:45,y:257,angle:180,scale:1.22,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:124,y:283,angle:84,scale:1.34,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:36,y:329,angle:117,scale:1,image:t.CONST.ALAN.LEAF,isPaper:!1},{x:630,y:430,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_7,isPaper:!0},{x:630,y:425,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_6,isPaper:!0},{x:630,y:420,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_5,isPaper:!0},{x:630,y:415,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_4,isPaper:!0},{x:630,y:410,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_2,isPaper:!0},{x:630,y:405,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_3,isPaper:!0},{x:630,y:400,angle:0,scale:.7,image:t.CONST.ALAN.PAPER_1,isPaper:!0}],e.objects=[],e.papers=[],e.flyingObjectCount=0,e.currentPaper=0,e}return e(i,a),i.prototype._init=function(){this.alan=null,this.objects=[],this.papers=[],this.flyingObjectCount=0,this.currentPaper=0},i.prototype._preload=function(){},i.prototype._create=function(){this.initPhysics(),this.createStaticImages(),this.createAlan(),this.createDraggableObjects(),this.updatePapers()},i.prototype.initPhysics=function(){this.matter.world.setBounds(0,0,this.game.renderer.width,this.game.renderer.height),this.wallCategory=2,this.matter.add.rectangle(-30,240,60,480,{label:"walll",isStatic:!0,collisionFilter:{category:this.wallCategory}}),this.matter.add.rectangle(883,240,60,480,{label:"walll",isStatic:!0,collisionFilter:{category:this.wallCategory}}),this.matter.add.rectangle(426.5,-30,853,60,{label:"walll",isStatic:!0,collisionFilter:{category:this.wallCategory}}),this.matter.add.rectangle(426.5,510,853,60,{label:"walll",isStatic:!0,collisionFilter:{category:this.wallCategory}})},i.prototype.createStaticImages=function(){this.addBackgroundImage(t.CONST.ALAN.BACKGROUND),this.add.image(392,227,t.CONST.ALAN.CLOUDS).setDepth(1),this.add.image(425,413,t.CONST.ALAN.TABLE).setDepth(10),this.add.image(429,237,t.CONST.ALAN.WINDOWS).setDepth(2),this.add.image(94,330,t.CONST.ALAN.PLANT).setDepth(11),this.add.image(427,54,t.CONST.PROTECT.DRAG_TEXT).setDepth(1).setScale(.73).setTint(4736636).setAlpha(.88)},i.prototype.createAlan=function(){var e=this,a=this.add.image(426,260,t.CONST.ALAN.ALAN).setDepth(5);a.sadMouth=this.add.image(424,265,t.CONST.ALAN.ALAN_SADMOUTH).setVisible(!1).setDepth(6),a.sadderMouth=this.add.image(427,252,t.CONST.ALAN.ALAN_SADDERMOUTH).setVisible(!1).setDepth(6),a.onUpdate=function(){a.sadMouth.setPosition(a.x-2,a.y+5),a.sadderMouth.setPosition(a.x+1,a.y-8)},a.scare1=function(){a.currentTween=e.tweens.add({targets:a,y:"+=22.4",ease:"Linear",duration:500,repeat:0,yoyo:!1}),a.sadMouth.setVisible(!0),a.sadderMouth.setVisible(!1)},a.scare2=function(){a.currentTween.stop(),a.currentTween=e.tweens.add({targets:a,y:"+=62.4",ease:"Linear",duration:500,repeat:0,yoyo:!1}),a.sadMouth.setVisible(!1),a.sadderMouth.setVisible(!0)},a.scare3=function(){a.currentTween.stop(),a.currentTween=e.tweens.add({targets:a,y:"+=124",ease:"Linear",duration:500,repeat:0,yoyo:!1})},a.startShaking=function(){e.tweens.add({targets:a,x:"+=3",ease:"Linear",duration:100,repeat:-1,yoyo:!0})},this.alan=a},i.prototype.createDraggableObjects=function(){var e=this;this.dragCategory=4,this.objectConfig.forEach(function(a){var i=e.matter.world.nextGroup(!1),s=e.matter.add.image(a.x,a.y,a.image,null,{chamfer:{radius:0},ignoreGravity:!0,frictionAir:0,friction:0}).setDepth(12).setScale(a.scale).setAngle(-a.angle).setBounce(1).setCollisionGroup(i).setCollidesWith([e.wallCategory,e.dragCategory]);s.isFlying=!1,s.isPaper=a.isPaper,s.setMovable=function(t){s.setCollidesWith(t?[e.wallCategory,e.dragCategory]:[e.wallCategory])},s.onUpdate=function(){!s.isFlying&&(Math.abs(s.body.velocity.x)>0||Math.abs(s.body.velocity.y)>0)&&(s.isFlying=!0,s.setDepth(13),e.handleObjectStartedFlying(),s.isPaper&&(e.currentPaper++,e.updatePapers()),e.sound.play(t.CONST.AUDIO.GRAB,{detune:e.getDetune(),volume:.7}))},a.isPaper&&e.papers.unshift(s),e.objects.push(s)}),this.matter.add.mouseSpring({length:0,stiffness:.003,angularStiffness:0,collisionFilter:{category:this.dragCategory,mask:4294967295}})},i.prototype.handleObjectStartedFlying=function(){this.flyingObjectCount++,4==this.flyingObjectCount?(this.alan.startShaking(),this.alan.scare1()):8==this.flyingObjectCount?this.alan.scare2():this.flyingObjectCount>=12&&(this.alan.scare3(),this.triggerWin())},i.prototype.updatePapers=function(){for(var e=0;e<this.papers.length;e++)e==this.currentPaper?this.papers[e].setMovable(!0):e>this.currentPaper&&this.papers[e].setMovable(!1)},i.prototype._update=function(e,t){this.objects.forEach(function(e){return e.onUpdate()}),this.alan.onUpdate()},i.prototype._timeout=function(){this.triggerLose()},i.prototype._afterLoss=function(){},i.prototype._afterWin=function(){},i.prototype.triggerLose=function(){this.loseGame(1e3)},i.prototype.triggerWin=function(){this.winGame(1e3)},i}(a.MinigameScene);exports.AlanScene=i;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"K0zn":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=require("../util/OMGLogger"),s=require("./generic/MinigameScene"),n=function(s){function n(){var t=s.call(this,{sceneName:e.CONST.SCENES.PARTY,duration:21200,timeToStart:1500,showCountdown:!1,startScreenColor:16750848,startText:"PARTY!",startTextColor:3289650,endScreen:e.CONST.PARTY.END,nextScene:e.CONST.SCENES.DRESSUP,endButtons:{normalNoSkip:{x:664,y:300,scale:1.2},normalWithSkip:{x:664,y:300,scale:1.2},skip:{x:398,y:300,scale:1.2}}})||this;return t.noteInfo={pink:{color:"pink",spawnX:712,spawnY:-141,targetX:528,targetY:391,moveSpeed:240,deathY:480,image:e.CONST.PARTY.DOT_PINK},blue:{color:"blue",spawnX:797,spawnY:-141,targetX:614,targetY:391,moveSpeed:240,deathY:480,image:e.CONST.PARTY.DOT_BLUE},green:{color:"green",spawnX:881,spawnY:-141,targetX:698,targetY:391,moveSpeed:240,deathY:480,image:e.CONST.PARTY.DOT_GREEN}},t.buttonInfo=[{color:"pink",x:510,y:437,clickRadius:44,clickYRange:100,image:e.CONST.PARTY.END_PINK},{color:"blue",x:598,y:437,clickRadius:44,clickYRange:100,image:e.CONST.PARTY.END_BLUE},{color:"green",x:686,y:437,clickRadius:44,clickYRange:100,image:e.CONST.PARTY.END_GREEN}],t.ghostConfig=[{x:118,y:356,depth:25,image:e.CONST.PARTY.GHOST_1_BODY},{x:370,y:382,depth:25,image:e.CONST.PARTY.GHOST_2_BODY},{x:256,y:258,depth:12,image:e.CONST.PARTY.GHOST_3_BODY},{x:452,y:183,depth:25,image:e.CONST.PARTY.GHOST_4_BODY}],t.allowedMisses=1,t.currentNoteSpawn=0,t.currentFFTFrame=0,t.timer=0,t.timerOffset=2.6,t.allNotesSpawned=!1,t.skippedNotes=0,t.notes=[],t.buttons=[],t.endMusicTimer=0,t.isEndMusicFading=!1,t.scalableObjects=[],t.isMinigameReady=!1,t.onCommercialEnded=function(){t.isMinigameReady=!0,t.createAfterCommercial()},t}return t(n,s),n.prototype._init=function(){this.currentNoteSpawn=0,this.currentFFTFrame=0,this.endMusicTimer=0,this.timer=this.timerOffset,this.nextNoteSpawn=null,this.allNotesSpawned=!1,this.skippedNotes=0,this.notes=[],this.buttons=[],this.isEndMusicFading=!1,this.scalableObjects=[],this.isMinigameReady=!1},n.prototype._preload=function(){},n.prototype._create=function(){},n.prototype.createAfterCommercial=function(){this.getMusicInfo(),this.createStaticImages(),this.spawnButtons(),this.createDynamicImages(),this.spawnGhosts(),this.createLights()},n.prototype.getMusicInfo=function(){this.notesJson=this.cache.json.get(e.CONST.JSONPARTY.MUSIC),this.nextNoteSpawn=this.notesJson[0],this.fftJson=this.cache.json.get(e.CONST.JSONPARTY.FFT),this.music&&this.music.stop(),this.music=this.sound.add(e.CONST.AUDIO.PARTY_MUSIC),this.music.play(),this.fadeSoundtrack(0,100)},n.prototype.createStaticImages=function(){this.addBackgroundImage(e.CONST.PARTY.BACKGROUND_BACK),this.add.image(0,0,e.CONST.PARTY.BACKGROUND_FRONT).setOrigin(0).setDepth(10),this.add.image(620,124,e.CONST.PARTY.LINE_PINK).setDepth(11),this.add.image(706,126,e.CONST.PARTY.LINE_BLUE).setDepth(11),this.add.image(791,124,e.CONST.PARTY.LINE_GREEN).setDepth(11),this.add.image(327,325,e.CONST.PARTY.GRAVE).setDepth(20),this.add.image(318,205,e.CONST.PARTY.MARTINI).setDepth(20)},n.prototype.spawnButtons=function(){var t=this;this.buttonInfo.forEach(function(e){var i=t.add.image(e.x,e.y,e.image).setDepth(11);i.config=e,i.handleClicked=function(){for(var e=null,s=0,n=t.notes;s<n.length;s++){var o=n[s];o.isAlive&&i.config.color===o.config.color&&Phaser.Math.Distance.Between(i.x,i.y,o.GetPositionOverride().x,o.GetPositionOverride().y)<i.config.clickYRange&&(null===e||o.GetPositionOverride().y>e.GetPositionOverride().y)&&(e=o)}null!==e&&e.handleClicked()},t.buttons.push(i)}),this.input.on("pointerdown",function(t){this.buttons.forEach(function(e){Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<e.config.clickRadius&&e.handleClicked()})},this)},n.prototype.createDynamicImages=function(){this.scalableObjects.push(this.startTextObject),this.scalableObjects.push(this.add.image(159,254,e.CONST.PARTY.LUNA).setDepth(1)),this.scalableObjects.push(this.add.image(107,97,e.CONST.PARTY.BATS).setDepth(12))},n.prototype.spawnGhosts=function(){var t=this;this.ghostConfig.forEach(function(e){t.scalableObjects.push(t.add.image(e.x,e.y,e.image).setDepth(e.depth))})},n.prototype.createLights=function(){this.addAnimation(e.CONST.PARTY.LIGHT_BLUE,e.CONST.ANIMATIONS.BLUE_LIGHT,30).setImageOrigin(.045,.912).setDepth(5).setLoop(!0).start(),this.addAnimation(e.CONST.PARTY.LIGHT_GREEN,e.CONST.ANIMATIONS.GREEN_LIGHT,30).setImageOrigin(.854,.917).setDepth(5).setLoop(!0).start(),this.addAnimation(e.CONST.PARTY.LIGHT_PINK,e.CONST.ANIMATIONS.PINK_LIGHT,30).setImageOrigin(.1267,.953).setDepth(5).setLoop(!0).start()},n.prototype._update=function(t,e){this.isMinigameReady&&(this.spawnMusic(e),this.notes.forEach(function(t){t.onUpdate(e)}),this.fadeEndMusic(e),this.updateFFTScales())},n.prototype.spawnMusic=function(t){this.allNotesSpawned||(this.timer+=t/1e3,this.timer>this.nextNoteSpawn.t&&(this.spawnNote(this.notesJson[this.currentNoteSpawn]),this.currentNoteSpawn++,this.nextNoteSpawn=this.notesJson[this.currentNoteSpawn],this.currentNoteSpawn>=this.notesJson.length)&&(this.allNotesSpawned=!0))},n.prototype.spawnNote=function(t){var s=this,n="p"===t.c?this.noteInfo.pink:"b"===t.c?this.noteInfo.blue:this.noteInfo.green;(t=this.addAnimation(n.image,e.CONST.ANIMATIONS.NOTE_DEATH).setDepth(30).setOffset(-599,-177).setPositionOverride(n.spawnX,n.spawnY).setImagePosition(0).setAnimFinishCallback(function(){t.image.setVisible(!1)}).setLoop(!1)).config=n,t.moveVector=new Phaser.Math.Vector2(n.targetX-n.spawnX,n.targetY-n.spawnY).normalize(),t.isAlive=!0,t.onUpdate=function(e){t.setPositionOverride(t.GetPositionOverride().x+t.moveVector.x*t.config.moveSpeed*e/1e3,t.GetPositionOverride().y+t.moveVector.y*t.config.moveSpeed*e/1e3),t.checkPosition(),t.IsAnimating()||t.setImagePosition(t.isAlive?0:1e3)},t.checkPosition=function(){t.isAlive&&t.GetPositionOverride().y>t.config.deathY&&(s.skippedNotes<s.allowedMisses?(i.OMGLogger.Debug("Missed a note!"),s.skippedNotes++,t.handleClicked()):s.triggerLose())},t.handleClicked=function(){t.isAlive&&(t.isAlive=!1,t.start())},this.notes.push(t)},n.prototype.fadeEndMusic=function(t){if(this.isEndMusicFading){if(this.endMusicTimer+=t,this.endMusicTimer>1e3)return this.music.setVolume(0),this.music.stop(),i.OMGLogger.Debug("Party music stopped!"),void(this.isEndMusicFading=!1);this.music.setVolume(Phaser.Math.Linear(1,0,this.endMusicTimer/1e3))}},n.prototype.updateFFTScales=function(){var t=this.GetCurrentFFTFrame();t!=this.currentFFTFrame&&(this.setFFTScales(t),this.currentFFTFrame=t)},n.prototype.GetCurrentFFTFrame=function(){for(var t=this.currentFFTFrame;t<this.fftJson.length;t++)if(this.fftJson[t].t>this.music.seek)return t;return this.fftJson.length-1},n.prototype.setFFTScales=function(t){var e=this.fftJson[t].s;this.scalableObjects.forEach(function(t){t.setScale(e)}),this.notes.forEach(function(t){t.isAlive&&t.setScaleMultiplier(e)})},n.prototype._timeout=function(){this.triggerWin()},n.prototype._afterLoss=function(){},n.prototype._afterWin=function(){},n.prototype.triggerLose=function(){this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&(i.OMGLogger.Debug("Lose Party minigame"),this.fadeSoundtrack(1,1e3),this.isEndMusicFading=!0,this.loseGame(0))},n.prototype.triggerWin=function(){i.OMGLogger.Debug("Win Party minigame"),this.isEndMusicFading=!0,this.fadeSoundtrack(1,1e3),this.addAnimation(e.CONST.PARTY.WIN_SCREEN,e.CONST.ANIMATIONS.WIN_IMAGE_POPUP).setDepth(300).setLoop(!1).start(),this.winGame(1500)},n}(s.MinigameScene);exports.PartyScene=n;
},{"../CONST":"HmIA","../util/OMGLogger":"x3NR","./generic/MinigameScene":"Qwd5"}],"JBAC":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),n=require("./generic/MinigameScene"),a=function(n){function a(){var e=n.call(this,{sceneName:t.CONST.SCENES.COMEDIAN,duration:1e3,showCountdown:!1,startScreenColor:16733800,startText:"MAKE THEM\nLAUGH!",startTextYOrigin:.35,startTextColor:3289650,endScreen:t.CONST.COMEDIAN.END,nextScene:t.CONST.SCENES.PARTY,endButtons:{normalNoSkip:{x:650,y:282,scale:1.3},normalWithSkip:{x:650,y:282,scale:1.3},skip:{x:650,y:384,scale:1.3}}})||this;return e.winGhosts=[{x:497,y:446,depth:501,image:t.CONST.COMEDIAN.GHOST_1},{x:388,y:431,depth:501,image:t.CONST.COMEDIAN.GHOST_2},{x:272,y:430,depth:501,image:t.CONST.COMEDIAN.GHOST_3},{x:609,y:447,depth:501,image:t.CONST.COMEDIAN.GHOST_4},{x:727,y:458,depth:501,image:t.CONST.COMEDIAN.GHOST_5},{x:812,y:462,depth:501,image:t.CONST.COMEDIAN.GHOST_6},{x:160,y:433,depth:501,image:t.CONST.COMEDIAN.GHOST_7},{x:45,y:457,depth:501,image:t.CONST.COMEDIAN.GHOST_8}],e.ghostMoveDistance=16,e.jokeConfigs=[{question:{x:617,y:57,image:t.CONST.COMEDIAN.JOKE_1_QUESTION},answers:[{x:529,y:152,scale:.81,angle:0,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_1_ANSWER_1},{x:726,y:161,scale:1,angle:16,depth:100,correctAnswer:!0,image:t.CONST.COMEDIAN.JOKE_1_ANSWER_2},{x:714,y:255,scale:.92,angle:-2.8,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_1_ANSWER_3}]},{question:{x:617,y:72,image:t.CONST.COMEDIAN.JOKE_2_QUESTION},answers:[{x:511,y:166,scale:.76,angle:10,depth:100,correctAnswer:!0,image:t.CONST.COMEDIAN.JOKE_2_ANSWER_1},{x:730,y:186,scale:.83,angle:5,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_2_ANSWER_2},{x:717,y:288,scale:.67,angle:-10,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_2_ANSWER_3}]},{question:{x:617,y:80,image:t.CONST.COMEDIAN.JOKE_3_QUESTION},answers:[{x:496,y:174,scale:.66,angle:-18,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_3_ANSWER_2},{x:710,y:203,scale:.81,angle:3.3,depth:100,correctAnswer:!0,image:t.CONST.COMEDIAN.JOKE_3_ANSWER_1},{x:718,y:273,scale:.67,angle:9,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_3_ANSWER_3}]},{question:{x:621,y:63,image:t.CONST.COMEDIAN.JOKE_4_QUESTION},answers:[{x:515,y:157,scale:.87,angle:-6.5,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_4_ANSWER_2},{x:743,y:160,scale:.8,angle:13.3,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_4_ANSWER_3},{x:727,y:258,scale:.76,angle:-10,depth:100,correctAnswer:!0,image:t.CONST.COMEDIAN.JOKE_4_ANSWER_1}]},{question:{x:630,y:73,image:t.CONST.COMEDIAN.JOKE_5_QUESTION},answers:[{x:527,y:167,scale:.91,angle:-1.5,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_5_ANSWER_2},{x:730,y:200,scale:.87,angle:26,depth:100,correctAnswer:!0,image:t.CONST.COMEDIAN.JOKE_5_ANSWER_1},{x:727,y:279,scale:.9,angle:4.5,depth:100,correctAnswer:!1,image:t.CONST.COMEDIAN.JOKE_5_ANSWER_3}]}],e.jokeSpawnDelay=500,e.currentJokeIndex=0,e}return e(a,n),a.prototype._init=function(){this.activeJoke=null,this.currentJokeIndex=0},a.prototype._preload=function(){},a.prototype._create=function(){this.createBackground(),this.initJokes()},a.prototype.createBackground=function(){this.addBackgroundImage(t.CONST.COMEDIAN.BACKGROUND),this.add.image(226,177,t.CONST.COMEDIAN.MIC).setDepth(10);var e=this.add.image(180,125,t.CONST.FLY.GHOST).setDepth(5).setAngle(-6).setScale(.7);this.tweens.add({targets:e,y:"-=4",ease:"Quad.easeInOut",duration:375,repeat:-1,yoyo:!0})},a.prototype.initJokes=function(){this.currentJokeIndex=0,this.spawnJoke(this.currentJokeIndex)},a.prototype.spawnJoke=function(e){var t=this,n=this.jokeConfigs[e],a=this.add.image(n.question.x,n.question.y,n.question.image).setDepth(100);a.answers=[],n.answers.forEach(function(e){var n=t.add.image(e.x,e.y,e.image).setScale(e.scale).setAngle(e.angle).setDepth(e.depth).setInteractive(t.input.makePixelPerfect());n.isCorrect=e.correctAnswer,n.hoverStart=null,n.hoverEnd=null,n.isInteractable=!0,n.on("pointerover",function(){n.isInteractable&&(null!=n.hoverEnd&&n.hoverEnd.stop(),n.hoverStart=this.tweens.add({targets:n,scaleX:1.2*e.scale,scaleY:1.2*e.scale,ease:"Sine.easeOut",duration:83,repeat:0,yoyo:!1}))},t),n.on("pointerout",function(){n.isInteractable&&(null!=n.hoverStart&&n.hoverStart.stop(),n.hoverEnd=this.tweens.add({targets:n,scaleX:e.scale,scaleY:e.scale,ease:"Sine.easeOut",duration:83,repeat:0,yoyo:!1}))},t),n.on("pointerup",function(){n.isInteractable&&(null!=n.hoverStart&&n.hoverStart.stop(),null!=n.hoverEnd&&n.hoverEnd.stop(),this.tweens.timeline({targets:n,ease:"Cubic.easeInOut",duration:500,loop:0,tweens:[{targets:n,scaleX:1.4*e.scale,scaleY:1.4*e.scale,duration:150,repeat:0,yoyo:!1},{targets:n,scaleX:0,scaleY:0,duration:350,repeat:0,yoyo:!1}]}),this.handleAnswerSelected(n.isCorrect))},t),a.answers.push(n)},this),a.endAnimation=function(){t.tweens.add({targets:a,scaleX:0,scaleY:0,ease:"Cubic.easeInOut",duration:500,repeat:0,yoyo:!1});for(var e=0;e<a.answers.length;e++)a.answers[e].isInteractable=!1,a.answers[e].isCorrect||t.tweens.add({targets:a.answers[e],scaleX:0,scaleY:0,ease:"Cubic.easeInOut",duration:500,repeat:0,yoyo:!1})},this.activeJoke=a},a.prototype.handleAnswerSelected=function(e){var t=this;e?(this.activeJoke.endAnimation(),this.currentJokeIndex<this.jokeConfigs.length-1?(this.currentJokeIndex++,this.time.delayedCall(this.jokeSpawnDelay,function(){t.spawnJoke(t.currentJokeIndex)},null,this),this.playWinAudio()):this.time.delayedCall(this.jokeSpawnDelay,function(){t.triggerWin()},null,this)):this.triggerLose()},a.prototype._update=function(e,t){},a.prototype._timeout=function(){},a.prototype._afterLoss=function(){},a.prototype._afterWin=function(){},a.prototype.triggerLose=function(){this.add.image(0,0,t.CONST.COMEDIAN.LOSEIMAGE).setDepth(500).setOrigin(0),this.loseGame(2e3)},a.prototype.triggerWin=function(){this.showWin(),this.winGame(2500)},a.prototype.showWin=function(){var e=this;this.add.image(0,0,t.CONST.COMEDIAN.WIN_BACKGROUND).setDepth(500).setOrigin(0),this.addAnimation(t.CONST.COMEDIAN.HANDS_1,t.CONST.ANIMATIONS.COMEDIAN_HAND_1,30).setDepth(510).setLoop(!0).setImageOrigin(.898,.592).start(),this.addAnimation(t.CONST.COMEDIAN.HANDS_2,t.CONST.ANIMATIONS.COMEDIAN_HAND_2,30).setDepth(510).setLoop(!0).setImageOrigin(.033,.753).start(),this.winGhosts.forEach(function(t){var n=e.add.image(t.x,t.y,t.image).setDepth(t.depth),a=e.getRandomInt(-e.ghostMoveDistance,e.ghostMoveDistance);n.x-=a,e.tweens.add({targets:n,x:n.x+2*a,ease:"Linear",duration:e.getRandomInt(100,200),repeat:-1,yoyo:!0,progress:Math.random()})})},a}(n.MinigameScene);exports.ComedianScene=a;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"GHio":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),i=require("./generic/MinigameScene"),s=function(i){function s(){var e=i.call(this,{sceneName:t.CONST.SCENES.FLY,duration:1e3,showCountdown:!1,startScreenColor:12194579,startText:"FLY!",startTextColor:16777215,endScreen:t.CONST.FLY.END,nextScene:t.CONST.SCENES.PROTECT,endButtons:{normalNoSkip:{x:426.5,y:398,scale:1.3},normalWithSkip:{x:283,y:398,scale:1.3},skip:{x:570,y:398,scale:1.3}}})||this;return e.grassConfig=[{x:290,y:513.5,scaleX:1,image:t.CONST.FLY.START_GRASS},{x:922,y:489,scaleX:-1,image:t.CONST.FLY.GRASS_2},{x:1439,y:489,scaleX:1,image:t.CONST.FLY.GRASS_2},{x:1956,y:489,scaleX:-1,image:t.CONST.FLY.GRASS_2},{x:2476,y:495,scaleX:1,image:t.CONST.FLY.GRASS_1},{x:2996,y:495,scaleX:1,image:t.CONST.FLY.GRASS_1},{x:5586,y:495,scaleX:1,image:t.CONST.FLY.GRASS_1},{x:5067,y:495,scaleX:-1,image:t.CONST.FLY.GRASS_1},{x:4547,y:489,scaleX:1,image:t.CONST.FLY.GRASS_2},{x:4029,y:489,scaleX:1,image:t.CONST.FLY.GRASS_2},{x:3512,y:489,scaleX:-1,image:t.CONST.FLY.GRASS_2},{x:-350,y:489,scaleX:1,image:t.CONST.FLY.GRASS_2}],e.ghostConfig={xSpeed:266,maxYSpeed:-267,maxYPosition:-134,upForce:3200,gravity:785,startAngle:-275,maxAngle:-20,winXPosition:5584},e.cameraZoom=4.5/7,e.onGameStarted=function(){e.setCameraZoom(!0)},e}return e(s,i),s.prototype._init=function(){this.ghost=null},s.prototype._preload=function(){},s.prototype._create=function(){this.initPhysics(),this.addStaticImages(),this.createLevel(),this.spawnGhost(this.ghostConfig),this.startCameraFollow(),this.createParticles()},s.prototype.createParticles=function(){var e=this.add.particles(t.CONST.MENU.STAR_PARTICLE).setDepth(1),i={active:!0,visible:!0,on:!1,radial:!0,frequency:1e3,gravityY:0,timeScale:1,maxParticles:1500,blendMode:0,lifespan:1e4,alpha:{start:0,end:1,ease:"Quad.easeOut"},scale:{start:1,end:0,ease:"Linear"},quantity:{ease:"Linear",min:0,max:10},emitZone:{source:new Phaser.Geom.Rectangle(0,0,6700,800),type:"random"},speed:{ease:"Linear",min:0,max:27},x:-600,y:-500};e.createEmitter(i).flow(500,50)},s.prototype.initPhysics=function(){this.physicsShapes=this.cache.json.get(t.CONST.PHYSICS.FLY_SHAPES),this.matter.add.rectangle(3100,425,6700,95,{label:"ground",isStatic:!0}),this.matter.world.on("collisionstart",function(e,t,i){this.ghost.die(),this.triggerLose()},this)},s.prototype.addStaticImages=function(){this.add.image(2201,66,t.CONST.FLY.BACKGROUND).setScale(400,1.63).setDepth(0),this.add.image(58,239,t.CONST.FLY.HOLD_TEXT).setDepth(1),this.add.image(5113,-42,t.CONST.FLY.GRADIENT).setDepth(30).setScale(1.2,6*1.2),this.add.image(6306,240,t.CONST.FLY.WHITE_SQUARE).setDepth(29).setScale(13.0308,17.52),this.createGrass()},s.prototype.createGrass=function(){var e=this;this.grassConfig.forEach(function(t){e.add.image(t.x,t.y,t.image).setDepth(2).setScale(1.2*t.scaleX,1)}),this.add.graphics({fillStyle:{color:5851715,alpha:1}}).fillRect(-600,600,8e3,300).setDepth(100)},s.prototype.createLevel=function(){this.matter.add.image(1748,300,t.CONST.FLY.FOUNTAIN,void 0,{shape:this.physicsShapes.foutain}).setScale(1.2).setDepth(9),this.matter.add.image(3374,-196,t.CONST.FLY.MOON,void 0,{shape:this.physicsShapes.moon}).setScale(-1.2,1.2).setDepth(9).setAngle(-38),this.matter.add.image(2188,-215,t.CONST.FLY.TWIG,void 0,{shape:this.physicsShapes.twig}).setDepth(9).setScale(2.855*.6),this.matter.add.image(2842,265,t.CONST.FLY.LIGHT,void 0,{shape:this.physicsShapes["light-2"]}).setScale(.5).setDepth(9),this.matter.add.image(3798,274,t.CONST.FLY.TWIG,void 0,{shape:this.physicsShapes.twig}).setScale(.6,-.6).setDepth(9),this.matter.add.image(4376,2.7,t.CONST.FLY.SPIDER_1,void 0,{shape:this.physicsShapes["spider-1"]}).setScale(1.413*.52).setDepth(9),this.matter.add.image(4454,-154,t.CONST.FLY.SPIDER_2,void 0,{shape:this.physicsShapes["spider-2"]}).setScale(1.6032).setDepth(9),this.matter.add.image(4296,-121,t.CONST.FLY.SPIDER_3,void 0,{shape:this.physicsShapes["spider-3"]}).setScale(1.52*1.2).setDepth(9),this.add.image(4294.6,-385,t.CONST.FLY.SPIDER_LINE).setScale(.77,1.33).setDepth(8),this.add.image(4460,-454,t.CONST.FLY.SPIDER_LINE).setScale(.77,1.33).setDepth(8),this.add.image(4377.6,-292,t.CONST.FLY.SPIDER_LINE).setScale(1.08,1.866).setDepth(8)},s.prototype.spawnGhost=function(e){var i=this,s=this.matter.add.image(344,262,t.CONST.FLY.GHOST,null,{shape:this.physicsShapes.duhc}).setIgnoreGravity(!0).setDepth(20).setScale(-.7,.7).setAngle(8);s.isActive=!1,s.isAlive=!0,s.isHolding=!1,s.yVelocity=0,s.xVelocity=e.xSpeed,s.updateVelocity=function(t){s.isActive&&(s.isHolding&&s.yVelocity>e.maxYSpeed&&s.y>e.maxYPosition&&(s.yVelocity-=e.upForce*t/1e3),s.isHolding&&s.yVelocity<=e.maxYSpeed&&s.y>e.maxYPosition||(s.yVelocity+=e.gravity*t/1e3))},s.die=function(){s.isAlive=!1},s.move=function(t){s.isActive&&s.isAlive&&(s.x+=s.xVelocity*t/1e3,s.y+=s.yVelocity*t/1e3,s.angle=e.startAngle+s.yVelocity/e.maxYSpeed*e.maxAngle,s.x>e.winXPosition&&(s.isAlive=!1,i.triggerWin()))},s.onUpdate=function(e){s.updateVelocity(e),s.move(e)},this.input.on("pointerdown",function(e){i.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(i.ghost.isActive=!0,i.ghost.isHolding=!0)},this),this.input.on("pointerup",function(){i.ghost.isHolding=!1},this),this.ghost=s},s.prototype.startCameraFollow=function(){this.cameras.main.startFollow(this.ghost)},s.prototype._update=function(e,t){this.ghost.onUpdate(t)},s.prototype._timeout=function(){},s.prototype._afterLoss=function(){},s.prototype._afterWin=function(){},s.prototype.triggerLose=function(){var e=this;this.time.delayedCall(500,function(){e.setCameraZoom(!1)},[],this),this.loseGame(500)},s.prototype.triggerWin=function(){this.setCameraZoom(!1),this.winAnimation(),this.winGame(3e3)},s.prototype.winAnimation=function(){var e=this,i=this.add.image(this.ghost.x,this.ghost.y,t.CONST.FLY.WIN_IMAGE).setDepth(500).setAlpha(0);this.tweens.add({targets:i,alpha:1,ease:"Linear",duration:500,repeat:0,yoyo:!1}),this.time.delayedCall(1e3,function(){e.addAnimation(t.CONST.FLY.WIN_GHOST,t.CONST.ANIMATIONS.FLY_WIN,30).setOffset(e.ghost.x-426.5,e.ghost.y-240).setDepth(550).setLoop(!1).start()},[],this)},s.prototype.setCameraZoom=function(e){this.cameras.main.setZoom(e?this.cameraZoom:1)},s}(i.MinigameScene);exports.FlyScene=s;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"HNZL":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../CONST"),i=require("./generic/MinigameScene"),a=function(i){function a(){var e=i.call(this,{sceneName:t.CONST.SCENES.HEAVENHELL,duration:2e4,showCountdown:!1,startScreenColor:5379472,startText:"CHOOSE!",startTextColor:16777215,endScreen:t.CONST.HEAVENHELL.END,nextScene:t.CONST.SCENES.CREDITS,endButtons:{normalNoSkip:{x:426.5,y:386,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}}})||this;return e.clickableWidth=100,e.clickerSwingTime=750,e.swingStartX=162,e.swingEndX=691,e.cameraFollowConfig={lerp:.8,offsetX:0,offsetY:75},e.startButtonConfig=[{x:274,y:32.8,image:t.CONST.HEAVENHELL.SIGN_HELL,onClick:function(){e.startHellMinigame()},firstYMove:24.5,secondYMove:-264.5},{x:618.72,y:316,image:t.CONST.HEAVENHELL.SIGN_HEAVEN,onClick:function(){e.startHeavenMinigame()},firstYMove:-24.5,secondYMove:264.5}],e.hellGhostConfig={scaleX:-1,image:t.CONST.HEAVENHELL.GHOST_SIDE,moveSpeed:107,winPos:{x:-1895,y:-81},losePos:{x:-1640,y:306}},e.hellDuckConfig=[{startX:-206,startY:404,endX:-400,endY:461,tweenTime:2e3,scaleX:-1,scaleY:1,image:t.CONST.HEAVENHELL.NORMAL_DUCK,shape:"suck-a-duck"},{startX:-568,startY:390,endX:-575,endY:254,tweenTime:2e3,scaleX:1,scaleY:1,image:t.CONST.HEAVENHELL.EVIL_DUCK,shape:"duck-devil"},{startX:-874,startY:464,endX:-881,endY:329,tweenTime:2e3,scaleX:1,scaleY:1,image:t.CONST.HEAVENHELL.EVIL_DUCK,shape:"duck-devil"},{startX:-1222,startY:265,endX:-1057,endY:186,tweenTime:2e3,scaleX:1,scaleY:1,image:t.CONST.HEAVENHELL.NORMAL_DUCK,shape:"suck-a-duck"},{startX:-1275,startY:109,endX:-987,endY:-77,tweenTime:2e3,scaleX:1,scaleY:1,image:t.CONST.HEAVENHELL.EVIL_DUCK,shape:"duck-devil"},{startX:-1298,startY:-61,endX:-1508,endY:-257,tweenTime:2e3,scaleX:-1,scaleY:1,image:t.CONST.HEAVENHELL.NORMAL_DUCK,shape:"suck-a-duck"},{startX:-1340,startY:558,endX:-1219,endY:355,tweenTime:2e3,scaleX:1,scaleY:1,image:t.CONST.HEAVENHELL.EVIL_DUCK,shape:"duck-devil"}],e.heavenSteps=[{x:612,y:191},{x:665,y:140},{x:715,y:90},{x:768,y:38},{x:819,y:-14},{x:870,y:-66},{x:921,y:-117},{x:970,y:-168},{x:1021,y:-221},{x:1074,y:-271},{x:1128,y:-322},{x:1179,y:-375},{x:1233,y:-427},{x:1282,y:-477},{x:1331,y:-527},{x:1386,y:-584},{x:1434,y:-634},{x:1487,y:-684},{x:1541,y:-736},{x:1589,y:-788},{x:1661,y:-839}],e.heavenClouds=[{scrollFactor:2,depth:10,clouds:[{x:920,y:-209,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1271,y:-505,image:t.CONST.HEAVENHELL.CLOUD_7},{x:729,y:102,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1064,y:-458,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1704,y:-1192,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1912,y:-1239,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1561,y:-943,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1370,y:-633,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1237,y:-30,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1429,y:-340,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1557,y:-1279,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1764,y:-1326,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1413,y:-1029,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1222,y:-719,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1090,y:-116,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1281,y:-427,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1632,y:-723,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1425,y:-676,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1780,y:-637,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1572,y:-590,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2080,y:-652,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2287,y:-699,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1936,y:-402,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1745,y:-92,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1877,y:-694,image:t.CONST.HEAVENHELL.CLOUD_2},{x:2069,y:-1005,image:t.CONST.HEAVENHELL.CLOUD_5},{x:2419,y:-1301,image:t.CONST.HEAVENHELL.CLOUD_7},{x:2212,y:-1254,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2227,y:-565,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2435,y:-612,image:t.CONST.HEAVENHELL.CLOUD_7},{x:2084,y:-316,image:t.CONST.HEAVENHELL.CLOUD_5}]},{scrollFactor:1.5,depth:9,clouds:[{x:1748,y:-1125,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1955,y:-1172,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1604,y:-875,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1413,y:-565,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1545,y:-1167,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1736,y:-1478,image:t.CONST.HEAVENHELL.CLOUD_5},{x:2087,y:-1774,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1880,y:-1727,image:t.CONST.HEAVENHELL.CLOUD_1},{x:866,y:-346,image:t.CONST.HEAVENHELL.CLOUD_4},{x:1126,y:-348,image:t.CONST.HEAVENHELL.CLOUD_3},{x:866,y:-561,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1074,y:-608,image:t.CONST.HEAVENHELL.CLOUD_7},{x:723,y:-311,image:t.CONST.HEAVENHELL.CLOUD_5},{x:532,y:-1,image:t.CONST.HEAVENHELL.CLOUD_2},{x:399,y:602,image:t.CONST.HEAVENHELL.CLOUD_2},{x:591,y:291,image:t.CONST.HEAVENHELL.CLOUD_5},{x:942,y:-5,image:t.CONST.HEAVENHELL.CLOUD_7},{x:734,y:42,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2054,y:-546,image:t.CONST.HEAVENHELL.CLOUD_1},{x:2262,y:-593,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1911,y:-296,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1719,y:14,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1852,y:-588,image:t.CONST.HEAVENHELL.CLOUD_2},{x:2043,y:-899,image:t.CONST.HEAVENHELL.CLOUD_5},{x:2394,y:-1195,image:t.CONST.HEAVENHELL.CLOUD_7},{x:2186,y:-1148,image:t.CONST.HEAVENHELL.CLOUD_1}]},{scrollFactor:1.1,depth:8,clouds:[{x:1170,y:-195,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1378,y:-242,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1027,y:55,image:t.CONST.HEAVENHELL.CLOUD_5},{x:835,y:365,image:t.CONST.HEAVENHELL.CLOUD_2},{x:968,y:-237,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1159,y:-548,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1510,y:-844,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1302,y:-797,image:t.CONST.HEAVENHELL.CLOUD_1},{x:760,y:5,image:t.CONST.HEAVENHELL.CLOUD_1},{x:775,y:-123,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1434,y:-1237,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1642,y:-1284,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1291,y:-987,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1099,y:-677,image:t.CONST.HEAVENHELL.CLOUD_2},{x:967,y:-74,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1159,y:-384,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1509,y:-681,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1302,y:-634,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1497,y:1,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1704,y:-46,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1354,y:251,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1162,y:561,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1294,y:-42,image:t.CONST.HEAVENHELL.CLOUD_2},{x:1486,y:-352,image:t.CONST.HEAVENHELL.CLOUD_5},{x:1837,y:-649,image:t.CONST.HEAVENHELL.CLOUD_7},{x:1629,y:-602,image:t.CONST.HEAVENHELL.CLOUD_1},{x:1498,y:-162,image:t.CONST.HEAVENHELL.CLOUD_1},{x:970,y:513,image:t.CONST.HEAVENHELL.CLOUD_7},{x:955,y:641,image:t.CONST.HEAVENHELL.CLOUD_1}]}],e.startSigns=[],e.isPlaying=!1,e.isHell=!1,e.hellDucks=[],e}return e(a,i),a.prototype._init=function(){this.startSigns=[],this.isPlaying=!1,this.isHell=!1,this.hellGhost=null,this.hellFollowRect=null,this.hellDucks=[],this.clickerMovingRight=!0,this.swingTimer=0},a.prototype._preload=function(){},a.prototype._create=function(){this.initPhysics(),this.createStaticCombined(),this.createButtons(),this.createGhost(),this.createHellLevel(),this.initHeavenImages()},a.prototype.initPhysics=function(){this.physicsShapes=this.cache.json.get(t.CONST.PHYSICS.HEAVENHELL_SHAPES),this.hellGhostCollisionCategory=2,this.matter.world.on("collisionstart",function(e,t,i){("ghost-side"===t.gameObject.body.label&&"suck-a-duck"===i.gameObject.body.label||"ghost-side"===t.gameObject.body.label&&"duck-devil"===i.gameObject.body.label||"ghost-side"===i.gameObject.body.label&&"suck-a-duck"===t.gameObject.body.label||"ghost-side"===i.gameObject.body.label&&"duck-devil"===t.gameObject.body.label)&&this.hellGhost.die()},this)},a.prototype.createStaticCombined=function(){this.add.image(1542,-209,t.CONST.HEAVENHELL.HEAVEN_BACKGROUND).setScale(2.336,122.7).setDepth(0),this.add.image(426.5,240,t.CONST.HEAVENHELL.START_CLOUD).setDepth(15);for(var e=0;e<4;e++)this.add.image(-1519.4,1581,t.CONST.HEAVENHELL.HELL_BACKGROUND).setScale(6.89,29380)},a.prototype.createButtons=function(){var e=this;this.startButtonConfig.forEach(function(t){var i=e.add.image(t.x,t.y,t.image).setInteractive(e.input.makePixelPerfect()).setDepth(200);i.config=t,i.hoverStart=null,i.hoverEnd=null,i.isInteractable=!0,i.on("pointerover",function(){i.isInteractable&&(null!=i.hoverEnd&&i.hoverEnd.stop(),i.hoverStart=this.tweens.add({targets:i,scaleX:1.2,scaleY:1.2,ease:"Sine.easeOut",duration:83,repeat:0,yoyo:!1}))},e),i.on("pointerout",function(){i.isInteractable&&(null!=i.hoverStart&&i.hoverStart.stop(),i.hoverEnd=this.tweens.add({targets:i,scaleX:1,scaleY:1,ease:"Sine.easeOut",duration:83,repeat:0,yoyo:!1}))},e),i.on("pointerup",function(){i.config.onClick(),this.startSigns.forEach(function(e){e.slideOut()})},e),i.slideOut=function(){i.isInteractable&&(null!=i.hoverStart&&i.hoverStart.stop(),null!=i.hoverEnd&&i.hoverEnd.stop(),e.tweens.timeline({targets:i,ease:"Cubic.easeInOut",duration:500,loop:0,tweens:[{targets:i,y:i.y+i.config.firstYMove,duration:166,repeat:0,yoyo:!1},{targets:i,y:i.y+i.config.secondYMove,alpha:0,duration:583,repeat:0,yoyo:!1}]}))},e.startSigns.push(i)})},a.prototype.createGhost=function(){this.startGhost=this.add.image(435.4,233.4,t.CONST.HEAVENHELL.START_GHOST).setOrigin(.518,.9131).setDepth(20),this.cameras.main.startFollow(this.startGhost,void 0,this.cameraFollowConfig.lerp,this.cameraFollowConfig.lerp,this.cameraFollowConfig.offsetX,this.cameraFollowConfig.offsetY)},a.prototype.startHellMinigame=function(){this.startGhost.setVisible(!1),this.initHellGhost(),this.initHellFollowRect(),this.initHellDucks(),this.isPlaying=!0,this.isHell=!0},a.prototype.initHellGhost=function(){var e=this,i=this.matter.add.image(422.5,234.6,t.CONST.HEAVENHELL.GHOST_SIDE,void 0,{shape:this.physicsShapes["ghost-side"]}).setScale(this.hellGhostConfig.scaleX,1).setDepth(20).setStatic(!1).setIgnoreGravity(!0);i.setCollisionCategory(this.hellGhostCollisionCategory),i.isActive=!1,i.onUpdate=function(t){if(i.setDepth(e.getHellSortingOrder(i.y)),i.isActive){i.setAngle(0);var a=e.cameras.main.getWorldPoint(e.input.activePointer.x,e.input.activePointer.y);a=new Phaser.Math.Vector2(a.x-i.x,a.y-i.y).scale(1.5*t/1e3),i.setVelocity(a.x,a.y),i.checkForWin()}else i.setVelocity(0,0)},i.checkForWin=function(){i.x<e.hellGhostConfig.winPos.x&&i.y<e.hellGhostConfig.winPos.y?(i.isActive=!1,e.tweens.add({targets:i,scaleX:-2,scaleY:2,alpha:0,tint:"0xFF0000",ease:"Linear",duration:1e3,repeat:0,yoyo:!1,onComplete:function(){}}),e.triggerWin(!0)):i.x<e.hellGhostConfig.losePos.x&&i.y>e.hellGhostConfig.losePos.y&&i.die()},i.die=function(){i.isActive&&(i.setCollidesWith([]),e.triggerLose(!0),i.isActive=!1,e.tweens.timeline({targets:i,ease:"Cubic.easeInOut",duration:1e3,loop:0,tweens:[{targets:i,scaleX:-1.2,scaleY:1.2,angle:47,duration:250},{targets:i,scaleX:.1,scaleY:.1,angle:-250,alpha:.3,duration:1200}]}))},this.tweens.add({targets:i,x:212.8,y:281.6,ease:"Sine.easeInOut",duration:400,repeat:0,yoyo:!1,onComplete:function(){i.isActive=!0}}),this.cameras.main.startFollow(i,void 0,this.cameraFollowConfig.lerp,this.cameraFollowConfig.lerp,this.cameraFollowConfig.offsetX,this.cameraFollowConfig.offsetY),this.hellGhost=i},a.prototype.initHellFollowRect=function(){var e=this,i=this.matter.add.image(800,240,t.CONST.FLY.WHITE_SQUARE,void 0,{isStatic:!0}).setScale(.5,30).setAlpha(0);i.onUpdate=function(){if(e.hellGhost.isActive){var t=e.hellGhost.x+150;t<i.x&&(i.x=t),i.y=e.hellGhost.y}},this.hellFollowRect=i},a.prototype.initHellDucks=function(){var e=this;this.hellDuckConfig.forEach(function(t){var i=e.matter.add.image(t.startX,t.startY,t.image,void 0,{shape:e.physicsShapes[t.shape]}).setCollidesWith([e.hellGhostCollisionCategory]).setScale(t.scaleX,t.scaleY).setDepth(20).setStatic(!1).setIgnoreGravity(!0);e.hellDucks.push(i),e.tweens.add({targets:i,x:t.endX,y:t.endY,ease:"Sine.easeInOut",duration:t.tweenTime,repeat:-1,yoyo:!0,onUpdate:function(){i.setDepth(e.getHellSortingOrder(i.y))},progress:Math.random()})})},a.prototype.getHellSortingOrder=function(e){return 150*(e- -300)/1e3+100},a.prototype.createHellLevel=function(){this.matter.add.image(-760,66,t.CONST.HEAVENHELL.ROAD,void 0,{shape:this.physicsShapes.road}).setDepth(50).setCollidesWith([this.hellGhostCollisionCategory]),this.add.image(-672.8,551,t.CONST.HEAVENHELL.ROAD_FIRE).setDepth(300)},a.prototype.startHeavenMinigame=function(){this.isPlaying=!0,this.isHell=!1,this.initHeavenClicker(),this.startGhost.setVisible(!1),this.initHeavenGhost()},a.prototype.initHeavenImages=function(){var e=this;this.add.image(706.92,139.7,t.CONST.HEAVENHELL.STAIRS_START).setAngle(-45).setDepth(50),this.add.image(1097.7,-259.73,t.CONST.HEAVENHELL.STAIRS_MID).setAngle(-45).setDepth(51),this.add.image(1602.57,-854.4,t.CONST.HEAVENHELL.STAIRS_END).setDepth(52),this.heavenClouds.forEach(function(t){for(var i=0,a=t.clouds;i<a.length;i++){var s=a[i];e.add.image(s.x,s.y,s.image).setScale(1.2).setDepth(t.depth).setScrollFactor(t.scrollFactor,t.scrollFactor)}})},a.prototype.initHeavenClicker=function(){var e=this;this.swing=this.add.image(426,413,t.CONST.HEAVENHELL.SWING).setDepth(900).setScrollFactor(0),this.clicker=this.add.image(426,413,t.CONST.HEAVENHELL.CLICKER).setDepth(900).setScrollFactor(0),this.input.on("pointerdown",function(){e.handleHeavenClick()})},a.prototype.handleHeavenClick=function(){this.isPlaying&&!this.isHell&&this.heavenGhost.moveToStep(this.isClickerWithinLimits())},a.prototype.initHeavenGhost=function(){var e=this,i=this.add.image(458,238,t.CONST.HEAVENHELL.GHOST_SIDE).setOrigin(.784,.9933).setDepth(100);i.currentStep=0,i.currentTween=null,i.isActive=!0,i.moveToStep=function(t){if(null!=i.currentTween&&i.currentTween.stop(),i.currentStep+=t?1:-1,i.currentStep<0&&(i.currentStep=0),i.currentStep>=e.heavenSteps.length)return i.animateWin(),void(i.isActive=!1);i.currentTween=t?e.tweens.timeline({targets:i,ease:"Linear",duration:500,loop:0,tweens:[{targets:i,x:e.heavenSteps[i.currentStep].x-25,y:e.heavenSteps[i.currentStep].y-15,ease:"Linear",duration:250},{targets:i,x:e.heavenSteps[i.currentStep].x,y:e.heavenSteps[i.currentStep].y,ease:"Linear",duration:250}]}):e.tweens.add({targets:i,x:e.heavenSteps[i.currentStep].x,y:e.heavenSteps[i.currentStep].y,ease:"Linear",duration:500})},i.animateWin=function(){null!=i.currentTween&&i.currentTween.stop(),i.currentTween=e.tweens.add({targets:i,x:"+=284",y:"-=28",scaleX:1.4,scaleY:1.4,alpha:0,ease:"Sine.easeIn",duration:1e3}),e.triggerWin(!1)},i.moveToStep(0),this.cameras.main.startFollow(i,void 0,.02,.02,this.cameraFollowConfig.offsetX,this.cameraFollowConfig.offsetY),this.heavenGhost=i},a.prototype.isClickerWithinLimits=function(){return Phaser.Math.Difference(this.clicker.x,this.swing.x)<this.clickableWidth},a.prototype._update=function(e,t){this.isPlaying&&(this.isHell?(this.hellGhost.onUpdate(t),this.hellFollowRect.onUpdate()):this.moveClicker(t))},a.prototype.moveClicker=function(e){this.clickerMovingRight?(this.swingTimer+=e/this.clickerSwingTime,this.swingTimer>=1&&(this.clickerMovingRight=!this.clickerMovingRight,this.swingTimer=1)):(this.swingTimer-=e/this.clickerSwingTime,this.swingTimer<=0&&(this.clickerMovingRight=!this.clickerMovingRight,this.swingTimer=0)),this.clicker.x=Phaser.Math.Interpolation.SmoothStep(this.swingTimer,this.swingStartX,this.swingEndX)},a.prototype._timeout=function(){},a.prototype._afterLoss=function(){},a.prototype._afterWin=function(){},a.prototype.triggerLose=function(e){this.loseGame(1e3)},a.prototype.triggerWin=function(e){this.registry.set(t.CONST.REGISTRY.HELL_COMPLETED,e),this.winGame(1500)},a}(i.MinigameScene);exports.HeavenHellScene=a;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"FSea":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),r=require("./generic/MinigameScene"),o=function(r){function o(){var t=r.call(this,{sceneName:e.CONST.SCENES.CREDITS,duration:5e3,showCountdown:!0,startScreenColor:5618412,startText:"WELCOME\nTO HEAVEN!",startTextYOrigin:.35,timeToStart:1500,startTextColor:16777215,nextScene:e.CONST.SCENES.MENU,endButtons:{normalNoSkip:{x:426.5,y:386,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}}})||this;return t.isHell=!1,t}return t(o,r),o.prototype._init=function(){this.isHell=this.registry.get(e.CONST.REGISTRY.HELL_COMPLETED),this.isHell&&(this.startText="WELCOME\nTO HELL!",this.startScreenColor=16711680,this.startTextColor=0),this.registry.set(e.CONST.REGISTRY.GAME_COMPLETED,!0)},o.prototype._preload=function(){},o.prototype._create=function(){this.add.image(0,0,this.isHell?e.CONST.CREDITS.HELL:e.CONST.CREDITS.HEAVEN).setOrigin(0,0).setDepth(10),this.isHell||this.add.image(85,252,e.CONST.CREDITS.HEAVEN).setDepth(2)},o.prototype._update=function(t,e){},o.prototype._timeout=function(){this.winGame()},o.prototype._afterLoss=function(){},o.prototype._afterWin=function(){},o}(r.MinigameScene);exports.CreditsScene=o;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"gvug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,i=require("../util/OMGLogger");!function(e){e[e.JSON=1]="JSON",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO"}(e||(e={}));var t=function(){function t(e,i){this.loadScene=e,this.requiredFor=void 0===i.requiredFor?[]:i.requiredFor,this.imagesKey=void 0!==i.imagesKey&&i.imagesKey,this.animations=void 0!==i.animations&&i.animations,this.physics=void 0!==i.physics&&i.physics,this.audio=void 0!==i.audio&&i.audio,this.json=void 0!==i.json&&i.json,this.loadedCallback=void 0!==i.loadedCallback&&i.loadedCallback,this.tag=void 0===i.tag?[]:i.tag,this.loaded=!1,this.loading=!1,this.remainingFiles=[]}return t.prototype.Load=function(){this.loading=!0,this.loadFiles(this.imagesKey,e.IMAGE),this.loadFiles(this.animations,e.JSON),this.loadFiles(this.physics,e.JSON),this.loadFiles(this.audio,e.AUDIO),this.loadFiles(this.json,e.JSON),this.checkIfLoaded()},t.prototype.isBlockingScene=function(e){return!this.loaded&&-1!==this.requiredFor.indexOf(e)},t.prototype.handleFileComplete=function(e){var i=this.remainingFiles.indexOf(e);-1!==i&&(this.remainingFiles.splice(i,1),this.checkIfLoaded())},t.prototype.checkIfLoaded=function(){this.loaded=0==this.remainingFiles.length,this.loaded&&(this.loading=!1,this.loadedCallback&&this.loadedCallback())},t.prototype.loadFiles=function(t,o){if(t)for(var a in t)if(this.isAlreadyLoaded(t[a],o))i.OMGLogger.Debug("Skipping file load "+t[a]," - already loaded. You should check why a double load was attempted.");else{switch(o){case e.JSON:this.loadScene.load.json(t[a],t[a]);break;case e.AUDIO:this.loadScene.load.audio(t[a],t[a]);break;case e.IMAGE:this.loadScene.load.image(t[a],t[a])}this.remainingFiles.push(t[a])}},t.prototype.hasTag=function(e){return this.tag.some(function(i){return i===e})},t.prototype.isLoaded=function(){return this.loaded},t.prototype.isLoading=function(){return this.loading},t.prototype.isAlreadyLoaded=function(e,i){var t=this.GetCacheDataForKey(e,i);return!(void 0===t||"__MISSING"===t)},t.prototype.GetCacheDataForKey=function(i,t){switch(t){case e.JSON:return this.loadScene.cache.json.get(i);case e.AUDIO:return this.loadScene.cache.audio.get(i);case e.IMAGE:return this.loadScene.textures.get(i).key}},t}();exports.default=t;
},{"../util/OMGLogger":"x3NR"}],"YWQh":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(S,N){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,S){e.__proto__=S}||function(e,S){for(var N in S)S.hasOwnProperty(N)&&(e[N]=S[N])})(S,N)};return function(S,N){function t(){this.constructor=S}e(S,N),S.prototype=null===N?Object.create(N):(t.prototype=N.prototype,new t)}}(),S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var N=require("../CONST"),t=S(require("../components/ProgressiveLoadChunk")),i=function(S){function i(){var e=S.call(this,{key:N.CONST.SCENES.PROGRESSIVE_LOAD})||this;return e.loadQueue=[],e.loadedChunks=[],e}return e(i,S),i.prototype.init=function(){var e=this;this.registry.set(N.CONST.SCENES.PROGRESSIVE_LOAD,this),this.loadQueue=[new t.default(this,{requiredFor:[N.CONST.SCENES.FLY],audio:[N.CONST.AUDIO.WIN,N.CONST.AUDIO.LOSE]}),new t.default(this,{requiredFor:[N.CONST.SCENES.FLY],imagesKey:N.CONST.FLY,animations:[N.CONST.ANIMATIONS.FLY_WIN],physics:[N.CONST.PHYSICS.FLY_SHAPES]}),new t.default(this,{requiredFor:[N.CONST.SCENES.PROTECT],imagesKey:N.CONST.PROTECT,animations:[N.CONST.ANIMATIONS.GRANNYDIE_BODY,N.CONST.ANIMATIONS.GRANNYDIE_HAND1,N.CONST.ANIMATIONS.GRANNYDIE_HAND2,N.CONST.ANIMATIONS.GRANNY_HAND1,N.CONST.ANIMATIONS.GRANNY_HAND2]}),new t.default(this,{requiredFor:[N.CONST.SCENES.PROTECT,N.CONST.SCENES.GHOSTBUSTERS],animations:[N.CONST.ANIMATIONS.GHOST_IDLE]}),new t.default(this,{requiredFor:[N.CONST.SCENES.PROTECT,N.CONST.SCENES.PARTY],animations:[N.CONST.ANIMATIONS.WIN_IMAGE_POPUP]}),new t.default(this,{requiredFor:[N.CONST.SCENES.SOUNDTRACK],audio:[N.CONST.AUDIO.SOUNDTRACK],loadedCallback:function(){e.registry.get(N.CONST.SCENES.SOUNDTRACK).switchMusic()}}),new t.default(this,{requiredFor:[N.CONST.SCENES.ALAN],imagesKey:N.CONST.ALAN}),new t.default(this,{requiredFor:[N.CONST.SCENES.DRESSUP,N.CONST.SCENES.SORT,N.CONST.SCENES.ALAN],audio:[N.CONST.AUDIO.GRAB]}),new t.default(this,{requiredFor:[N.CONST.SCENES.JUMPSCARE],imagesKey:N.CONST.JUMPSCARE,audio:[N.CONST.AUDIO.SCARE1,N.CONST.AUDIO.SCARE2,N.CONST.AUDIO.CLICK],animations:[N.CONST.ANIMATIONS.SCARYARM_BACK,N.CONST.ANIMATIONS.SCARYARM_FRONT]}),new t.default(this,{requiredFor:[N.CONST.SCENES.COMEDIAN],imagesKey:N.CONST.COMEDIAN,animations:[N.CONST.ANIMATIONS.COMEDIAN_HAND_1,N.CONST.ANIMATIONS.COMEDIAN_HAND_2]}),new t.default(this,{requiredFor:[N.CONST.SCENES.PARTY],imagesKey:N.CONST.PARTY,audio:[N.CONST.AUDIO.PARTY_MUSIC],animations:[N.CONST.ANIMATIONS.BLUE_LIGHT,N.CONST.ANIMATIONS.GREEN_LIGHT,N.CONST.ANIMATIONS.PINK_LIGHT,N.CONST.ANIMATIONS.NOTE_DEATH],json:N.CONST.JSONPARTY}),new t.default(this,{requiredFor:[N.CONST.SCENES.DRESSUP],imagesKey:N.CONST.DRESSUP,audio:[N.CONST.AUDIO.BOUNCE]}),new t.default(this,{requiredFor:[N.CONST.SCENES.COLLECT],imagesKey:N.CONST.COLLECT,audio:[N.CONST.AUDIO.WINK],animations:[N.CONST.ANIMATIONS.CANDY_DIE,N.CONST.ANIMATIONS.CANDY_IDLE]}),new t.default(this,{requiredFor:[N.CONST.SCENES.SORT],imagesKey:N.CONST.SORT}),new t.default(this,{requiredFor:[N.CONST.SCENES.GHOSTBUSTERS],imagesKey:N.CONST.GHOSTBUSTERS,animations:[N.CONST.ANIMATIONS.GHOST_DIE]}),new t.default(this,{requiredFor:[N.CONST.SCENES.HEAVENHELL],imagesKey:N.CONST.HEAVENHELL,physics:[N.CONST.PHYSICS.HEAVENHELL_SHAPES]}),new t.default(this,{requiredFor:[N.CONST.SCENES.CREDITS],imagesKey:N.CONST.CREDITS})]},i.prototype.preload=function(){var e=this;this.load.on("filecomplete",function(S,N){e.currChunk&&e.currChunk.handleFileComplete(S)},this)},i.prototype.update=function(){this.loadNextChunkNew()},i.prototype.loadNextChunkNew=function(){(0!=this.loadQueue.length||this.currChunk)&&(this.currChunk?(this.currChunk.isLoaded()||this.currChunk.isLoading()||(this.currChunk.Load(),this.load.start()),this.currChunk.isLoaded()&&(this.loadedChunks.push(this.currChunk),this.currChunk=void 0)):this.currChunk=this.loadQueue.shift())},i.prototype.prioritizeChunksWithTag=function(e){var S=this.loadQueue.filter(function(S){return S.hasTag(e)}),N=this.loadQueue.filter(function(S){return!S.hasTag(e)});this.loadQueue=S.concat(N)},i.prototype.isSceneLoaded=function(e){if(this.currChunk&&this.currChunk.isBlockingScene(e))return!1;for(var S=0,N=this.loadQueue;S<N.length;S++){if(N[S].isBlockingScene(e))return!1}return!0},i}(Phaser.Scene);exports.ProgressiveLoadScene=i;
},{"../CONST":"HmIA","../components/ProgressiveLoadChunk":"gvug"}],"sPrd":[function(require,module,exports) {
"use strict";function e(e){var t={};function r(){try{var t="__some_random_key_you_are_not_going_to_use__";return e().setItem(t,t),e().removeItem(t),!0}catch(r){return!1}}return{getItem:function(n){return r()?e().getItem(n):t.hasOwnProperty(n)?t[n]:null},setItem:function(n,o){r()?e().setItem(n,o):t[n]=String(o)},removeItem:function(n){r()?e().removeItem(n):delete t[n]},clear:function(){r()?e().clear():t={}},key:function(n){return r()?e().key(n):Object.keys(t)[n]||null},get length(){return r()?e().length:Object.keys(t).length}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.storageFactory=void 0,exports.storageFactory=e;
},{}],"PL6t":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("storage-factory"),r=require("../util/OMGLogger"),o=e.storageFactory(function(){return localStorage}),n=function(e){function n(t){var r=e.call(this,t)||this;return r.initialized=!1,r}return t(n,e),n.prototype.initialize=function(){this.initialized=!0},n.prototype.getItem=function(t,e){void 0===e&&(e="");var r=o.getItem(t);return r||e},n.prototype.setItem=function(t,e){r.OMGLogger.Debug("Saving key: "+t+" value: "+e),o.setItem(t,e)},n.prototype.removeItem=function(t){o.removeItem(t)},n.prototype.isLocalStorageSupported=function(){try{var t="isLocalStorageSupported";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}},n}(Phaser.Plugins.BasePlugin);exports.StoragePlugin=n;
},{"storage-factory":"sPrd","../util/OMGLogger":"x3NR"}],"njVE":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e="audioEnabled",i=function(i){function o(t){var o=i.call(this,t)||this;return o.storagePlugin=t.get("StoragePlugin"),o.audioEnabled=JSON.parse(o.storagePlugin.getItem(e,"true")),o.isCommercialBreak=!1,o.pluginManager.game.sound.mute=!o.audioEnabled,o.initialized=!1,o}return t(o,i),o.prototype.initialize=function(){this.initialized=!0},o.prototype.toggleAudioEnabled=function(){return this.audioEnabled=!this.audioEnabled,this.storagePlugin.setItem(e,this.audioEnabled.toString()),this.updateAudioMute(),this.isAudioEnabled()},o.prototype.isAudioEnabled=function(){return this.audioEnabled},o.prototype.beforeCommercialBreak=function(){this.isCommercialBreak=!0,this.updateAudioMute()},o.prototype.afterCommercialBreak=function(){this.isCommercialBreak=!1,this.updateAudioMute()},o.prototype.updateAudioMute=function(){this.pluginManager.game.sound.mute=!this.audioEnabled||this.isCommercialBreak},o}(Phaser.Plugins.BasePlugin);exports.AudioPlugin=i;
},{}],"jP6t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./scenes/LoadScene"),n=require("./scenes/MenuScene"),r=require("./scenes/SoundtrackScene"),s=require("./scenes/DressupScene"),c=require("./scenes/CollectScene"),u=require("./scenes/SortScene"),i=require("./scenes/JumpscareScene"),S=require("./scenes/GhostbustersScene"),t=require("./scenes/ProtectScene"),a=require("./scenes/AlanScene"),l=require("./scenes/PartyScene"),o=require("./scenes/ComedianScene"),g=require("./scenes/FlyScene"),d=require("./scenes/HeavenHellScene"),q=require("./scenes/CreditsScene"),P=require("./scenes/ProgressiveLoadScene"),p=require("./plugins/StoragePlugin"),m=require("./plugins/AudioPlugin"),h=new Phaser.Game({width:853,height:480,plugins:{global:[{key:"StoragePlugin",plugin:p.StoragePlugin,mapping:"storagePlugin",start:!0},{key:"AudioPlugin",plugin:m.AudioPlugin,mapping:"audioPlugin",start:!0}]},scale:{mode:Phaser.Scale.FIT},scene:[e.LoadScene,P.ProgressiveLoadScene,r.SoundtrackScene,n.MenuScene,g.FlyScene,a.AlanScene,t.ProtectScene,i.JumpscareScene,o.ComedianScene,l.PartyScene,s.DressupScene,c.CollectScene,u.SortScene,S.GhostbustersScene,d.HeavenHellScene,q.CreditsScene],physics:{default:"matter",matter:{debug:!1}}});
},{"./scenes/LoadScene":"G1z3","./scenes/MenuScene":"OuKZ","./scenes/SoundtrackScene":"QxR8","./scenes/DressupScene":"wU9F","./scenes/CollectScene":"XNKR","./scenes/SortScene":"Lz1s","./scenes/JumpscareScene":"isVz","./scenes/GhostbustersScene":"SG5b","./scenes/ProtectScene":"vnj5","./scenes/AlanScene":"jmcL","./scenes/PartyScene":"K0zn","./scenes/ComedianScene":"JBAC","./scenes/FlyScene":"GHio","./scenes/HeavenHellScene":"HNZL","./scenes/CreditsScene":"FSea","./scenes/ProgressiveLoadScene":"YWQh","./plugins/StoragePlugin":"PL6t","./plugins/AudioPlugin":"njVE"}]},{},["jP6t"], null)
//# sourceMappingURL=main.e722257a.js.map